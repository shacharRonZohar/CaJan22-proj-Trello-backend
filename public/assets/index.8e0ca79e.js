import{r as b,o as c,c as d,a as o,b as w,w as M,d as T,F as y,e as C,n as I,t as v,f as X,g as H,h as ee,i as J,j as B,v as A,k,l as S,m as g,p as D,q as te,s as z,C as W,D as K,u as R,x as se,y as oe,z as ne,A as ae,B as re,E as ie,G as le,U as ce}from"./vendor.aab19eef.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}};de();var _=(e,t)=>{const a=e.__vccOpts||e;for(const[i,n]of t)a[i]=n;return a};const ue={},he={class:"main-header home-header flex space-between align-center"},ge=o("div",{class:"logo flex align-center"},[o("span",{class:"logo-icon"}),o("span",{class:"logo-txt"},"Twello")],-1),me={class:"home-nav"},pe={class:"clean-list flex"},ke={class:"login-btn"},_e=T("Log in"),ve={class:"signup-btn"},be=T("Sign up");function fe(e,t){const a=b("router-link");return c(),d("header",he,[ge,o("nav",null,[o("div",me,[o("ul",pe,[o("li",null,[o("button",ke,[w(a,{to:"/auth/login",class:"login-link"},{default:M(()=>[_e]),_:1})])]),o("li",null,[o("button",ve,[w(a,{to:"/auth/signup",class:"signup-board"},{default:M(()=>[be]),_:1})])])])])])])}var ye=_(ue,[["render",fe]]);const Ce={},Ie={class:"main-header login-logout-header"},$e=o("div",{class:"logo flex align-center"},[o("span",{class:"logo-img"}),o("span",{class:"logo-txt"},"Twello")],-1),we=[$e];function Te(e,t){return c(),d("header",Ie,we)}var De=_(Ce,[["render",Te]]);const Se={props:{boards:Array},emits:["closeModal"],created(){},methods:{goToBoard(e){this.$router.push(`/board/${e._id}`),this.onClose()},onClose(){this.$emit("closeModal")},img(e){var t;return`url(${((t=e.style)==null?void 0:t.imgUrl)||""})`}},computed:{}},Be={class:"header-board-list"},Ae={class:"header flex space-between align-center"},xe=o("span",{class:"title"},"Boards",-1),Oe=o("a",{class:"close-board-list-icon"},null,-1),Me=[Oe],Ne={class:"board-list clean-list"},Pe=["onClick"];function Ge(e,t,a,i,n,s){return c(),d("div",Be,[o("div",Ae,[xe,o("button",{class:"close-btn btn",onClick:t[0]||(t[0]=(...r)=>s.onClose&&s.onClose(...r))},Me)]),o("ul",Ne,[(c(!0),d(y,null,C(a.boards,r=>(c(),d("li",{class:"board flex align-center",onClick:l=>s.goToBoard(r),key:r._id},[o("div",{class:"mini-pic",style:I({backgroundImage:s.img(r)})},null,4),o("span",null,v(r.title),1)],8,Pe))),128))])])}var Le=_(Se,[["render",Ge]]);const G={makeId:Ue,makeExtId:Je,getRandomInt:Re,getRandomColor:Ee,resetLocalStorage:Fe,save:je,load:Ve};function Ue(e="",t=13){let a=e;const i="0123456789";for(let n=0;n<t;n++)a+=i.charAt(Math.floor(Math.random()*i.length));return a}function Je(e=13){let t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function Re(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function Ee(){const e="0123456789ABCDEF";let t="#";for(let a=0;a<6;a++)t+=e[Math.floor(Math.random()*16)];return t}function Fe(){localStorage.clear(),sessionStorage.clear(),window.location.reload()}function je(e,t){localStorage.setItem(e,JSON.stringify(t))}function Ve(e){return JSON.parse(localStorage.getItem(e))||null}const qe=X({accessKey:"LM4Rpq3DaqATHDr2uryLi9FbEwE5CJhRJR6qRGc5Nu0"}),P={uploadImgFromComp:We,queryPhotos:He,getImgColor:ze};async function He(e="nature"){try{return(await qe.search.getPhotos({query:e,orientation:"landscape"})).response}catch(t){throw console.log("Couldnt get photos from unsplash",t),t}}async function ze(e){return(await new ee().getColorAsync(e)).hex}async function We(e){const t="twello",i="https://api.cloudinary.com/v1_1/twello/image/upload",n=new FormData;n.append("file",e.target.files[0]),n.append("upload_preset",t);try{return(await H.post(i,n)).data}catch(s){throw console.log(s),s}}const Ke="/api/";var Ye=H.create({withCredentials:!0});const x={get(e,t){return F(e,"GET",t)},post(e,t){return F(e,"POST",t)},put(e,t){return F(e,"PUT",t)},delete(e,t){return F(e,"DELETE",t)}};async function F(e,t="GET",a=null){try{return(await Ye({url:`${Ke}${e}`,method:t,data:a,params:t==="GET"?a:null})).data}catch(i){throw console.log(`Had Issues ${t}ing to the backend, endpoint: ${e}, with data: ${a}`),console.dir(i),i.response&&i.response.status===401&&window.location.assign("/login"),i}}function Qe(e){const t=sessionStorage.getItem(e);return t?JSON.parse(t):null}function Ze(e,t){sessionStorage[e]=JSON.stringify(t)}const Y={load:Qe,save:Ze},Q="userLocDB",Z="user",L={save:Xe,getLoggedInUser:et,getByUsername:tt,getUsersBy:st};function Xe(e){return Y.save(Q,e)}function et(){return Y.load(Q)}async function tt(e){return await x.get(`${Z}/member/${e}`)}async function st(e){return await x.get(`${Z}/by/${e}`)}const q={add:nt,getActivityTxt:at};function ot({type:e,itemName:t,containerName:a="",ids:i={boardId:"",groupId:"",taskId:""}}){return{id:G.makeId("a"),createdAt:Date.now(),user:L.getLoggedInUser(),type:e,itemName:t,containerName:a,ids:i}}function nt(e){var a;console.log("from addActivity in activity-service: ",e);const t=ot(e);return(a=e.board.activities)!=null&&a.length?e.board.activities.push(t):e.board.activities=[t],Promise.resolve(e.board)}function at(e,t){var i;console.log(t);let a=`${(i=e.user)==null?void 0:i.fullname} ${e.type} `;return e.type==="renamed"?a+=`this ${t}`:a+=`${e.type==="added"&&t==="card"?`this ${t}`:e.itemName} 
    ${e.type==="added"?"to":"from"} ${e.containerName}`}const $={query:rt,save:it,remove:lt,saveTask:dt,saveGroup:ht,removeGroup:ct,archiveTask:ut,saveAttachment:_t,saveGroupDrop:gt,saveCover:ft,toggleLabel:yt,saveNewLabel:Ct,removeCover:It,getEmptyBoard:Dt,addChecklist:vt,addChecklistItem:bt,addMember:$t,saveTaskDueDate:mt,removeTaskDueDate:pt,toggleTaskDone:kt,addMemberToTask:wt,starredBoardToggle:Tt},j="board";async function rt(e={}){return await x.get(j,e)}function it(e){return e._id?At(e):xt(e)}async function lt(e){return await x.remove(`${j}/${e}`)}function ct(e,t,a){const i=e.groups.findIndex(n=>n.id===t);return i===-1&&console.log("group not found"),e.groups.splice(i,1),e}async function dt(e,t,a){const i=e.groups.find(n=>n.id===a);if(!t.id)t.id=G.makeId("t"),t.createdAt=Date.now(),i.tasks.push(t);else{console.log("Im here updating!");const n=i.tasks.findIndex(s=>s.id===t.id);if(n===-1)return Promise.reject("Couldnt find task to edit");i.tasks.splice(n,1,t)}return Promise.resolve({board:e,groupTitle:i.title})}function ut(e,t,a,i){const n=e.groups.find(r=>r.id===a),s=n.tasks.findIndex(r=>r.id===t);return n.tasks.splice(s,1),Promise.resolve(e)}function ht(e,t,a){if(!t.id)t.id=G.makeId("g"),t.tasks=[],e.groups.push(t);else{const i=e.groups.findIndex(n=>n.id===t.id);if(i===-1)return Promise.reject("Couldnt find group to edit");e.groups.splice(i,1,t)}return e}function gt(e,t,a){const i=e.groups.splice(t,1)[0];return e.groups.splice(a,0,i),Promise.resolve(e)}function mt(e,t,a,i,n){const r=e.groups.find(u=>u.id===a).tasks.find(u=>u.id===t),l=St(i);return r.dueDate=l,Promise.resolve(e)}function pt(e,t,a){const n=e.groups.find(s=>s.id===a).tasks.find(s=>s.id===t);return delete n.dueDate,Promise.resolve(e)}function kt(e,t,a){const n=e.groups.find(s=>s.id===a).tasks.find(s=>s.id===t);return n.dueDate.isDone=!n.dueDate.isDone,Promise.resolve(e)}function _t(e,t,a,i,n){const r=e.groups.find(u=>u.id===a).tasks.find(u=>u.id===t),l=Bt(i);return"attachments"in r?r.attachments.unshift(l):r.attachments=[l],Promise.resolve(e)}function vt(e,t,a,i,n){const r=e.groups.find(u=>u.id===a).tasks.find(u=>u.id===t),l={id:G.makeId("c"),title:i,createdAt:Date.now(),items:[]};return"checklists"in r?r.checklists.push(l):r.checklists=[l],Promise.resolve(e)}function bt(e,t,a,i,n){const l=e.groups.find(f=>f.id===a).tasks.find(f=>f.id===t).checklists.find(f=>f.id===i.checklistId),u={id:G.makeId("i"),title:i.title,createdAt:Date.now(),isDone:!1};return l.items.push(u),Promise.resolve(e)}async function ft(e,t,a,i,n){let s={type:i.type,backgroundColor:i.style};i.type!=="color"&&(s.backgroundImage=`url(${i.style})`,s.backgroundColor=await P.getImgColor(i.style));const l=e.groups.find(u=>u.id===a).tasks.find(u=>u.id===t);return l.cover=s,Promise.resolve(e)}function yt(e,t,a,i,n){var l;const r=e.groups.find(u=>u.id===a).tasks.find(u=>u.id===t);if((l=r.labelIds)!=null&&l.length){const u=r.labelIds.findIndex(f=>f===i);u!==-1?r.labelIds.splice(u,1):r.labelIds.push(i)}else r.labelIds=[i];return Promise.resolve(e)}function Ct(e,t,a){return t.id=G.makeId("l"),e.labels.unshift(t),Promise.resolve({boardToSave:e,id:t.id})}function It(e,t,a,i){const s=e.groups.find(r=>r.id===a).tasks.find(r=>r.id===t);return delete s.cover,Promise.resolve(e)}function $t(e,t){var a;return(a=e==null?void 0:e.members)!=null&&a.length||(e.members=[]),e.members.some(i=>i.username===t.username)?Promise.reject("User is already on board"):(e.members.push(t),Promise.resolve(e))}function wt(e,t,a,i){var r,l;const s=e.groups.find(u=>u.id===a).tasks.find(u=>u.id===t);return(r=s.members)!=null&&r.includes(i)?Promise.reject("Member is already on task"):((l=s==null?void 0:s.members)!=null&&l.length?s.members.push(i):s.members=[i],console.log(e),Promise.resolve(e))}function Tt(e,t){var a;if((a=e.starredBy)!=null&&a.length){const i=e.starredBy.findIndex(n=>n===t);i===-1?e.starredBy.push(t):e.starredBy.splice(i,1)}else e.starredBy=[t];return Promise.resolve(e)}function Dt(){return{title:"",createdAt:Date.now(),createdBy:{},style:{},labels:[{id:"l101",title:"Done",color:"#61bd4f"},{id:"l102",title:"Progress",color:"#f2d600"},{id:"l103",title:"Low priority",color:"#c377e0"},{id:"l104",title:"Medium priority",color:"#ff9f1a"},{id:"l105",title:"High priority",color:"#eb5a46"},{id:"l106",title:"All",color:"#0079bf"}],members:[],groups:[]}}function St(e){const t=J(e[0]).unix()*1e3,a=J(e[1]).unix()*1e3;return console.log(t),console.log(a),t===a?{endDate:a,isDone:!1}:{startDate:t,endDate:a,isDone:!1}}function Bt(e){const t=e.lastIndexOf("/")+1,a=e.lastIndexOf("_"),i=e.substring(/\.(png|jpg|gif|bmp|jpeg|PNG|JPG|GIF|BMP|JPEG)/.exec(e).index),n=e.substring(t,a)+i;return{id:G.makeId("a"),url:e,name:n,createdAt:Date.now()}}async function At(e){return await x.put(`${j}/${e._id}`,e)}async function xt(e){return await x.post(j,e)}const Ot={emits:["addedBoard","closeModal"],data(){return{boardToAdd:$.getEmptyBoard(),imgs:null,colors:["#0079bf","#d29034","#519839","#b04632","#89609e"]}},created(){this.displayImgs()},methods:{async displayImgs(){const e=await P.queryPhotos(this.searchTxt);this.imgs=e.results.splice(1,4)},setBackgroundImg(e){this.boardToAdd.style.imgUrl=e.urls.full,this.boardToAdd.style.color=""},setBackgroundColor(e){this.boardToAdd.style.color=e,this.boardToAdd.style.imgUrl=""},onCreateBoard(){if(this.boardToAdd.title.trim()==="")return;const e=this.$store.getters.loggedInUser;this.boardToAdd.createdBy=e,this.boardToAdd.members=[e],this.$store.dispatch({type:"saveBoard",boardToSave:this.boardToAdd}),this.$emit("addedBoard")},onClose(){this.$emit("addedBoard")}}},Mt={class:"add-board"},Nt={class:"header flex"},Pt=o("h1",{class:"title"},"Create board",-1),Gt={class:"body"},Lt={class:"bg-panel"},Ut=o("span",{class:"background-title"},"Background",-1),Jt={class:"img-list clean-list flex"},Rt=["onClick","src"],Et={class:"color-list clean-list flex"},Ft=["onClick"],jt={class:"input-panel"},Vt=o("span",{class:"input-title"},[T(" Board title "),o("span",{class:"asterisk"},"*")],-1);function qt(e,t,a,i,n,s){return c(),d("section",Mt,[o("div",Nt,[Pt,o("a",{onClick:t[0]||(t[0]=(...r)=>s.onClose&&s.onClose(...r)),class:"close-create-board-icon"})]),o("div",Gt,[o("div",Lt,[Ut,o("ul",Jt,[(c(!0),d(y,null,C(n.imgs,r=>(c(),d("li",{key:r.id},[o("img",{class:"img",onClick:l=>s.setBackgroundImg(r),src:r.urls.thumb,alt:""},null,8,Rt)]))),128))]),o("ul",Et,[(c(!0),d(y,null,C(n.colors,r=>(c(),d("li",{key:r},[o("div",{class:"color",onClick:l=>s.setBackgroundColor(r),style:I({backgroundColor:r})},null,12,Ft)]))),128))])]),o("div",jt,[Vt,B(o("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>n.boardToAdd.title=r),type:"text"},null,512),[[A,n.boardToAdd.title]])]),o("button",{class:"create-btn btn",onClick:t[2]||(t[2]=(...r)=>s.onCreateBoard&&s.onCreateBoard(...r))},"Create")])])}var V=_(Ot,[["render",qt]]);const N={login:Ht,logout:Kt,signup:Yt,signupWithGoogle:Wt,loginWithGoogle:zt},E="auth";async function Ht(e){try{const t=await x.post(`${E}/login`,e);return L.save(t),Promise.resolve(t)}catch(t){throw console.log("Couldnt login",t),t}}async function zt(e){e.password="isGoogle";try{const t=await x.post(`${E}/login`,e);return L.save(t),Promise.resolve(t)}catch(t){console.log("Couldnt login with google",t)}}async function Wt(e){e.password="isGoogle";try{const t=await x.post(`${E}/signup`,e);return L.save(t),Promise.resolve(t)}catch(t){throw console.log("Couldnt signup with google",t),t}}async function Kt(){try{return await x.post(`${E}/logout`),sessionStorage.clear(),Promise.resolve()}catch(e){throw console.log(e),e}}async function Yt(e){try{const t=await x.post(`${E}/signup`,e);return L.save(t),t}catch(t){throw console.log("Couldnt login",t),t}}const Qt={props:{user:Object},emits:["closeModal"],methods:{async onLogout(){await N.logout(),this.$router.push("/")},onClose(){this.$emit("closeModal")}},computed:{imgUrl(){var e;return`url(${(e=this.user)==null?void 0:e.imgUrl})`||""}}},Zt={class:"header"},Xt=o("span",null,"Account",-1),es={class:"user"},ts={class:"details"},ss={class:"fullname"},os={class:"username"},ns=o("div",{class:"profile-btns"},[o("span",{class:"profile-btn"},"Profile"),o("span",{class:"activity-btn"},"Activity"),o("span",{class:"Cards-btn"},"Cards")],-1);function as(e,t,a,i,n,s){return c(),d("section",{onClick:t[2]||(t[2]=k(()=>{},["stop"])),class:"profile-modal"},[o("div",Zt,[Xt,o("span",{onClick:t[0]||(t[0]=(...r)=>s.onClose&&s.onClose(...r)),class:"close-profile-modal"})]),o("div",es,[o("div",{class:"profile-icon",style:I({backgroundImage:s.imgUrl})},null,4),o("div",ts,[o("span",ss,v(a.user.fullname),1),o("small",os,v(a.user.username),1)])]),ns,o("div",{onClick:t[1]||(t[1]=(...r)=>s.onLogout&&s.onLogout(...r)),class:"logout"},"Logout")])}var rs=_(Qt,[["render",as]]),is="/assets/search-icon.22ae21ff.png",ls="/assets/search-black.2b77d9f4.png";const cs={components:{headerBoardList:Le,addBoard:V,profileModal:rs},created(){},data(){return{searchTxt:"",isShown:!1,createClicked:!1,profileModalOpen:!1}},methods:{openList(e){this.isShown=!this.isShown},AppHeaderClicked(){this.$router.push("/board")},onToggleAddBoard(){this.createClicked=!this.createClicked},onToggleProfileModal(){this.profileModalOpen=!this.profileModalOpen}},computed:{headerBgc(){return{"trans-header":/board\//g.test(this.$route.fullPath)}},boards(){return this.$store.getters.boards},currBoard(){return this.$store.getters.board},loggedInUser(){return this.$store.getters.loggedInUser}},unmounted(){}},ds=o("img",{class:"gif-logo",src:"",alt:""},null,-1),us=o("span",{class:"logo-txt"},"Twello",-1),hs=[ds,us],gs={class:"board-main-nav flex space-between align-center"},ms={class:"actions"},ps=o("span",null,[T(" Board "),o("span",{class:"svg-icon expand"})],-1),ks=[ps],_s=o("button",{class:"btn wide-s"},[o("span",null,[T(" Starred "),o("span",{class:"svg-icon expand"})])],-1),vs=o("button",{class:"btn narrow-s"},[o("span",null,[T(" More "),o("span",{class:"svg-icon expand"})])],-1),bs={class:"second-actions flex"},fs={class:"search-app-header"},ys=o("img",{class:"search-icon",src:is,alt:""},null,-1),Cs=o("img",{class:"search-icon-b",src:ls,alt:""},null,-1),Is=te('<div class="mini-search"><span class="search-icon svg-icon"></span></div><button class="info btn"><span class="info-icon"></span></button><button class="notifications btn"><span class="notifications-icon"></span></button>',3);function $s(e,t,a,i,n,s){var f;const r=b("add-board"),l=b("header-board-list"),u=b("profile-modal");return c(),d("header",{class:D([s.headerBgc,"main-header app-header flex align-center"])},[o("div",{onClick:t[0]||(t[0]=(...p)=>s.AppHeaderClicked&&s.AppHeaderClicked(...p)),class:"logo flex align-center"},hs),o("div",gs,[o("div",ms,[o("button",{onClick:t[1]||(t[1]=(...p)=>s.openList&&s.openList(...p)),class:"btn wide-s"},ks),_s,vs,o("button",{onClick:t[2]||(t[2]=(...p)=>s.onToggleAddBoard&&s.onToggleAddBoard(...p)),class:"btn create-btn"},"Create")]),n.createClicked?(c(),S(r,{key:0,onAddedBoard:s.onToggleAddBoard},null,8,["onAddedBoard"])):g("",!0),n.isShown?(c(),S(l,{key:1,onCloseModal:s.openList,boards:s.boards},null,8,["onCloseModal","boards"])):g("",!0),o("div",bs,[o("div",fs,[ys,Cs,B(o("input",{class:"search-input","onUpdate:modelValue":t[3]||(t[3]=p=>n.searchTxt=p),type:"text",placeholder:"Search"},null,512),[[A,n.searchTxt]])]),Is,o("div",{onClick:t[4]||(t[4]=(...p)=>s.onToggleProfileModal&&s.onToggleProfileModal(...p)),class:"profile-app-header flex",style:I({backgroundImage:`url(${(f=s.loggedInUser)==null?void 0:f.imgUrl})`})},[n.profileModalOpen?(c(),S(u,{key:0,onCloseModal:s.onToggleProfileModal,user:s.loggedInUser},null,8,["onCloseModal","user"])):g("",!0)],4)])])],2)}var ws=_(cs,[["render",$s]]);const Ts={components:{homeHeader:ye,loginHeader:De,appHeader:ws},methods:{},computed:{headerType(){const e=this.$route.fullPath;return e==="/"?"home-header":e==="/auth/login"||e==="/auth/signup"?"login-header":"app-header"}}};function Ds(e,t,a,i,n,s){return c(),S(z(s.headerType))}var Ss=_(Ts,[["render",Ds]]);const Bs={computed:{isReady(){return this.$store.getters.isReady}}},As={key:0,class:"loading-container"},xs=o("span",{class:"loading-gif"},null,-1),Os=[xs];function Ms(e,t,a,i,n,s){return s.isReady?g("",!0):(c(),d("div",As,Os))}var Ns=_(Bs,[["render",Ms]]);const Ps={components:{headerContainer:Ss,loadingGif:Ns},async created(){await this.$store.dispatch("loadUser")},computed:{boards(){return this.$store.getters.boards},isReady(){return this.$store.getters.isReady},isReadyClass(){return{"loading-layout":this.isReady}}}};function Gs(e,t,a,i,n,s){const r=b("header-container"),l=b("router-view"),u=b("loading-gif");return c(),d(y,null,[s.isReady?(c(),S(r,{key:0})):g("",!0),s.isReady?(c(),S(l,{key:1})):g("",!0),w(u)],64)}var Ls=_(Ps,[["render",Gs]]),Us="/assets/hero.f5b958c8.png";const Js={components:{},data(){return{}},methods:{logAsGuest(){console.log("Loggin as guest"),this.$router.push("/board")}},computed:{},unmounted(){}},Rs={class:"home-page main-layout"},Es={class:"hero flex"},Fs={class:"action-call flex"},js=o("h1",{class:"hero-title"},"Twello helps teams move work forward.",-1),Vs=o("p",{class:"hero-p"}," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Twello. ",-1),qs=o("div",{class:"hero-img-container"},[o("img",{class:"hero-img",src:Us,alt:""})],-1);function Hs(e,t,a,i,n,s){return c(),d("section",Rs,[o("div",Es,[o("div",Fs,[js,Vs,o("button",{class:"live-demo-btn btn",onClick:t[0]||(t[0]=(...r)=>s.logAsGuest&&s.logAsGuest(...r))},"Try live demo")]),qs])])}var zs=_(Js,[["render",Hs]]);const Ws={props:{board:{type:Object}},components:{},data(){return{}},created(){},methods:{openBoard(){this.$router.push("/board/"+this.board._id)},async starredToggle(){await this.$store.dispatch({type:"starredBoardToggle",board:this.board})}},computed:{img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""},isStared(){var t;const e=this.$store.getters.loggedInUser;return(t=this.board.starredBy)!=null&&t.includes(e._id)?"starred":""}}},Ks=o("span",null,null,-1),Ys={class:"board-title"};function Qs(e,t,a,i,n,s){return a.board?(c(),d("li",{key:0,class:"board-preview",onClick:t[2]||(t[2]=(...r)=>s.openBoard&&s.openBoard(...r))},[o("div",{class:"board-background",style:I({backgroundImage:`url('${s.img}')`,backgroundColor:`${s.color}`})},[Ks,o("div",Ys,v(a.board.title),1),o("div",{class:D(["flex star-container",s.isStared])},[o("a",{class:"unstarred-icon",onClick:t[0]||(t[0]=k((...r)=>s.starredToggle&&s.starredToggle(...r),["stop"]))}),o("a",{class:"starred-icon",onClick:t[1]||(t[1]=k((...r)=>s.starredToggle&&s.starredToggle(...r),["stop"]))})],2)],4)])):g("",!0)}var Zs=_(Ws,[["render",Qs]]);const Xs={props:{boards:{type:Array}},components:{boardPreview:Zs,addBoard:V,AddBoard:V},data(){return{createMenuOpen:!1}},created(){},methods:{toggleNewBoard(){this.createMenuOpen=!this.createMenuOpen}},computed:{starredBoards(){return this.$store.getters.starredBoards}}},eo={class:"board-list-container"},to=o("div",{class:"flex align"},[o("a",{class:"board-list-strred-icon"}),o("span",null,"Starred boards")],-1),so={class:"board-list clean-list"},oo=o("div",{class:"flex align"},[o("a",{class:"board-list-title-icon"}),o("span",null,"Your boards")],-1),no={class:"board-list clean-list"},ao=o("div",{class:"add-bord-container"},[o("p",null,"Create new board")],-1),ro=[ao];function io(e,t,a,i,n,s){const r=b("add-board"),l=b("board-preview");return c(),d("section",eo,[n.createMenuOpen?(c(),S(r,{key:0,onAddedBoard:s.toggleNewBoard},null,8,["onAddedBoard"])):g("",!0),to,o("ul",so,[(c(!0),d(y,null,C(s.starredBoards,u=>(c(),S(l,{key:u._id,board:u},null,8,["board"]))),128))]),oo,o("ul",no,[(c(!0),d(y,null,C(a.boards,u=>(c(),S(l,{key:u._id,board:u},null,8,["board"]))),128)),o("li",{class:"add-new-board",onClick:t[0]||(t[0]=(...u)=>s.toggleNewBoard&&s.toggleNewBoard(...u))},ro)])])}var lo=_(Xs,[["render",io]]);const co={props:{},components:{},data(){return{}},created(){},methods:{},computed:{}},uo={class:"board-list-side-bar"},ho={class:"clean-list"},go=o("a",{class:"boards-menu-icon"},null,-1),mo=o("span",null,"Boards",-1),po=o("li",null,[o("div",{class:"list-container"},[o("a",{class:"templates-menu-icon"}),o("span",null,"Templates")])],-1),ko=o("a",{class:"Home-menu-icon"},null,-1),_o=o("span",null,"Home",-1);function vo(e,t,a,i,n,s){const r=b("router-link");return c(),d("section",uo,[o("ul",ho,[o("li",null,[w(r,{to:"/board"},{default:M(()=>[go,mo]),_:1})]),po,o("li",null,[w(r,{to:"/",class:"list-container"},{default:M(()=>[ko,_o]),_:1})])])])}var bo=_(co,[["render",vo]]);const fo={components:{boardList:lo,boardListSideBar:bo},async created(){let e=this.$store.getters.loggedInUser;console.log(e),e||(e={username:"guest@ca.com",password:"guest"},await N.login(e),await this.$store.dispatch("loadUser"))},data(){return{}},methods:{},computed:{boards(){return this.$store.getters.boards}},unmounted(){}},yo={key:0,class:"board-app flex"};function Co(e,t,a,i,n,s){const r=b("board-list-side-bar"),l=b("board-list");return s.boards?(c(),d("section",yo,[w(r),w(l,{boards:s.boards},null,8,["boards"])])):g("",!0)}var Io=_(fo,[["render",Co]]);const $o={props:{task:{type:Object}},components:{},data(){return{checklist:{id:"asdasd",title:"todo",items:[{id:"sfdfs",title:"done this",done:!0},{id:"sfdfs",title:"done that",done:!0}]}}},created(){},methods:{openTaskDetails(){this.$router.push(this.$route.fullPath+"/task/"+this.task.id),this.$emit("openTaskDetails")},labelClicked(){this.$emit("labelClicked")},dateChecked(){this.$emit("dateChecked",this.task.id)}},computed:{attachNum(){var e;return(e=this.task.attachments)==null?void 0:e.length},img(){return this.task.cover.backgroundImage},bgColor(){return this.task.cover.backgroundColor},labels(){return this.task.labelIds.map(e=>this.$store.getters.labelById(e))},checkedSum(){return`${this.doneSum}/${this.itemsSum}`},isDone(){return this.itemsSum===this.doneSum?"done":""},itemsSum(){return this.task.checklists.reduce((e,t)=>e+t.items.length,0)},doneSum(){return this.task.checklists.map(t=>t.items.filter(a=>a.isDone)).reduce((t,a)=>t+a.length,0)},isItems(){return this.itemsSum!==0},date(){const e=new Date(this.task.dueDate.startDate),t=new Date(this.task.dueDate.endDate),a=`${e.toLocaleString("en",{month:"short"})} ${e.getDate()}`,i=`${t.toLocaleString("en",{month:"short"})} ${t.getDate()}`;return this.task.dueDate.startDate?`${a}-${i}`:i},taskStatus(){return this.task.dueDate.isDone?"complited":this.task.dueDate.endDate<Date.now()?"overdue":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24?"due-soon":""}}},wo={key:0,class:"flex clean-list"},To=["title"],Do={class:"task-preview-title"},So={class:"actions-container flex"},Bo={class:"first-actions"},Ao=o("a",{class:"date-icon"},null,-1),xo=o("a",{class:"checked-icon"},null,-1),Oo=o("a",{class:"complited-icon"},null,-1),Mo={class:"date"},No={key:1,class:"description-preview"},Po=o("a",{class:"description-icon",title:"This card has a description"},null,-1),Go=[Po],Lo={key:2,class:"attachment-preview"},Uo=o("a",{class:"attachments-icon",title:"attachments"},null,-1),Jo={class:"attach-num"},Ro=o("a",{class:"checklist-icon",title:"Checklist items"},null,-1),Eo={class:"checkedSum"},Fo={key:0,class:"members-preview flex"},jo=["title"];function Vo(e,t,a,i,n,s){var r,l,u,f,p;return a.task?(c(),d("section",{key:0,class:"task-preview",onClick:t[2]||(t[2]=(...h)=>s.openTaskDetails&&s.openTaskDetails(...h))},[((r=a.task.cover)==null?void 0:r.type)==="color"?(c(),d("div",{key:0,class:"task-cover-color",style:I({backgroundColor:`${s.bgColor}`})},null,4)):g("",!0),((l=a.task.cover)==null?void 0:l.type)==="img"?(c(),d("div",{key:1,class:"task-cover-img",style:I({backgroundImage:`${s.img}`})},null,4)):g("",!0),o("main",null,[(u=a.task.labelIds)!=null&&u.length?(c(),d("ul",wo,[(c(!0),d(y,null,C(s.labels,h=>(c(),d("li",{title:h.title,onClick:t[0]||(t[0]=k((...m)=>s.labelClicked&&s.labelClicked(...m),["stop"])),key:h},[o("div",{class:"task-label",style:I({backgroundColor:`${h.color}`})},v(h.title),5)],8,To))),128))])):g("",!0),o("h2",Do,v(a.task.title),1),o("div",So,[o("div",Bo,[a.task.dueDate?(c(),d("div",{key:0,class:D(["date-preview",s.taskStatus]),onClick:t[1]||(t[1]=k((...h)=>s.dateChecked&&s.dateChecked(...h),["stop"]))},[Ao,xo,Oo,o("span",Mo,v(s.date),1)],2)):g("",!0),a.task.description?(c(),d("div",No,Go)):g("",!0),(f=a.task.attachments)!=null&&f.length?(c(),d("div",Lo,[Uo,o("span",Jo,v(s.attachNum),1)])):g("",!0),a.task.checklists&&s.isItems?(c(),d("div",{key:3,class:D(["checklist-preview",s.isDone])},[Ro,o("span",Eo,v(s.checkedSum),1)],2)):g("",!0)]),(p=a.task.members)!=null&&p.length?(c(),d("div",Fo,[(c(!0),d(y,null,C(a.task.members,h=>(c(),d("span",{key:h._id,style:I({backgroundImage:`url(${h.imgUrl})`}),title:h.fullname},null,12,jo))),128))])):g("",!0)])])])):g("",!0)}var qo=_($o,[["render",Vo]]);const Ho={props:{group:{type:Object}},components:{taskPreview:qo,Container:W,Draggable:K},data(){return{addBtnClicked:!1,task:{title:""},isMenueOpen:!1}},created(){},methods:{getTaskPayload(e){return this.group.tasks[e]},onDrop(e){this.$emit("saveTaskDrop",{ev:e,groupId:this.group.id})},async onSaveTitle(e){!e.target.innerText||(this.group.title=e.target.innerText,this.$emit("editGroup",this.group))},openAddForm(){this.addBtnClicked=!this.addBtnClicked,console.log(this.$refs)},async saveTask(){await this.$emit("saveTask",{groupId:this.group.id,task:{title:this.task.title}}),this.task.title="",this.addBtnClicked=!this.addBtnClicked},openTaskDetails(){this.$emit("openTaskDetails",this.group.id)},removeGroup(){this.$emit("removeGroup",this.group.id)},labelClicked(){this.$emit("labelClicked")},toggleDeleteMenue(){this.isMenueOpen=!this.isMenueOpen},dateChecked(e){this.$emit("dateChecked",e,this.group.id)}},computed:{}},zo={key:0,class:"board-group"},Wo={class:"group-header"},Ko=o("a",{class:"dots-icon"},null,-1),Yo=[Ko],Qo={key:0,class:"remove-list-modal"},Zo={class:"remove-list-header"},Xo=o("span",null,"List actions",-1),en={key:0,class:"tasks-container"},tn=o("a",{class:"add-card-icon"},null,-1),sn=T(" Add a card "),on=[tn,sn],nn={key:2,class:"add-card-container"},an=o("button",{class:"save-new-card-btn"}," Add card ",-1);function rn(e,t,a,i,n,s){var p;const r=b("task-preview"),l=b("Draggable"),u=b("Container"),f=R("focus");return a.group?(c(),d("section",zo,[o("div",Wo,[o("h1",{onBlur:t[0]||(t[0]=(...h)=>s.onSaveTitle&&s.onSaveTitle(...h)),class:"group-title",contenteditable:"",spellcheck:"false"},v(a.group.title),33),o("button",{class:"group-menu",onClick:t[1]||(t[1]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))},Yo),n.isMenueOpen?(c(),d("div",Qo,[o("div",{class:"screen-toggle",onClick:t[2]||(t[2]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))}),o("div",Zo,[Xo,o("a",{class:"close-icon",onClick:t[3]||(t[3]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))})]),o("div",{class:"delete-item",onClick:t[4]||(t[4]=(...h)=>s.removeGroup&&s.removeGroup(...h))},"Archive this list")])):g("",!0)]),(p=a.group.tasks)!=null&&p.length?(c(),d("div",en,[w(u,{"drag-class":"on-dragging","get-child-payload":h=>s.getTaskPayload(h),"group-name":"group",onDrop:s.onDrop,orientation:"vertical",class:"clean-list group-list"},{default:M(()=>[(c(!0),d(y,null,C(a.group.tasks,h=>(c(),S(l,{key:h.id},{default:M(()=>[w(r,{onOpenTaskDetails:s.openTaskDetails,onLabelClicked:s.labelClicked,task:h,onDateChecked:s.dateChecked},null,8,["onOpenTaskDetails","onLabelClicked","task","onDateChecked"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])])):g("",!0),n.addBtnClicked?(c(),d("div",nn,[o("form",{onSubmit:t[8]||(t[8]=k((...h)=>s.saveTask&&s.saveTask(...h),["prevent"]))},[B(o("textarea",{ref:"taskTitle","onUpdate:modelValue":t[6]||(t[6]=h=>n.task.title=h),"resize:none":"",placeholder:"Enter a title for this card..."},null,512),[[f],[A,n.task.title]]),o("div",null,[an,o("a",{class:"close-add-btn",onClick:t[7]||(t[7]=h=>n.addBtnClicked=!n.addBtnClicked)})])],32)])):(c(),d("button",{key:1,onClick:t[5]||(t[5]=(...h)=>s.openAddForm&&s.openAddForm(...h)),class:"add-card-btn"},on))])):g("",!0)}var ln=_(Ho,[["render",rn]]);const cn={emits:["closeModal"],data(){return{filterBy:{txt:""}}},methods:{onCloseFilter(){this.$emit("closeModal")}}},dn={class:"board-filter-modal"},un={class:"header flex align-center"},hn=o("span",{class:"title"},"Filter",-1),gn={class:"body"},mn=o("p",{class:"input-title"},"Keyword",-1),pn=o("p",{class:"input-desc"},"Search cards, members, labels, and more.",-1);function kn(e,t,a,i,n,s){return c(),d("div",dn,[o("div",un,[hn,o("button",{onClick:t[0]||(t[0]=(...r)=>s.onCloseFilter&&s.onCloseFilter(...r)),class:"close-filter-board-icon"})]),o("div",gn,[o("form",null,[mn,B(o("input",{class:"filter-input","onUpdate:modelValue":t[1]||(t[1]=r=>n.filterBy.txt=r),placeholder:"Enter a Keyword...",type:"text"},null,512),[[A,n.filterBy.txt]]),pn])])])}var _n=_(cn,[["render",kn]]);const vn={components:{},created(){},data(){return{getBy:"",users:[],chosenUser:{}}},methods:{onSetMember(e){this.chosenUser=e},onAddMember(){this.$store.dispatch({type:"addMember",user:this.chosenUser})},onClosePopup(){this.$emit("closePopup")},async getUsers(){this.users=await L.getUsersBy(this.getBy)},isChosen(e){return this.chosenUser._id===e._id}},computed:{},unmounted(){}},bn={class:"header"},fn=o("span",null,"Invite to board",-1),yn={class:"body"},Cn=o("button",{class:"send-invite"},"Send invitation",-1),In={key:0,class:"user-list clean-list"},$n=["onClick"],wn={key:0,class:"check-icon"};function Tn(e,t,a,i,n,s){var r;return c(),d("section",{onClick:t[4]||(t[4]=k(()=>{},["stop"])),class:"invite-modal"},[o("div",bn,[fn,o("div",{onClick:t[0]||(t[0]=(...l)=>s.onClosePopup&&s.onClosePopup(...l)),class:"icon"})]),o("div",yn,[o("form",{onSubmit:t[3]||(t[3]=k((...l)=>s.onAddMember&&s.onAddMember(...l),["prevent"]))},[B(o("input",{onInput:t[1]||(t[1]=(...l)=>s.getUsers&&s.getUsers(...l)),"onUpdate:modelValue":t[2]||(t[2]=l=>n.getBy=l),type:"text",placeholder:"Email address or name"},null,544),[[A,n.getBy]]),Cn],32),(r=n.users)!=null&&r.length?(c(),d("ul",In,[(c(!0),d(y,null,C(n.users,l=>(c(),d("li",{onClick:u=>s.onSetMember(l),class:"user-preview"},[o("div",{class:"icon",style:I({backgroundImage:`url(${l==null?void 0:l.imgUrl})`})},null,4),T(" "+v(l.fullname)+" ",1),s.isChosen(l)?(c(),d("div",wn)):g("",!0)],8,$n))),256))])):g("",!0)])])}var Dn=_(vn,[["render",Tn]]);const Sn={components:{boardFilterModal:_n,inviteModal:Dn},props:{board:Object},emits:["openMenu"],data(){return{isFilterOpen:!1,inviteModalOpen:!1}},methods:{async onSaveBoardName(e){this.board.title=e.target.innerText,this.$store.dispatch({type:"saveBoard",boardToSave:this.board})},onOpenMenu(){this.$emit("openMenu")},onOpenFilter(){this.isFilterOpen=!this.isFilterOpen},onToggleInviteModal(){this.inviteModalOpen=!this.inviteModalOpen},onToggleBoardStar(){this.$store.dispatch({type:"starredBoardToggle",board:this.board})}},computed:{isStarred(){var t;const e=this.$store.getters.loggedInUser;return{starred:(t=this.board.starredBy)==null?void 0:t.includes(e._id)}}}},Bn={class:"board-header flex space-between align-center"},An={class:"board-nav flex"},xn=o("button",{class:"board-btn btn"},[o("span",{class:"svg-icon board-icon"}),T(" Board ")],-1),On={class:"invited-users flex"},Mn=o("span",{class:"invite"},null,-1),Nn=T(" Invite "),Pn={class:"board-action"},Gn=o("span",null,[o("span",{class:"svg-icon filter"}),T(" Filter ")],-1),Ln=[Gn],Un=o("span",{class:"dots"},null,-1),Jn=T("Show menu "),Rn=[Un,Jn];function En(e,t,a,i,n,s){const r=b("invite-modal"),l=b("board-filter-modal");return c(),d(y,null,[o("header",Bn,[o("div",An,[xn,o("div",{class:"board-name flex",onBlur:t[0]||(t[0]=(...u)=>s.onSaveBoardName&&s.onSaveBoardName(...u)),contenteditable:""},v(a.board.title),33),o("button",{class:D(["star-btn btn",s.isStarred]),onClick:t[1]||(t[1]=(...u)=>s.onToggleBoardStar&&s.onToggleBoardStar(...u))},null,2),o("div",On,[(c(!0),d(y,null,C(a.board.members,u=>(c(),d("span",{key:u._id,style:I({backgroundImage:`url(${u.imgUrl})`})},null,4))),128))]),o("button",{onClick:t[2]||(t[2]=(...u)=>s.onToggleInviteModal&&s.onToggleInviteModal(...u)),class:"invite-btn btn"},[Mn,Nn,n.inviteModalOpen?(c(),S(r,{key:0,onClosePopup:s.onToggleInviteModal},null,8,["onClosePopup"])):g("",!0)])]),o("div",Pn,[o("button",{onClick:t[3]||(t[3]=(...u)=>s.onOpenFilter&&s.onOpenFilter(...u)),class:"filter-btn btn"},Ln),o("button",{onClick:t[4]||(t[4]=(...u)=>s.onOpenMenu&&s.onOpenMenu(...u)),class:"right-nav-btn btn"},Rn)])]),n.isFilterOpen?(c(),S(l,{key:0,onCloseModal:s.onOpenFilter},null,8,["onCloseModal"])):g("",!0)],64)}var Fn=_(Sn,[["render",En]]);const jn={data(){return{results:null,searchTxt:""}},async created(){const e=await P.queryPhotos();this.results=e.results},methods:{async searchPhotos(){const e=await P.queryPhotos(this.searchTxt);this.results=e.results},setBackGroundImg(e){this.$emit("setBackGroundImg",e)},closeImgMenu(){this.$emit("closeImgMenu")},goBack(){this.$emit("goBack")}}},Vn={class:"right-menu background-img-menu"},qn={class:"flex space-between"},Hn=o("h1",null,[T("Photos by "),o("span",null,[o("a",{target:"_blank",href:"https://unsplash.com/"},"Unsplah")])],-1),zn=o("hr",null,null,-1),Wn=o("button",null,"Search",-1),Kn={class:"clean-list flex unsplash-imgs-results"},Yn=["onClick"],Qn=["href"];function Zn(e,t,a,i,n,s){return c(),d("section",Vn,[o("header",qn,[o("a",{onClick:t[0]||(t[0]=(...r)=>s.goBack&&s.goBack(...r)),class:"back-menu-icon"}),Hn,o("a",{class:"close-menu-icon",onClick:t[1]||(t[1]=(...r)=>s.closeImgMenu&&s.closeImgMenu(...r))})]),zn,o("form",{class:"search-bg-img-form",onSubmit:t[3]||(t[3]=k((...r)=>s.searchPhotos&&s.searchPhotos(...r),["prevent"]))},[B(o("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>n.searchTxt=r),type:"search"},null,512),[[A,n.searchTxt]]),Wn],32),o("ul",Kn,[(c(!0),d(y,null,C(n.results,r=>(c(),d("li",{key:r.id},[o("div",{class:"right-menu-unsplash-img",onClick:l=>s.setBackGroundImg(r.urls.full),style:I({backgroundImage:`url(${r.urls.thumb})`})},[o("a",{class:"right-menu-unsplash-title",target:"_blank",href:r.user.links.html},v(r.user.first_name),9,Qn)],12,Yn)]))),128))])])}var Xn=_(jn,[["render",Zn]]);const ea={data(){return{colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"]}},async created(){},methods:{async searchPhotos(){const e=await imgService.queryPhotos(this.searchTxt);this.results=e.results},goBack(){this.$emit("goBack")},setBackGroundColor(e){this.$emit("setBackGroundColor",e)},closeColorMenu(){this.$emit("closeColorMenu")}}},ta={class:"right-menu background-color-menu"},sa={class:"flex space-between"},oa=o("h1",null,"Colors",-1),na=o("hr",null,null,-1),aa={class:"clean-list flex right-menu-colors-list"},ra=["onClick"];function ia(e,t,a,i,n,s){return c(),d("section",ta,[o("header",sa,[o("a",{onClick:t[0]||(t[0]=(...r)=>s.goBack&&s.goBack(...r)),class:"back-menu-icon"}),oa,o("a",{class:"close-menu-icon",onClick:t[1]||(t[1]=(...r)=>s.closeColorMenu&&s.closeColorMenu(...r))})]),na,o("ul",aa,[(c(!0),d(y,null,C(n.colors,r=>(c(),d("li",{key:r},[o("div",{class:"right-menu-colors",onClick:l=>s.setBackGroundColor(r),style:I({backgroundColor:r})},null,12,ra)]))),128))])])}var la=_(ea,[["render",ia]]);const ca={components:{backgroundImgMenu:Xn,backgroundColorMenu:la},data(){return{showImgClicked:!1,showColorClicked:!1}},async created(){},methods:{toggleImgMenu(){this.showImgClicked=!this.showImgClicked},toggleColorMenu(){this.showColorClicked=!this.showColorClicked},closeImgMenu(){this.showImgClicked=!this.showImgClicked,this.$emit("closeBgMenu")},closeColorMenu(){this.showColorClicked=!this.showColorClicked,this.$emit("closeBgMenu")},closeBgMenu(){this.$emit("closeBgMenu")},goBack(){this.$emit("goBack")},setBackGroundImg(e){this.$emit("setBackGroundImg",e)},setBackGroundColor(e){this.$emit("setBackGroundColor",e)}},computed:{isImgOpen(){return this.showImgClicked?"open":""},isColorOpen(){return this.showColorClicked?"open":""}}},da={class:"right-menu background-menu"},ua={class:"flex space-between"},ha=o("h1",null,"Change background",-1),ga=o("hr",null,null,-1),ma={class:"bg-menu-main"},pa={class:"clean-list flex"},ka=o("div",{class:"bg-menu-imgs bg-photos-img"},null,-1),_a=o("div",{class:"bg-menu-imgs-title"},"photos",-1),va=[ka,_a],ba=o("div",{class:"bg-menu-imgs bg-colors-img"},null,-1),fa=o("div",{class:"bg-menu-imgs-title"},"Colors",-1),ya=[ba,fa];function Ca(e,t,a,i,n,s){const r=b("background-img-menu"),l=b("background-color-menu");return c(),d("section",da,[o("header",ua,[o("a",{onClick:t[0]||(t[0]=(...u)=>s.goBack&&s.goBack(...u)),class:"back-menu-icon"}),ha,o("a",{class:"close-menu-icon",onClick:t[1]||(t[1]=(...u)=>s.closeBgMenu&&s.closeBgMenu(...u))})]),ga,o("main",ma,[o("ul",pa,[o("li",{onClick:t[2]||(t[2]=(...u)=>s.toggleImgMenu&&s.toggleImgMenu(...u))},va),o("li",{onClick:t[3]||(t[3]=(...u)=>s.toggleColorMenu&&s.toggleColorMenu(...u))},ya)])]),w(r,{onCloseImgMenu:s.closeImgMenu,onGoBack:s.toggleImgMenu,onSetBackGroundImg:s.setBackGroundImg,class:D(s.isImgOpen)},null,8,["onCloseImgMenu","onGoBack","onSetBackGroundImg","class"]),w(l,{onCloseColorMenu:s.closeColorMenu,onSetBackGroundColor:s.setBackGroundColor,onGoBack:s.toggleColorMenu,class:D(s.isColorOpen)},null,8,["onCloseColorMenu","onSetBackGroundColor","onGoBack","class"])])}var Ia=_(ca,[["render",Ca]]);const $a={components:{backgroundMenu:Ia},data(){return{showMenuClicked:!1}},methods:{toggleMenu(){this.showMenuClicked=!this.showMenuClicked},closeMainMenu(){this.$emit("closeMenu")},closeBgMenu(){this.showMenuClicked=!this.showMenuClicked,this.$emit("closeMenu")},setBackGroundImg(e){this.$emit("setBackGroundImg",e)},setBackGroundColor(e){this.$emit("setBackGroundColor",e)},getActivityTxt(e){return q.getActivityTxt(e,"board")}},computed:{isOpen(){return this.showMenuClicked?"open":""},board(){return this.$store.getters.board},img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""}}},wa={class:"right-menu right-side-nav"},Ta={class:"flex space-between"},Da=o("h1",null,"Menu",-1),Sa=o("hr",null,null,-1),Ba={class:"clean-list main-menu-list"},Aa=o("li",{class:"flex main-list-item"},[o("div",{class:"board-icon"},[o("a",{class:"about-board-icon"})]),o("span",null,"About this board")],-1),xa=o("span",null,"Change background",-1),Oa=o("li",{class:"flex main-list-item"},[o("div",{class:"board-icon"},[o("a",{class:"dashboard-icon"})]),o("span",null,"Dashboard")],-1),Ma=o("hr",null,null,-1),Na={class:"flex activity-list-item"},Pa=o("div",{class:"board-icon"},[o("a",{class:"activity-board-icon"})],-1),Ga=o("span",{class:"board-activity-title"},"Activity",-1);function La(e,t,a,i,n,s){const r=b("background-menu");return c(),d("section",wa,[o("header",Ta,[Da,o("a",{class:"close-menu-icon",onClick:t[0]||(t[0]=(...l)=>s.closeMainMenu&&s.closeMainMenu(...l))})]),Sa,o("ul",Ba,[Aa,o("li",{onClick:t[1]||(t[1]=(...l)=>s.toggleMenu&&s.toggleMenu(...l)),class:"flex background-list-item"},[o("div",{class:"board-icon-img",style:I({backgroundImage:`url('${s.img}')`,backgroundColor:`${s.color}`})},null,4),xa]),Oa,Ma,o("li",Na,[Pa,Ga,o("ul",null,[(c(!0),d(y,null,C(s.board.activities,l=>(c(),d("li",{key:l.id},v(s.getActivityTxt(l)),1))),128))])])]),w(r,{onCloseBgMenu:s.closeBgMenu,onGoBack:s.toggleMenu,onSetBackGroundImg:s.setBackGroundImg,onSetBackGroundColor:s.setBackGroundColor,class:D(s.isOpen)},null,8,["onCloseBgMenu","onGoBack","onSetBackGroundImg","onSetBackGroundColor","class"])])}var Ua=_($a,[["render",La]]);const Ja="",U=Ra();window.socketService=U;U.setup();function Ra(){var e=null;return{async setup(){e=se(Ja)},on(a,i){e.on(a,i)},off(a,i=null){!e||(i?e.off(a,i):e.removeAllListeners(a))},emit(a,i){console.log(a),console.log(i),e.emit(a,i)},terminate(){e=null}}}const Ea={components:{boardGroup:ln,boardHeader:Fn,rightNav:Ua,Container:W,Draggable:K},data(){return{addBtnClicked:!1,group:{title:""},currOpenTaskGroupId:null,showMenuClicked:!1,isLabelClicked:!1}},created(){},methods:{saveTaskDrop({ev:e,groupId:t}){if(e.removedIndex!==null){const a=JSON.parse(JSON.stringify(this.board));a.groups.find(n=>n.id===t).tasks.splice(e.removedIndex,1),this.$store.dispatch({type:"saveBoard",boardToSave:a})}e.addedIndex!==null&&setTimeout(()=>{const a=JSON.parse(JSON.stringify(this.board));a.groups.find(n=>n.id===t).tasks.splice(e.addedIndex,0,e.payload),this.$store.dispatch({type:"saveBoard",boardToSave:a})},500)},async onDrop({removedIndex:e,addedIndex:t}){this.$store.dispatch({type:"saveGroupDrop",fromIdx:e,toIdx:t})},async saveTask({groupId:e,task:t}){await this.$store.dispatch({type:"saveTask",taskToSave:t,groupId:e,activity:"Add a new card"})},async addGroup(){this.group.title.trim()!==""&&(await this.$store.dispatch({type:"saveGroup",groupToSave:{title:this.group.title},activity:"Add a new group"}),this.group.title="",this.addBtnClicked=!this.addBtnClicked)},async saveGroup(e){await this.$store.dispatch({type:"saveGroup",groupToSave:e,activity:"edit a group"})},openTaskDetails(e){this.currOpenTaskGroupId=e},async removeGroup(e){await this.$store.dispatch({type:"removeGroup",groupId:e,activity:"Remove group"})},toggleMenu(){this.showMenuClicked=!this.showMenuClicked},async setBackGroundImg(e){await this.$store.dispatch({type:"setBackGroundImg",imgUrl:e,activity:"Change background image"})},async setBackGroundColor(e){await this.$store.dispatch({type:"setBackGroundColor",color:e,activity:"Change background color"})},labelClicked(){this.isLabelClicked=!this.isLabelClicked},async dateChecked(e,t){await this.$store.dispatch({type:"toggleTaskDone",taskId:e,groupId:t,payload:e})}},computed:{boardId(){return this.$route.params.boardId},board(){return this.$store.getters.board},img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""},isOpen(){return this.showMenuClicked?"open":""},dragClass(){return{}},shownLabels(){return this.isLabelClicked?"show-title":"hide-title"}},watch:{boardId:{handler(){const{boardId:e}=this.$route.params;U.setup(),U.emit("watch-board",e),U.on("board-update",t=>{this.$store.dispatch({type:"saveBoard",boardToSave:t,isFromSocket:!0})}),this.$store.commit({type:"setBoard",boardId:e})},immediate:!0}}},Fa=o("span",null,"+",-1),ja=T(" Add another list "),Va=[Fa,ja],qa={key:1,class:"add-group-container"},Ha=o("button",{class:"save-new-list-btn"},"Add list",-1);function za(e,t,a,i,n,s){const r=b("board-header"),l=b("board-group"),u=b("Draggable"),f=b("Container"),p=b("router-view"),h=b("right-nav"),m=R("focus");return s.board?(c(),d("section",{key:0,class:"board-details",style:I({backgroundImage:`url(${s.img})`,backgroundColor:`${s.color}`})},[w(r,{onOpenMenu:s.toggleMenu,board:s.board},null,8,["onOpenMenu","board"]),o("main",{class:D(["main-board",s.shownLabels])},[w(f,{"drag-class":"on-dragging",onDrop:s.onDrop,orientation:"horizontal",class:"flex clean-list"},{default:M(()=>[(c(!0),d(y,null,C(s.board.groups,O=>(c(),S(u,{key:O.id},{default:M(()=>[w(l,{onSaveTaskDrop:s.saveTaskDrop,class:"draggable-item",group:O,onEditGroup:s.saveGroup,onSaveTask:s.saveTask,onOpenTaskDetails:s.openTaskDetails,onRemoveGroup:s.removeGroup,onLabelClicked:s.labelClicked,onDateChecked:s.dateChecked},null,8,["onSaveTaskDrop","group","onEditGroup","onSaveTask","onOpenTaskDetails","onRemoveGroup","onLabelClicked","onDateChecked"])]),_:2},1024))),128)),n.addBtnClicked?(c(),d("div",qa,[o("form",{onSubmit:t[3]||(t[3]=k((...O)=>s.addGroup&&s.addGroup(...O),["prevent"])),class:"add-group-form"},[B(o("textarea",{"onUpdate:modelValue":t[1]||(t[1]=O=>n.group.title=O),"resize:none":"",placeholder:"Enter list title..."},null,512),[[m],[A,n.group.title]]),Ha,o("span",{class:"close-add-btn",onClick:t[2]||(t[2]=O=>n.addBtnClicked=!n.addBtnClicked)})],32)])):(c(),d("button",{key:0,onClick:t[0]||(t[0]=O=>n.addBtnClicked=!n.addBtnClicked),class:"add-group-btn"},Va))]),_:1},8,["onDrop"]),w(p,{groupId:n.currOpenTaskGroupId},null,8,["groupId"]),w(h,{class:D(s.isOpen),onCloseMenu:s.toggleMenu,onSetBackGroundImg:s.setBackGroundImg,onSetBackGroundColor:s.setBackGroundColor},null,8,["class","onCloseMenu","onSetBackGroundImg","onSetBackGroundColor"])],2)],4)):g("",!0)}var Wa=_(Ea,[["render",za]]);const Ka={props:{item:Object},data(){return{openDeleteMenu:!1}},methods:{toggleIsDone(e){this.$emit("toggleIsDone",e)},onSaveItemTitle(e,t){!t.target.innerText||(e.title=t.target.innerText,this.$emit("onSaveItemTitle",e))},toggleDeleteMenue(){this.openDeleteMenu=!this.openDeleteMenu},removeItem(e){this.$emit("removeItem",e)}}},Ya=o("a",{class:"checked-icon"},null,-1),Qa=[Ya],Za={class:"remove-modal-container"},Xa={class:"dots-icon-container"},er={key:0,class:"remove-item-modal"},tr={class:"remove-item-header"},sr=o("span",null,"Item actions",-1);function or(e,t,a,i,n,s){return c(),d(y,null,[a.item?(c(),d("div",{key:0,class:"checklist-checkbox",onClick:t[0]||(t[0]=r=>s.toggleIsDone(a.item.id))},Qa)):g("",!0),o("div",{onBlur:t[1]||(t[1]=r=>s.onSaveItemTitle(a.item,r)),class:"item-title",contenteditable:"",spellcheck:"false"},v(a.item.title),33),o("div",Za,[o("span",Xa,[o("a",{class:"dots-icon",onClick:t[2]||(t[2]=(...r)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...r))})]),n.openDeleteMenu?(c(),d("div",er,[o("div",{class:"screen-toggle",onClick:t[3]||(t[3]=(...r)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...r))}),o("div",tr,[sr,o("a",{class:"close-icon",onClick:t[4]||(t[4]=(...r)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...r))})]),o("div",{class:"delete-item",onClick:t[5]||(t[5]=r=>s.removeItem(a.item.id))},"Delete")])):g("",!0)])],64)}var nr=_(Ka,[["render",or]]);const ar={props:{checklist:Object,isAddItemsOpen1:Boolean},components:{checklistItemPreview:nr},created(){},data(){return{checklistItemTitle:"",isAddItemsOpen:!1}},methods:{addChecklistItem(e){this.$emit("addChecklistItem",e,this.checklistItemTitle),this.checklistItemTitle=""},toggleIsDone(e){this.$emit("toggleIsDone",this.checklist.id,e)},isItemDone(e){return e.isDone?"done":""},toglleAddItems(){this.isAddItemsOpen=!this.isAddItemsOpen},removeChecklist(e){this.$emit("removeChecklist",e)},async onSaveChecklistTitle(e){e.target.innerText.trim()!==""&&(this.checklist.title=e.target.innerText,this.$emit("editChecklist",this.checklist))},async onSaveItemTitle(e){this.$emit("editChecklistItem",e,this.checklist.id)},removeChecklistItem(e){this.$emit("removeChecklistItem",this.checklist.id,e)}},computed:{donePercentage(){const e=this.checklist.items.length,a=this.checklist.items.filter(n=>n.isDone).length;return`${Math.floor(a*100/e)||0}%`},isComplited(){return this.donePercentage==="100%"?"done":""}}},rr={key:0,class:"checklist-header"},ir={class:"checklist-header-title flex"},lr=o("div",{class:"checklist-icon"},null,-1),cr={class:"progress-bar-container"},dr={class:"progress-percentage"},ur={class:"progress-bar"},hr={class:"background-bar"},gr={key:1,class:"add-checklist-item-form"},mr={class:"flex"};function pr(e,t,a,i,n,s){const r=b("checklist-item-preview"),l=R("focus");return c(),d(y,null,[a.checklist?(c(),d("div",rr,[o("div",ir,[lr,o("h3",{onBlur:t[0]||(t[0]=(...u)=>s.onSaveChecklistTitle&&s.onSaveChecklistTitle(...u)),class:"checklist-title",contenteditable:"",spellcheck:"false"},v(a.checklist.title),33)]),o("button",{class:"delete-checklist",onClick:t[1]||(t[1]=u=>s.removeChecklist(a.checklist.id))}," Delete ")])):g("",!0),o("div",cr,[o("div",null,[o("span",dr,v(s.donePercentage),1)]),o("div",ur,[o("div",hr,[o("div",{class:D(["front-bar",s.isComplited]),style:I({width:s.donePercentage})},null,6)])])]),(c(!0),d(y,null,C(a.checklist.items,u=>(c(),d("div",{class:D(["checklist-items",s.isItemDone(u)]),key:u.id},[w(r,{item:u,onToggleIsDone:s.toggleIsDone,onOnSaveItemTitle:s.onSaveItemTitle,onRemoveItem:s.removeChecklistItem},null,8,["item","onToggleIsDone","onOnSaveItemTitle","onRemoveItem"])],2))),128)),n.isAddItemsOpen?(c(),d("div",gr,[B(o("input",{class:"add-checklist-item-input",type:"text",placeholder:"Add an item","onUpdate:modelValue":t[2]||(t[2]=u=>n.checklistItemTitle=u)},null,512),[[l],[A,n.checklistItemTitle]]),o("div",mr,[o("button",{onClick:t[3]||(t[3]=u=>s.addChecklistItem(a.checklist.id)),class:"add-checklist-item-btn"}," Add"),o("a",{class:"close-checklist-icon",onClick:t[4]||(t[4]=(...u)=>s.toglleAddItems&&s.toglleAddItems(...u))})])])):(c(),d("button",{key:2,class:"open-add-item-btn",onClick:t[5]||(t[5]=(...u)=>s.toglleAddItems&&s.toglleAddItems(...u))}," Add an item "))],64)}var kr=_(ar,[["render",pr]]);const _r={emits:["action"],methods:{onArchive(){this.$emit("action",{cbName:"archiveTask"})}}},vr=o("span",null,"Are you sure?",-1),br=o("button",{class:"deny"},"No",-1);function fr(e,t,a,i,n,s){return c(),d("div",{onClick:t[1]||(t[1]=k(()=>{},["stop"])),class:"archive btn"},[vr,o("button",{onClick:t[0]||(t[0]=(...r)=>s.onArchive&&s.onArchive(...r)),class:"confirm"},"Yes"),br])}var yr=_(_r,[["render",fr]]);const Cr={emits:["action"],components:{},created(){},data(){return{filterBy:""}},methods:{onAddMember(e){this.$emit("action",{cbName:"addMemberToTask",payload:e})}},computed:{filteredMembers(){return this.$store.getters.filteredMembers(this.filterBy)}},unmounted(){}},Ir={class:"members-list clean-list"},$r=["onClick"];function wr(e,t,a,i,n,s){return c(),d("div",{onClick:t[5]||(t[5]=k(()=>{},["stop"])),class:"members-action"},[B(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>n.filterBy=r),placeholder:"Search members"},null,512),[[A,n.filterBy]]),o("ul",Ir,[(c(!0),d(y,null,C(s.filteredMembers,r=>(c(),d("li",{key:r._id,class:"user-preview",onClick:l=>s.onAddMember(r)},[o("div",{onMouseout:t[1]||(t[1]=k(()=>{},["stop"])),onMouseover:t[2]||(t[2]=k(()=>{},["stop"])),class:"icon",style:I({backgroundImage:`url(${r.imgUrl})`})},null,36),o("span",{onMouseout:t[3]||(t[3]=k(()=>{},["stop"])),onMouseover:t[4]||(t[4]=k(()=>{},["stop"]))},v(r.fullname),33)],8,$r))),128))])])}var Tr=_(Cr,[["render",wr]]);const Dr={emits:["action"],methods:{async onUploadImg(e){const t=await P.uploadImgFromComp(e);this.$emit("action",{cbName:"uploadAttachment",payload:t.url})}}},Sr={class:"clean-list body"},Br=o("span",null,"Computer",-1);function Ar(e,t,a,i,n,s){return c(),d("div",{onClick:t[3]||(t[3]=k(()=>{},["stop"])),class:"attach btn"},[o("ul",Sr,[o("li",null,[o("label",{onClick:t[2]||(t[2]=k(()=>{},["stop"])),for:"file",class:"computer"},[Br,o("input",{id:"file",type:"file",onChange:t[0]||(t[0]=k((...r)=>s.onUploadImg&&s.onUploadImg(...r),["stop"])),onClick:t[1]||(t[1]=k(()=>{},["stop"]))},null,32)])])])])}var xr=_(Dr,[["render",Ar]]);const Or={props:{task:Object},emits:["action"],components:{},created(){},data(){return{createLabelOpen:!1,clrOpts:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563"],newLabel:{title:"",color:"red"}}},methods:{onLabel(e){this.$emit("action",{cbName:"toggleLabel",payload:e})},setNewLabelClr(e){this.newLabel.color=e},saveNewLabel(){this.$emit("action",{cbName:"saveNewLabel",payload:JSON.parse(JSON.stringify(this.newLabel))}),this.newLabel={title:"",color:""}},toggleCreateLabel(){this.createLabelOpen=!this.createLabelOpen},isChosen(e){return this.task.labelIds?this.task.labelIds.includes(e):!1}},computed:{labels(){return this.$store.getters.labels}},unmounted(){}},Mr={class:"header"},Nr={key:0,class:"labels-title"},Pr={key:1,class:"create-label-header-container"},Gr=o("span",null,"Create label",-1),Lr={class:"body label-list-container"},Ur={key:0,class:"clean-list"},Jr=["onClick"],Rr={key:0,class:"selected-icon"},Er={key:1,class:"create-label-container"},Fr={for:""},jr=T(" Name "),Vr={class:"clean-list clr-opts"},qr=["onClick"],Hr={key:0,class:"selected-icon"};function zr(e,t,a,i,n,s){const r=R("focus");return c(),d("div",{onClick:t[4]||(t[4]=k(()=>{},["stop"])),class:"label btn"},[o("div",Mr,[n.createLabelOpen?(c(),d("div",Pr,[o("button",{onClick:t[0]||(t[0]=(...l)=>s.toggleCreateLabel&&s.toggleCreateLabel(...l)),class:"back"}),Gr])):(c(),d("span",Nr,"Labels"))]),o("div",Lr,[n.createLabelOpen?(c(),d("div",Er,[o("label",Fr,[jr,B(o("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.newLabel.title=l),type:"text",class:"new-label-title"},null,512),[[A,n.newLabel.title],[r]])]),o("ul",Vr,[(c(!0),d(y,null,C(n.clrOpts,l=>(c(),d("li",{key:l,onClick:u=>s.setNewLabelClr(l),class:"clr-opt",style:I({backgroundColor:l})},[n.newLabel.color===l?(c(),d("div",Hr)):g("",!0)],12,qr))),128))]),o("button",{onClick:t[3]||(t[3]=(...l)=>s.saveNewLabel&&s.saveNewLabel(...l)),class:"create-label-btn btn"},"Create")])):(c(),d("ul",Ur,[(c(!0),d(y,null,C(s.labels,l=>(c(),d("li",{onClick:u=>s.onLabel(l.id),class:"label-list-item flex",key:l,style:I({backgroundColor:l.color})},[T(v(l.title)+" ",1),s.isChosen(l.id)?(c(),d("a",Rr)):g("",!0)],12,Jr))),128)),o("button",{class:"btn create-new-label",onClick:t[1]||(t[1]=(...l)=>s.toggleCreateLabel&&s.toggleCreateLabel(...l))},"Create a new label")]))])])}var Wr=_(Or,[["render",zr]]);const Kr={emits:["action"],components:{},created(){},data(){return{title:"Checklist"}},methods:{addChecklist(){this.title.trim()!==""&&(this.$emit("togglePopup"),this.$emit("addChecklist"),this.$emit("action",{cbName:"addChecklist",payload:this.title}))}},computed:{},unmounted(){}},Yr=T(" Title "),Qr=o("button",{class:"add-checklist-btn"},"Add",-1);function Zr(e,t,a,i,n,s){const r=R("focus");return c(),d("section",{onClick:t[2]||(t[2]=k(()=>{},["stop"])),class:"checklist-container"},[o("form",{onSubmit:t[1]||(t[1]=k((...l)=>s.addChecklist&&s.addChecklist(...l),["prevent"])),class:"checklist-form flex"},[o("label",null,[Yr,B(o("input",{type:"text",class:"checklist-title-input","onUpdate:modelValue":t[0]||(t[0]=l=>n.title=l)},null,512),[[r],[A,n.title]])]),Qr],32)])}var Xr=_(Kr,[["render",Zr]]);const ei={emits:["action","togglePopup"],data(){return{date:{value:[]}}},mounted(){this.date.value=[new Date,new Date]},methods:{onSave(){this.$emit("action",{cbName:"setTaskDueDate",payload:this.date}),this.$emit("togglePopup")},onRemove(){this.$emit("action",{cbName:"removeTaskDueDate"}),this.$emit("togglePopup")}},computed:{startDate(){const e=J(this.date[0]);return`${e.date()}/${e.month()+1}/${e.year()}`},endDate(){const e=J(this.date[1]);return`${e.date()}/${e.month()+1}/${e.year()}`}},unmounted(){}},ti={class:"flex"},si={class:"start-date"},oi=o("p",{class:"lable"},"Start date",-1),ni={class:"date"},ai={class:"due-date"},ri=o("p",{class:"lable"},"Due date",-1),ii={class:"date"},li={class:"buttons"};function ci(e,t,a,i,n,s){const r=b("Datepicker");return c(),d("div",{onClick:t[3]||(t[3]=k(()=>{},["stop"])),class:"dates-container"},[w(r,{modelValue:n.date,"onUpdate:modelValue":t[0]||(t[0]=l=>n.date=l),partialRange:!1,inline:"",range:"",autoApply:""},null,8,["modelValue"]),o("div",ti,[o("div",si,[oi,o("p",ni,v(s.startDate),1)]),o("div",ai,[ri,o("p",ii,v(s.endDate),1)])]),o("div",li,[o("button",{class:"dates-btn btn",onClick:t[1]||(t[1]=(...l)=>s.onSave&&s.onSave(...l))},"Save"),o("button",{class:"dates-btn btn",onClick:t[2]||(t[2]=(...l)=>s.onRemove&&s.onRemove(...l))},"Remove")])])}var di=_(ei,[["render",ci]]);const ui={emits:["onAction"],components:{},created(){},data(){return{actionPopupOpen:!1}},methods:{onLocation(){},toggleActionPopup(){this.actionPopupOpen=!this.actionPopupOpen}},computed:{},unmounted(){}},hi=o("div",{class:"icon"},null,-1),gi=o("button",{class:"location"},"Location",-1),mi=[hi,gi];function pi(e,t,a,i,n,s){return c(),d("div",{onClick:t[0]||(t[0]=(...r)=>s.toggleActionPopup&&s.toggleActionPopup(...r)),class:"location btn"},mi)}var ki=_(ui,[["render",pi]]);const _i={props:{task:Object},emits:["action","actions","togglePopup"],async created(){const e=await P.queryPhotos();e.results.splice(6,e.results.length),this.unsplashPhotos=e.results},data(){return{colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"],unsplashPhotos:[]}},methods:{onToggleCoverColor(e){var t,a;if(((a=(t=this.task)==null?void 0:t.cover)==null?void 0:a.backgroundColor)===e)return this.onRemoveCover();this.$emit("action",{cbName:"chooseCover",payload:{type:"color",style:e}})},onToggleCoverImg(e){var t,a;if(((a=(t=this.task)==null?void 0:t.cover)==null?void 0:a.backgroundImage)===`url(${e})`)return this.onRemoveCover();this.$emit("action",{cbName:"chooseCover",payload:{type:"img",style:e}})},onRemoveCover(){this.$emit("action",{cbName:"removeCover"})},async onUploadImg(e){const t=await P.uploadImgFromComp(e),a=[{cbName:"uploadAttachment",payload:t.url},{cbName:"chooseCover",payload:{type:"img",style:t.url}}];this.$emit("actions",a)},toggleActionPopup(){this.$emit("togglePopup")},isChosenColor(e){var t;return{chosen:((t=this.task.cover)==null?void 0:t.backgroundColor)===e}},isChosenImg(e){var t;return{chosen:((t=this.task.cover)==null?void 0:t.backgroundImage)===`url(${e})`}}},unmounted(){}},vi={class:"body"},bi={class:"cover-clrs-container"},fi=o("span",null,"Colors",-1),yi={class:"clean-list cover-clrs"},Ci=["onClick"],Ii={class:"attachments-container"},$i=o("span",null,"Attachments",-1),wi=T(" Upload a cover image "),Ti={class:"unsplash-photos-container"},Di=o("span",null,"Photos from Unsplash",-1),Si={key:0,class:"clean-list imgs-container"},Bi=["onClick"];function Ai(e,t,a,i,n,s){return c(),d("div",{onClick:t[4]||(t[4]=k(()=>{},["stop"])),class:"cover-action btn"},[o("div",vi,[a.task.cover?(c(),d("div",{key:0,onClick:t[0]||(t[0]=k((...r)=>s.onRemoveCover&&s.onRemoveCover(...r),["stop"])),class:"remove-cover"},"Remove cover")):g("",!0),o("div",bi,[fi,o("ul",yi,[(c(!0),d(y,null,C(n.colors,r=>(c(),d("li",{onClick:l=>s.onToggleCoverColor(r),class:D(["cover-clr",s.isChosenColor(r)]),key:r,style:I({backgroundColor:r})},null,14,Ci))),128))])]),o("div",Ii,[$i,o("button",{onClick:t[3]||(t[3]=k(()=>{},["stop"])),for:"file",class:"btn upload-cover-img"},[wi,o("input",{id:"file",type:"file",onChange:t[1]||(t[1]=k((...r)=>s.onUploadImg&&s.onUploadImg(...r),["stop"])),onClick:t[2]||(t[2]=k(()=>{},["stop"]))},null,32)])]),o("div",Ti,[Di,n.unsplashPhotos&&n.unsplashPhotos.length?(c(),d("ul",Si,[(c(!0),d(y,null,C(n.unsplashPhotos,r=>(c(),d("li",{onClick:k(l=>s.onToggleCoverImg(r.urls.full),["stop"]),class:D(["img-container",s.isChosenImg(r.urls.full)]),style:I({backgroundImage:`url(${r.urls.thumb})`})},null,14,Bi))),256))])):g("",!0)])])])}var xi=_(_i,[["render",Ai]]);const Oi={emits:["togglePopup","action"],props:{action:String,task:Object},components:{archiveAction:yr,membersAction:Tr,attachmentAction:xr,labelAction:Wr,checklistAction:Xr,datesAction:di,coverAction:xi,locationAction:ki},created(){console.log(this.task)},data(){return{}},methods:{onTogglePopup(){this.$emit("togglePopup")},onAction(e){this.$emit("action",e)},onActions(e){this.$emit("actions",e)},addChecklist(){this.$emit("addChecklist")}},computed:{actionTxt(){let e=this.action.substring(0,this.action.indexOf("-"));return e==="attachment"?"Attach From":e}},unmounted(){}},Mi={class:"header"};function Ni(e,t,a,i,n,s){return c(),d("div",{onClick:t[1]||(t[1]=k(()=>{},["stop"])),class:"action-popup"},[o("div",Mi,[T(v(s.actionTxt)+" ",1),o("div",{onClick:t[0]||(t[0]=(...r)=>s.onTogglePopup&&s.onTogglePopup(...r)),class:"icon btn close-popup"})]),a.action?(c(),S(z(a.action),{key:0,onTogglePopup:s.onTogglePopup,onAction:s.onAction,onAddChecklist:s.addChecklist,task:a.task},null,8,["onTogglePopup","onAction","onAddChecklist","task"])):g("",!0)])}var Pi=_(Oi,[["render",Ni]]);const Gi={emits:["openActionPopup"],props:{action:String},methods:{openActionPopup(){this.$emit("openActionPopup",this.action)}},computed:{actionTxt(){return this.action.substring(0,this.action.indexOf("-"))},actionClass(){return this.action==="cover-action"?this.action:this.actionTxt}}},Li=o("div",{class:"icon"},null,-1);function Ui(e,t,a,i,n,s){return c(),d("div",{onClick:t[0]||(t[0]=(...r)=>s.openActionPopup&&s.openActionPopup(...r)),class:D(["btn btn-action",s.actionClass])},[Li,o("span",null,v(s.actionTxt),1)],2)}var Ji=_(Gi,[["render",Ui]]);const Ri={props:{groupId:String},components:{actionPopup:Pi,actionBtn:Ji,checklistDetails:kr},data(){return{task:null,descEditOpen:!1,newDesc:"",localGroupId:null,groupName:"",actionCmps:["members-action","label-action","checklist-action","dates-action","attachment-action","location-action","cover-action","archive-action"],currOpenAction:"",isAddItemsOpen:!1}},watch:{taskId:{async handler(){var e;try{if(!((e=this.$route.params)!=null&&e.taskId))return;const t=this.$route.params.taskId,a=await this.$store.dispatch({type:"getGroupByTask",taskId:t});this.localGroupId=a.id,this.groupName=a.title,this.task=await this.$store.dispatch({type:"getTaskById",taskId:t,groupId:this.groupId||this.localGroupId})}catch(t){console.log(t)}},immediate:!0}},methods:{toggleAction(e){this.currOpenAction=this.currOpenAction?"":e},async saveTask(e){return e=JSON.parse(JSON.stringify(e)),this.$store.dispatch({type:"saveTask",taskToSave:e,groupId:this.groupId||this.localGroupId})},async onRemoveAttachment(e){const t=this.task.attachments.findIndex(a=>a.id===e);this.task.attachments.splice(t,1),this.task.cover&&delete this.task.cover,this.saveTask(this.task)},async onAction({cbName:e,payload:t=null}){if(await this.$store.dispatch({type:e,taskId:this.task.id,groupId:this.localGroupId,payload:t}),e==="archiveTask")return this.onCloseDetails();const a=this.$route.params.taskId;this.task=await this.$store.dispatch({type:"getTaskById",taskId:a,groupId:this.groupId||this.localGroupId})},async onActions(e){await this.$store.dispatch({type:e[0].cbName,taskId:this.task.id,groupId:this.localGroupId,payload:e[0].payload}),await this.$store.dispatch({type:e[1].cbName,taskId:this.task.id,groupId:this.localGroupId,payload:e[1].payload});const t=this.$route.params.taskId;this.task=await this.$store.dispatch({type:"getTaskById",taskId:t,groupId:this.groupId||this.localGroupId})},async onSaveTitle(e){this.task.title=e.target.innerText,await this.saveTask(this.task)},async onSaveDesc(){this.task.description=this.newDesc,await this.saveTask(this.task),this.toggleDescEdit()},onMakeCover(e){this.onAction({cbName:"chooseCover",payload:{type:"img",style:e}})},onCloseDetails(){const e=this.$route.fullPath,t=e.substring(0,e.indexOf("/task"));this.$router.push(t)},toggleDescEdit(){this.newDesc=this.task.description,this.descEditOpen=!this.descEditOpen},setPopupMode(e){this.isActionPopupOpen=e},getLabelById(e){return this.$store.getters.labelById(e)},getTime(e){return J(+e).fromNow()},addChecklistItem(e,t){this.onAction({cbName:"addChecklistItem",payload:{checklistId:e,title:t}})},toggleIsDone(e,t){this.onAction({cbName:"toggleIsDone",payload:{checklistId:e,itemId:t}})},isItemDone(e){return e.isDone?"done":""},addChecklist(){},removeChecklist(e){this.onAction({cbName:"removeChecklist",payload:e})},editChecklist(e){this.onAction({cbName:"editChecklist",payload:e})},editChecklistItem(e,t){this.onAction({cbName:"editChecklistItem",payload:{itemToSave:e,checklistId:t}})},removeChecklistItem(e,t){this.onAction({cbName:"removeChecklistItem",payload:{checklistId:e,itemId:t}})},toggleTaskDone(e){console.log(e),this.onAction({cbName:"toggleTaskDone",payload:{taskId:e}})},getActivityTxt(e){return q.getActivityTxt(e,"card")}},computed:{taskId(){return this.$route.params.taskId},descTxt(){return"description"in this.task&&this.task.description?this.task.description:"Add a more detailed description..."},isFull(){return{empty:this.task.description}},open(){return{open:this.isActionPopupOpen}},timeString(){var e=J(this.task.dueDate.endDate).toLocaleString();return e=e.substring(0,e.length-9),e},taskStatus(){return this.task.dueDate.isDone?"complete":this.task.dueDate.endDate<Date.now()?"overdue":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24?"due soon":""},statusColor(){return{overDue:this.task.dueDate.endDate<Date.now(),"due-soon":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24,"task-done":this.task.dueDate.isDone}},checkboxDone(){return{done:this.task.dueDate.isDone}},taskActivities(){return this.$store.getters.activitiesByTask(this.$route.params.taskId)}},unmounted(){}},Ei={class:"task-details-header"},Fi=o("div",{class:"icon"},null,-1),ji={class:"title-container"},Vi={class:"group-txt"},qi=T(" in list: "),Hi={class:"main-details"},zi={class:"main-content"},Wi={class:"top-actions-container task-layout"},Ki={class:"members-container"},Yi=o("small",null,"Members:",-1),Qi={class:"members"},Zi={key:0,class:"labels-container"},Xi=o("small",null,"Labels",-1),el={class:"labels-list"},tl={key:1,class:"due-date-container"},sl=o("small",null,"Due date",-1),ol=o("span",{class:"checked-icon"},null,-1),nl=[ol],al={class:"due-date"},rl={class:"date"},il={class:"description-container"},ll=o("div",{class:"description-header"},[o("div",{class:"icon"}),o("h3",null,"Description")],-1),cl={class:"desc-actions"},dl=o("button",{class:"save-new-list-btn"},"Save",-1),ul={key:0,class:"attachments-container"},hl=o("div",{class:"attachments-header"},[o("div",{class:"icon"}),o("h3",null,"Attachments")],-1),gl={class:"img-container"},ml=["src"],pl={class:"attachment-details"},kl={class:"name"},_l=o("a",{class:"attachment-name-icon"},null,-1),vl={class:"attachment-actions"},bl=["onClick"],fl={class:"attacment-make-cover"},yl=o("a",{class:"make-cover-icon"},null,-1),Cl=["onClick"],Il={class:"activities-container"},$l=o("div",{class:"activities-header"},[o("div",null,[o("div",{class:"icon"}),o("h3",null,"Activity")]),o("button",{class:"btn show"},"Show details")],-1),wl={class:"activities-list"},Tl={class:"activity-item"},Dl={class:"actions"},Sl=o("h3",{class:"actions-title"},"Add to card",-1),Bl=o("div",{class:"placeholder"},null,-1);function Al(e,t,a,i,n,s){var p,h;const r=b("action-popup"),l=b("action-btn"),u=b("checklist-details"),f=R("focus");return n.task?(c(),d("div",{key:0,onClick:t[10]||(t[10]=k((...m)=>s.onCloseDetails&&s.onCloseDetails(...m),["stop"])),class:"task-details-container"},[n.currOpenAction?(c(),S(r,{key:0,onAction:s.onAction,onActions:s.onActions,onTogglePopup:s.toggleAction,onAddChecklist:s.addChecklist,action:n.currOpenAction,task:n.task},null,8,["onAction","onActions","onTogglePopup","onAddChecklist","action","task"])):g("",!0),n.task?(c(),d("section",{key:1,onClick:t[8]||(t[8]=k(()=>{},["stop"])),class:D(["task-details",{"cover-open":n.task.cover}])},[n.task.cover?(c(),d("div",{key:0,style:I(n.task.cover),class:"cover"},[w(l,{onOpenActionPopup:s.toggleAction,action:"cover-action"},null,8,["onOpenActionPopup"])],4)):g("",!0),o("header",Ei,[Fi,o("div",ji,[o("h2",{onBlur:t[0]||(t[0]=(...m)=>s.onSaveTitle&&s.onSaveTitle(...m)),class:"title",contenteditable:"",spellcheck:"false"},v(n.task.title),33),o("div",Vi,[qi,o("span",null,v(n.groupName),1)])])]),o("main",Hi,[o("section",zi,[o("div",Wi,[o("div",Ki,[Yi,o("ul",Qi,[(c(!0),d(y,null,C(n.task.members,m=>(c(),d("li",{class:"member",style:I({backgroundImage:`url(${m.imgUrl})`})},null,4))),256)),o("li",{onClick:t[1]||(t[1]=k(m=>s.toggleAction("members-action"),["stop"])),class:"member add icon"})])]),(p=n.task.labelIds)!=null&&p.length?(c(),d("section",Zi,[Xi,o("ul",el,[(c(!0),d(y,null,C(n.task.labelIds,m=>(c(),d("li",{class:"label",key:m,style:I({backgroundColor:s.getLabelById(m).color})},v(s.getLabelById(m).title),5))),128))])])):g("",!0),(h=n.task.dueDate)!=null&&h.endDate?(c(),d("div",tl,[sl,o("div",{class:D([s.checkboxDone,"date-display flex align-center"])},[o("div",{onClick:t[2]||(t[2]=m=>s.toggleTaskDone(n.task.id)),class:"dueDate-checkbox"},nl),o("div",al,[o("span",rl,v(s.timeString),1),o("span",{class:D([s.statusColor,"mini-status"])},v(s.taskStatus),3)])],2)])):g("",!0)]),o("div",il,[ll,n.descEditOpen?(c(),d("form",{key:1,class:"description-edit-form task-layout",onSubmit:t[6]||(t[6]=k((...m)=>s.onSaveDesc&&s.onSaveDesc(...m),["prevent"]))},[B(o("textarea",{class:"description-edit","onUpdate:modelValue":t[4]||(t[4]=m=>n.newDesc=m),placeholder:"Add a more detailed description..."},null,512),[[f],[A,n.newDesc]]),o("div",cl,[dl,o("button",{onClick:t[5]||(t[5]=k((...m)=>s.toggleDescEdit&&s.toggleDescEdit(...m),["stop"])),class:"icon close"})])],32)):(c(),d("div",{key:0,onClick:t[3]||(t[3]=k((...m)=>s.toggleDescEdit&&s.toggleDescEdit(...m),["stop"])),class:D(["description task-layout",s.isFull])},[o("span",null,v(s.descTxt),1)],2))]),n.task.attachments&&n.task.attachments.length?(c(),d("div",ul,[hl,(c(!0),d(y,null,C(n.task.attachments,m=>(c(),d("div",{class:"attachment-thumbnail task-layout",key:m.id},[o("div",gl,[o("img",{src:m.url,alt:""},null,8,ml)]),o("div",pl,[o("span",kl,[T(v(m.name)+" ",1),_l]),o("div",vl,[o("span",null,"Added "+v(s.getTime(m.createdAt))+" -",1),o("small",{class:"attacment-delete",onClick:O=>s.onRemoveAttachment(m.id)},"Delete",8,bl),o("div",fl,[yl,o("span",{class:"attacment-cover-title",onClick:O=>s.onMakeCover(m.url)},"Make cover",8,Cl)])])])]))),128))])):g("",!0),(c(!0),d(y,null,C(n.task.checklists,m=>(c(),d("div",{class:"checklist-container",key:m.id},[w(u,{checklist:m,isAddItemsOpen1:n.isAddItemsOpen,onAddChecklistItem:s.addChecklistItem,onToggleIsDone:s.toggleIsDone,onRemoveChecklist:s.removeChecklist,onEditChecklist:s.editChecklist,onEditChecklistItem:s.editChecklistItem,onRemoveChecklistItem:s.removeChecklistItem},null,8,["checklist","isAddItemsOpen1","onAddChecklistItem","onToggleIsDone","onRemoveChecklist","onEditChecklist","onEditChecklistItem","onRemoveChecklistItem"])]))),128)),o("div",Il,[$l,o("ul",wl,[(c(!0),d(y,null,C(s.taskActivities,m=>(c(),d("li",Tl,v(s.getActivityTxt(m)),1))),256))])])]),o("aside",Dl,[Sl,Bl,(c(!0),d(y,null,C(n.actionCmps,m=>(c(),S(l,{onOpenActionPopup:s.toggleAction,key:m,action:m},null,8,["onOpenActionPopup","action"]))),128))])]),o("button",{onClick:t[7]||(t[7]=(...m)=>s.onCloseDetails&&s.onCloseDetails(...m)),class:"btn close icon"})],2)):g("",!0),n.currOpenAction?(c(),d("div",{key:2,onClick:t[9]||(t[9]=k((...m)=>s.toggleAction&&s.toggleAction(...m),["stop"])),class:"clickable-background"})):g("",!0)])):g("",!0)}var xl=_(Ri,[["render",Al]]),Ol=[{path:"/board",name:"board-app",component:Io},{path:"/board/:boardId",name:"board-details",component:Wa,children:[{path:"task/:taskId",name:"task-details",component:xl}]}];const Ml={components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}};function Nl(e,t,a,i,n,s){return c(),d("section",null,"This is a user profile")}var Pl=_(Ml,[["render",Nl]]);const Gl={components:{},created(){},data(){return{user:{username:"",password:"",fullname:""},Vue3GoogleOauth:oe("Vue3GoogleOauth")}},methods:{onUserAction(){if(this.currAction==="login")return this.login();this.signup()},onUserGoogleAction(){if(this.currAction==="login")return this.loginWithGoogle();this.signupWithGoogle()},async loginWithGoogle(){try{const e=await this.$gAuth.signIn(),t={fullname:e.Du.tf,username:e.Du.tv};e&&await N.loginWithGoogle(t),this.$router.push("/board")}catch(e){console.log(e)}},async signupWithGoogle(){try{const e=await this.$gAuth.signIn();console.log(e);const t={fullname:e.Du.tf,username:e.Du.tv,imgUrl:e.Du.eN};e&&await N.signupWithGoogle(t),this.$router.push("/board")}catch(e){console.log(e)}},async login(){try{await N.login(this.user),await this.$store.dispatch("loadUser"),this.$router.push("/board")}catch(e){console.log(e)}},async logout(){try{await N.logout(),this.$store.dispatch("loadUser")}catch(e){console.log(e)}},async signup(){try{await N.signup(this.user),this.$store.dispatch("loadUser"),this.$router.push("/board")}catch(e){console.log(e)}}},computed:{currAction(){return this.$route.params.action},currActionTxt(){return this.currAction==="login"?"Log in":"Sign up"}},unmounted(){}},Ll={class:"auth-form-container"},Ul={class:"title"},Jl=o("div",{class:"action-options-seperator"},"OR",-1),Rl=o("div",{class:"icon"},null,-1),El=o("span",null,"Continue with Google",-1),Fl=[Rl,El];function jl(e,t,a,i,n,s){return c(),d("section",{class:D(["auth-actions-container",s.currAction])},[o("div",Ll,[o("h1",Ul,v(s.currActionTxt)+" to Twello",1),o("form",{class:"auth-input-form",onSubmit:t[3]||(t[3]=k((...r)=>s.onUserAction&&s.onUserAction(...r),["prevent","stop"]))},[B(o("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>n.user.username=r),type:"email",class:"username",placeholder:"Enter your email",required:""},null,512),[[A,n.user.username]]),B(o("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>n.user.password=r),type:"password",class:"password",placeholder:"Enter your password",required:""},null,512),[[A,n.user.password]]),s.currAction==="signup"?B((c(),d("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=r=>n.user.fullname=r),type:"text",class:"fullname",placeholder:"Enter full name",required:""},null,512)),[[A,n.user.fullname]]):g("",!0),o("button",null,v(s.currActionTxt),1)],32),Jl,o("button",{onClick:t[4]||(t[4]=(...r)=>s.onUserGoogleAction&&s.onUserGoogleAction(...r)),class:"google-action"},Fl)])],2)}var Vl=_(Gl,[["render",jl]]),ql=[{path:"/auth/:action",name:"login",component:Vl},{path:"/user/:username",name:"user-profile",component:Pl}];const Hl=ne({history:ae(),routes:[{path:"/",name:"home",component:zs},...Ol,...ql]});var zl={state:{boards:[],board:{}},getters:{boards({boards:e}){return JSON.parse(JSON.stringify(e))},board({board:e}){return JSON.parse(JSON.stringify(e))},labels({board:e}){return JSON.parse(JSON.stringify(e.labels))},labelById:({board:e})=>t=>JSON.parse(JSON.stringify(e.labels.find(a=>a.id===t))),filteredMembers:({board:e})=>t=>{const a=new RegExp(t);return JSON.parse(JSON.stringify(e.members.filter(i=>a.test(i.username)||a.test(i.fullname))))},starredBoards(e,t,a){return JSON.parse(JSON.stringify(e.boards.filter(i=>{var n;return(n=i.starredBy)==null?void 0:n.includes(a.userModule.loggedInUser._id)})))},activitiesByTask:e=>t=>JSON.parse(JSON.stringify(e.board.activities.filter(a=>a.ids.taskId===t)))},mutations:{setBoards(e,{boards:t}){e.boards=t},saveBoard(e,{savedBoard:t}){const a=e.boards.findIndex(i=>i._id===t._id);a!==-1?e.boards.splice(a,1,t):e.boards.unshift(t)},setBoard(e,{boardId:t}){const a=e.boards.find(i=>i._id===t);if(!a)return console.log("Couldnt find board");e.board=a},removeGroup(e,{groupId:t}){const a=e.board.groups.findIndex(i=>i.id===t);e.board.groups.splice(a,1)}},actions:{async loadBoards({commit:e,rootState:t}){try{const a=await $.query({user:t.userModule.loggedInUser});e({type:"setBoards",boards:a})}catch(a){console.log(a)}},async saveBoard({commit:e},{boardToSave:t,isFromSocket:a=!1}){try{const i=await $.save(t);console.log(i),e({type:"saveBoard",savedBoard:i}),e({type:"setBoard",boardId:t._id}),a||U.emit("board-updated",i)}catch(i){console.log(i)}},async updateBoard({commit:e},{boardToUpdate:t}){},getTaskById({state:e},{taskId:t,groupId:a}){let n=e.board.groups.find(s=>s.id===a).tasks.find(s=>s.id===t);return n=JSON.parse(JSON.stringify(n)),n.groupId=a,n},async saveTask({state:e,dispatch:t,commit:a},{taskToSave:i,groupId:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board));let l=await $.saveTask(r,i,n);console.log(l),l=await q.add({board:l.board,type:"added",itemName:i.title,containerName:l.groupTitle,ids:{boardId:r._id,groupId:n,taskId:i.id}}),await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async saveGroup({state:e,dispatch:t},{groupToSave:a,activity:i}){try{const n=JSON.parse(JSON.stringify(e.board)),s=$.saveGroup(n,a);await t({type:"saveBoard",boardToSave:s})}catch(n){console.log(n)}},async removeGroup({state:e,dispatch:t,commit:a},{groupId:i,activity:n}){try{const s=JSON.parse(JSON.stringify(e.board)),r=$.removeGroup(s,i,n);await t({type:"saveBoard",boardToSave:r})}catch(s){console.log(s)}},async archiveTask({state:e,dispatch:t,commit:a},{taskId:i,groupId:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.archiveTask(r,i,n,s);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async setTaskDueDate({state:e,dispatch:t,commit:a},{taskId:i,groupId:n,payload:s,activity:r}){try{const l=JSON.parse(JSON.stringify(e.board)),u=await $.saveTaskDueDate(l,i,n,s,r);await t({type:"saveBoard",boardToSave:u})}catch(l){console.log(l)}},async removeTaskDueDate({state:e,dispatch:t,commit:a},{taskId:i,groupId:n}){try{const s=JSON.parse(JSON.stringify(e.board)),r=await $.removeTaskDueDate(s,i,n);await t({type:"saveBoard",boardToSave:r})}catch(s){console.log(s)}},async toggleTaskDone({state:e,dispatch:t,commit:a},{taskId:i,groupId:n,payload:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.toggleTaskDone(r,i,n,s);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async uploadAttachment({state:e,dispatch:t,commit:a},{taskId:i,groupId:n,payload:s,activity:r}){try{const l=JSON.parse(JSON.stringify(e.board)),u=await $.saveAttachment(l,i,n,s,r);await t({type:"saveBoard",boardToSave:u})}catch(l){console.log(l)}},async setBackGroundImg({state:e,dispatch:t},{imgUrl:a,activity:i}){try{const n=JSON.parse(JSON.stringify(e.board));n.style.color="",n.style.imgUrl=a,await t({type:"saveBoard",boardToSave:n})}catch(n){console.log(n)}},async setBackGroundColor({state:e,dispatch:t},{color:a,activity:i}){try{const n=JSON.parse(JSON.stringify(e.board));n.style.imgUrl="",n.style.color=a,await t({type:"saveBoard",boardToSave:n})}catch(n){console.log(n)}},async saveGroupDrop({state:e,dispatch:t,commit:a},{fromIdx:i,toIdx:n}){try{const s=JSON.parse(JSON.stringify(e.board)),r=await $.saveGroupDrop(s,i,n);await t({type:"saveBoard",boardToSave:r})}catch(s){console.log(s)}},async getGroupByTask({state:e},{taskId:t}){return e.board.groups.find(a=>a.tasks.find(i=>i.id===t))},async chooseCover({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.saveCover(r,a,i,n,s);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async toggleLabel({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{console.log(a,i,n);const r=JSON.parse(JSON.stringify(e.board)),l=await $.toggleLabel(r,a,i,n,s);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async saveNewLabel({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.saveNewLabel(r,n,s);await t({type:"saveBoard",boardToSave:l.boardToSave}),await t({type:"toggleLabel",taskId:a,groupId:i,payload:l.id})}catch(r){console.log(r)}},async removeCover({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.removeCover(r,a,i,s);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async addChecklist({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.addChecklist(r,a,i,n,s);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async addChecklistItem({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.addChecklistItem(r,a,i,n,s);console.log(l),await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async toggleIsDone({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),p=r.groups.find(h=>h.id===i).tasks.find(h=>h.id===a).checklists.find(h=>h.id===n.checklistId).items.find(h=>h.id===n.itemId);p.isDone=!p.isDone,await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async removeChecklist({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),u=r.groups.find(p=>p.id===i).tasks.find(p=>p.id===a),f=u.checklists.findIndex(p=>p.id===n);u.checklists.splice(f,1),await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async editChecklist({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),u=r.groups.find(p=>p.id===i).tasks.find(p=>p.id===a),f=u.checklists.findIndex(p=>p.id===n.id);u.checklists.splice(f,1,n),await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async editChecklistItem({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),f=r.groups.find(h=>h.id===i).tasks.find(h=>h.id===a).checklists.find(h=>h.id===n.checklistId),p=f.items.findIndex(h=>h.id===n.itemToSave.id);f.items.splice(p,1,n.itemToSave),await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async addMember({state:e,dispatch:t},{user:a}){try{const i=JSON.parse(JSON.stringify(e.board)),n=await $.addMember(i,a);console.log(n),await t({type:"saveBoard",boardToSave:n})}catch(i){console.log(i)}},async removeChecklistItem({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{console.log(n);const r=JSON.parse(JSON.stringify(e.board)),f=r.groups.find(h=>h.id===i).tasks.find(h=>h.id===a).checklists.find(h=>h.id===n.checklistId),p=f.items.findIndex(h=>h.id===n.itemId);f.items.splice(p,1),await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async addMemberToTask({state:e,dispatch:t},{taskId:a,groupId:i,payload:n,activity:s}){try{const r=JSON.parse(JSON.stringify(e.board)),l=await $.addMemberToTask(r,a,i,n);await t({type:"saveBoard",boardToSave:l})}catch(r){console.log(r)}},async starredBoardToggle({dispatch:e,rootState:t},{board:a}){try{const i=t.userModule.loggedInUser._id,n=await $.starredBoardToggle(a,i);await e({type:"saveBoard",boardToSave:n})}catch(i){console.log(i)}}}},Wl={state:{loggedInUser:""},getters:{loggedInUser({loggedInUser:e}){return e}},mutations:{setLoggedInUser(e,{user:t}){e.loggedInUser=t}},actions:{async loadUser({commit:e,dispatch:t}){e({type:"setIsReady",isReady:!1}),setTimeout(async()=>{const a=L.getLoggedInUser();e({type:"setLoggedInUser",user:a}),await t("loadBoards"),e({type:"setIsReady",isReady:!0})},1e3)}}};const Kl=re({strict:!0,state:{isReady:!1},getters:{isReady({isReady:e}){return e}},mutations:{setIsReady(e,{isReady:t}){e.isReady=t}},actions:{},modules:{boardModule:zl,userModule:Wl}}),Yl={mounted:e=>{e.focus()}},Ql={bind:function(e,{expression:t},{context:a}){e.clickOutside=({clientX:i,clientY:n})=>{var{left:s,top:r,width:l,height:u}=e.getBoundingCLientRect();i>s&&i<s+l&&n>r&&n<r+u||a[t]()},setTimeout(()=>{document.addEventListener("click",e.clickOutside)},0)},unbind:e=>{document.removeEventListener("click",e.clickOutside)}};const Zl="1085095174420-s26dkcaicaiubfjpebgqjpb3dopricv9.apps.googleusercontent.com";ie(Ls).use(Kl).use(Hl).use(le,{clientId:Zl,scope:"email",prompt:"consent"}).directive("focus",Yl).directive("close",Ql).component("Datepicker",ce).mount("#app");
