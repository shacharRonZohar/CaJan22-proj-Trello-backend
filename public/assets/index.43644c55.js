import{r as b,o as c,c as d,a as o,b as w,w as O,d as T,F as y,e as C,n as I,t as v,f as Z,g as q,h as X,i as L,j as B,v as x,k,l as S,m as g,p as D,q as ee,s as H,C as z,D as W,u as U,x as te,y as se,z as oe,A as ne,B as ae,E as re,G as ie,U as le}from"./vendor.aab19eef.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};ce();var _=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r};const de={},ue={class:"main-header home-header flex space-between align-center"},he=o("div",{class:"logo flex align-center"},[o("span",{class:"logo-icon"}),o("span",{class:"logo-txt"},"Twello")],-1),ge={class:"home-nav"},me={class:"clean-list flex"},pe={class:"login-btn"},ke=T("Log in"),_e={class:"signup-btn"},ve=T("Sign up");function be(t,e){const r=b("router-link");return c(),d("header",ue,[he,o("nav",null,[o("div",ge,[o("ul",me,[o("li",null,[o("button",pe,[w(r,{to:"/auth/login",class:"login-link"},{default:O(()=>[ke]),_:1})])]),o("li",null,[o("button",_e,[w(r,{to:"/auth/signup",class:"signup-board"},{default:O(()=>[ve]),_:1})])])])])])])}var fe=_(de,[["render",be]]);const ye={},Ce={class:"main-header login-logout-header"},Ie=o("div",{class:"logo flex align-center"},[o("span",{class:"logo-img"}),o("span",{class:"logo-txt"},"Twello")],-1),$e=[Ie];function we(t,e){return c(),d("header",Ce,$e)}var Te=_(ye,[["render",we]]);const De={props:{boards:Array},emits:["closeModal"],created(){},methods:{goToBoard(t){this.$router.push(`/board/${t._id}`),this.onClose()},onClose(){this.$emit("closeModal")},img(t){var e;return`url(${((e=t.style)==null?void 0:e.imgUrl)||""})`}},computed:{}},Se={class:"header-board-list"},Be={class:"header flex space-between align-center"},xe=o("span",{class:"title"},"Boards",-1),Ae=o("a",{class:"close-board-list-icon"},null,-1),Me=[Ae],Oe={class:"board-list clean-list"},Ne=["onClick"];function Pe(t,e,r,i,n,s){return c(),d("div",Se,[o("div",Be,[xe,o("button",{class:"close-btn btn",onClick:e[0]||(e[0]=(...a)=>s.onClose&&s.onClose(...a))},Me)]),o("ul",Oe,[(c(!0),d(y,null,C(r.boards,a=>(c(),d("li",{class:"board flex align-center",onClick:l=>s.goToBoard(a),key:a._id},[o("div",{class:"mini-pic",style:I({backgroundImage:s.img(a)})},null,4),o("span",null,v(a.title),1)],8,Ne))),128))])])}var Ge=_(De,[["render",Pe]]);const J={makeId:Le,makeExtId:Ue,getRandomInt:Je,getRandomColor:Re,resetLocalStorage:Ee,save:Fe,load:je};function Le(t="",e=13){let r=t;const i="0123456789";for(let n=0;n<e;n++)r+=i.charAt(Math.floor(Math.random()*i.length));return r}function Ue(t=13){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function Je(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}function Re(){const t="0123456789ABCDEF";let e="#";for(let r=0;r<6;r++)e+=t[Math.floor(Math.random()*16)];return e}function Ee(){localStorage.clear(),sessionStorage.clear(),window.location.reload()}function Fe(t,e){localStorage.setItem(t,JSON.stringify(e))}function je(t){return JSON.parse(localStorage.getItem(t))||null}const Ve=Z({accessKey:"LM4Rpq3DaqATHDr2uryLi9FbEwE5CJhRJR6qRGc5Nu0"}),P={uploadImgFromComp:ze,queryPhotos:qe,getImgColor:He};async function qe(t="nature"){try{return(await Ve.search.getPhotos({query:t,orientation:"landscape"})).response}catch(e){throw console.log("Couldnt get photos from unsplash",e),e}}async function He(t){return(await new X().getColorAsync(t)).hex}async function ze(t){const e="twello",i="https://api.cloudinary.com/v1_1/twello/image/upload",n=new FormData;n.append("file",t.target.files[0]),n.append("upload_preset",e);try{return(await q.post(i,n)).data}catch(s){throw console.log(s),s}}const We="/api/";var Ke=q.create({withCredentials:!0});const A={get(t,e){return F(t,"GET",e)},post(t,e){return F(t,"POST",e)},put(t,e){return F(t,"PUT",e)},delete(t,e){return F(t,"DELETE",e)}};async function F(t,e="GET",r=null){try{return(await Ke({url:`${We}${t}`,method:e,data:r,params:e==="GET"?r:null})).data}catch(i){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data: ${r}`),console.dir(i),i.response&&i.response.status===401&&window.location.assign("/login"),i}}function Ye(t){const e=sessionStorage.getItem(t);return e?JSON.parse(e):null}function Qe(t,e){sessionStorage[t]=JSON.stringify(e)}const K={load:Ye,save:Qe},Y="userLocDB",Q="user",R={save:Ze,getLoggedInUser:Xe,getByUsername:et,getUsersBy:tt};function Ze(t){return K.save(Y,t)}function Xe(){return K.load(Y)}async function et(t){return await A.get(`${Q}/member/${t}`)}async function tt(t){return await A.get(`${Q}/by/${t}`)}const $={query:st,save:ot,remove:nt,saveTask:rt,saveGroup:lt,removeGroup:at,archiveTask:it,saveAttachment:gt,saveGroupDrop:ct,saveCover:kt,toggleLabel:_t,saveNewLabel:vt,removeCover:bt,getEmptyBoard:It,addChecklist:mt,addChecklistItem:pt,addMember:ft,saveTaskDueDate:dt,removeTaskDueDate:ut,toggleTaskDone:ht,addMemberToTask:yt,starredBoardToggle:Ct},j="board";async function st(t={}){return await A.get(j,t)}function ot(t){return t._id?Tt(t):Dt(t)}async function nt(t){return await A.remove(`${j}/${t}`)}function at(t,e,r){const i=t.groups.findIndex(n=>n.id===e);return i===-1&&console.log("group not found"),t.groups.splice(i,1),t}function rt(t,e,r,i){const n=t.groups.find(s=>s.id===i);if(!e.id)e.id=J.makeId("t"),e.createdAt=Date.now(),n.tasks.push(e);else{console.log("Im here updating!");const s=n.tasks.findIndex(a=>a.id===e.id);if(s===-1)return Promise.reject("Couldnt find task to edit");n.tasks.splice(s,1,e)}return Promise.resolve(t)}function it(t,e,r,i){const n=t.groups.find(a=>a.id===r),s=n.tasks.findIndex(a=>a.id===e);return n.tasks.splice(s,1),Promise.resolve(t)}function lt(t,e,r){if(!e.id)e.id=J.makeId("g"),e.tasks=[],t.groups.push(e);else{const i=t.groups.findIndex(n=>n.id===e.id);if(i===-1)return Promise.reject("Couldnt find group to edit");t.groups.splice(i,1,e)}return t}function ct(t,e,r){const i=t.groups.splice(e,1)[0];return t.groups.splice(r,0,i),Promise.resolve(t)}function dt(t,e,r,i,n){const a=t.groups.find(u=>u.id===r).tasks.find(u=>u.id===e),l=$t(i);return a.dueDate=l,Promise.resolve(t)}function ut(t,e,r){const n=t.groups.find(s=>s.id===r).tasks.find(s=>s.id===e);return delete n.dueDate,Promise.resolve(t)}function ht(t,e,r){const n=t.groups.find(s=>s.id===r).tasks.find(s=>s.id===e);return n.dueDate.isDone=!n.dueDate.isDone,Promise.resolve(t)}function gt(t,e,r,i,n){const a=t.groups.find(u=>u.id===r).tasks.find(u=>u.id===e),l=wt(i);return"attachments"in a?a.attachments.unshift(l):a.attachments=[l],Promise.resolve(t)}function mt(t,e,r,i,n){const a=t.groups.find(u=>u.id===r).tasks.find(u=>u.id===e),l={id:J.makeId("c"),title:i,createdAt:Date.now(),items:[]};return"checklists"in a?a.checklists.push(l):a.checklists=[l],Promise.resolve(t)}function pt(t,e,r,i,n){const l=t.groups.find(f=>f.id===r).tasks.find(f=>f.id===e).checklists.find(f=>f.id===i.checklistId),u={id:J.makeId("i"),title:i.title,createdAt:Date.now(),isDone:!1};return l.items.push(u),Promise.resolve(t)}async function kt(t,e,r,i,n){let s={type:i.type,backgroundColor:i.style};i.type!=="color"&&(s.backgroundImage=`url(${i.style})`,s.backgroundColor=await P.getImgColor(i.style));const l=t.groups.find(u=>u.id===r).tasks.find(u=>u.id===e);return l.cover=s,Promise.resolve(t)}function _t(t,e,r,i,n){var l;const a=t.groups.find(u=>u.id===r).tasks.find(u=>u.id===e);if((l=a.labelIds)!=null&&l.length){const u=a.labelIds.findIndex(f=>f===i);u!==-1?a.labelIds.splice(u,1):a.labelIds.push(i)}else a.labelIds=[i];return Promise.resolve(t)}function vt(t,e,r){return e.id=J.makeId("l"),t.labels.unshift(e),Promise.resolve({boardToSave:t,id:e.id})}function bt(t,e,r,i){const s=t.groups.find(a=>a.id===r).tasks.find(a=>a.id===e);return delete s.cover,Promise.resolve(t)}function ft(t,e){var r;return(r=t==null?void 0:t.members)!=null&&r.length||(t.members=[]),t.members.some(i=>i.username===e.username)?Promise.reject("User is already on board"):(t.members.push(e),Promise.resolve(t))}function yt(t,e,r,i){var a,l;const s=t.groups.find(u=>u.id===r).tasks.find(u=>u.id===e);return(a=s.members)!=null&&a.includes(i)?Promise.reject("Member is already on task"):((l=s==null?void 0:s.members)!=null&&l.length?s.members.push(i):s.members=[i],console.log(t),Promise.resolve(t))}function Ct(t,e){var r;if((r=t.starredBy)!=null&&r.length){const i=t.starredBy.findIndex(n=>n===e);i===-1?t.starredBy.push(e):t.starredBy.splice(i,1)}else t.starredBy=[e];return Promise.resolve(t)}function It(){return{title:"",createdAt:Date.now(),createdBy:{},style:{},labels:[{id:"l101",title:"Done",color:"#61bd4f"},{id:"l102",title:"Progress",color:"#f2d600"},{id:"l103",title:"Low priority",color:"#c377e0"},{id:"l104",title:"Medium priority",color:"#ff9f1a"},{id:"l105",title:"High priority",color:"#eb5a46"},{id:"l106",title:"All",color:"#0079bf"}],members:[],groups:[]}}function $t(t){const e=L(t[0]).unix()*1e3,r=L(t[1]).unix()*1e3;return console.log(e),console.log(r),e===r?{endDate:r,isDone:!1}:{startDate:e,endDate:r,isDone:!1}}function wt(t){const e=t.lastIndexOf("/")+1,r=t.lastIndexOf("_"),i=t.substring(/\.(png|jpg|gif|bmp|jpeg|PNG|JPG|GIF|BMP|JPEG)/.exec(t).index),n=t.substring(e,r)+i;return{id:J.makeId("a"),url:t,name:n,createdAt:Date.now()}}async function Tt(t){return await A.put(`${j}/${t._id}`,t)}async function Dt(t){return await A.post(j,t)}const St={emits:["addedBoard","closeModal"],data(){return{boardToAdd:$.getEmptyBoard(),imgs:null,colors:["#0079bf","#d29034","#519839","#b04632","#89609e"]}},created(){this.displayImgs()},methods:{async displayImgs(){const t=await P.queryPhotos(this.searchTxt);this.imgs=t.results.splice(1,4)},setBackgroundImg(t){this.boardToAdd.style.imgUrl=t.urls.full,this.boardToAdd.style.color=""},setBackgroundColor(t){this.boardToAdd.style.color=t,this.boardToAdd.style.imgUrl=""},onCreateBoard(){if(this.boardToAdd.title.trim()==="")return;const t=this.$store.getters.loggedInUser;this.boardToAdd.createdBy=t,this.boardToAdd.members=[t],this.$store.dispatch({type:"saveBoard",boardToSave:this.boardToAdd}),this.$emit("addedBoard")},onClose(){this.$emit("addedBoard")}}},Bt={class:"add-board"},xt={class:"header flex"},At=o("h1",{class:"title"},"Create board",-1),Mt={class:"body"},Ot={class:"bg-panel"},Nt=o("span",{class:"background-title"},"Background",-1),Pt={class:"img-list clean-list flex"},Gt=["onClick","src"],Lt={class:"color-list clean-list flex"},Ut=["onClick"],Jt={class:"input-panel"},Rt=o("span",{class:"input-title"},[T(" Board title "),o("span",{class:"asterisk"},"*")],-1);function Et(t,e,r,i,n,s){return c(),d("section",Bt,[o("div",xt,[At,o("a",{onClick:e[0]||(e[0]=(...a)=>s.onClose&&s.onClose(...a)),class:"close-create-board-icon"})]),o("div",Mt,[o("div",Ot,[Nt,o("ul",Pt,[(c(!0),d(y,null,C(n.imgs,a=>(c(),d("li",{key:a.id},[o("img",{class:"img",onClick:l=>s.setBackgroundImg(a),src:a.urls.thumb,alt:""},null,8,Gt)]))),128))]),o("ul",Lt,[(c(!0),d(y,null,C(n.colors,a=>(c(),d("li",{key:a},[o("div",{class:"color",onClick:l=>s.setBackgroundColor(a),style:I({backgroundColor:a})},null,12,Ut)]))),128))])]),o("div",Jt,[Rt,B(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.boardToAdd.title=a),type:"text"},null,512),[[x,n.boardToAdd.title]])]),o("button",{class:"create-btn btn",onClick:e[2]||(e[2]=(...a)=>s.onCreateBoard&&s.onCreateBoard(...a))},"Create")])])}var V=_(St,[["render",Et]]);const N={login:Ft,logout:qt,signup:Ht,signupWithGoogle:Vt,loginWithGoogle:jt},E="auth";async function Ft(t){try{const e=await A.post(`${E}/login`,t);return R.save(e),Promise.resolve(e)}catch(e){throw console.log("Couldnt login",e),e}}async function jt(t){t.password="isGoogle";try{const e=await A.post(`${E}/login`,t);return R.save(e),Promise.resolve(e)}catch(e){console.log("Couldnt login with google",e)}}async function Vt(t){t.password="isGoogle";try{const e=await A.post(`${E}/signup`,t);return R.save(e),Promise.resolve(e)}catch(e){throw console.log("Couldnt signup with google",e),e}}async function qt(){try{return await A.post(`${E}/logout`),sessionStorage.clear(),Promise.resolve()}catch(t){throw console.log(t),t}}async function Ht(t){try{const e=await A.post(`${E}/signup`,t);return R.save(e),e}catch(e){throw console.log("Couldnt login",e),e}}const zt={props:{user:Object},emits:["closeModal"],methods:{async onLogout(){await N.logout(),this.$router.push("/")},onClose(){this.$emit("closeModal")}},computed:{imgUrl(){var t;return`url(${(t=this.user)==null?void 0:t.imgUrl})`||""}}},Wt={class:"header"},Kt=o("span",null,"Account",-1),Yt={class:"user"},Qt={class:"details"},Zt={class:"fullname"},Xt={class:"username"},es=o("div",{class:"profile-btns"},[o("span",{class:"profile-btn"},"Profile"),o("span",{class:"activity-btn"},"Activity"),o("span",{class:"Cards-btn"},"Cards")],-1);function ts(t,e,r,i,n,s){return c(),d("section",{onClick:e[2]||(e[2]=k(()=>{},["stop"])),class:"profile-modal"},[o("div",Wt,[Kt,o("span",{onClick:e[0]||(e[0]=(...a)=>s.onClose&&s.onClose(...a)),class:"close-profile-modal"})]),o("div",Yt,[o("div",{class:"profile-icon",style:I({backgroundImage:s.imgUrl})},null,4),o("div",Qt,[o("span",Zt,v(r.user.fullname),1),o("small",Xt,v(r.user.username),1)])]),es,o("div",{onClick:e[1]||(e[1]=(...a)=>s.onLogout&&s.onLogout(...a)),class:"logout"},"Logout")])}var ss=_(zt,[["render",ts]]),os="/assets/search-icon.22ae21ff.png",ns="/assets/search-black.2b77d9f4.png";const as={components:{headerBoardList:Ge,addBoard:V,profileModal:ss},created(){},data(){return{searchTxt:"",isShown:!1,createClicked:!1,profileModalOpen:!1}},methods:{openList(t){this.isShown=!this.isShown},AppHeaderClicked(){this.$router.push("/board")},onToggleAddBoard(){this.createClicked=!this.createClicked},onToggleProfileModal(){this.profileModalOpen=!this.profileModalOpen}},computed:{headerBgc(){return{"trans-header":/board\//g.test(this.$route.fullPath)}},boards(){return this.$store.getters.boards},currBoard(){return this.$store.getters.board},loggedInUser(){return this.$store.getters.loggedInUser}},unmounted(){}},rs=o("img",{class:"gif-logo",src:"",alt:""},null,-1),is=o("span",{class:"logo-txt"},"Twello",-1),ls=[rs,is],cs={class:"board-main-nav flex space-between align-center"},ds={class:"actions"},us=o("span",null,[T(" Board "),o("span",{class:"svg-icon expand"})],-1),hs=[us],gs=o("button",{class:"btn wide-s"},[o("span",null,[T(" Starred "),o("span",{class:"svg-icon expand"})])],-1),ms=o("button",{class:"btn narrow-s"},[o("span",null,[T(" More "),o("span",{class:"svg-icon expand"})])],-1),ps={class:"second-actions flex"},ks={class:"search-app-header"},_s=o("img",{class:"search-icon",src:os,alt:""},null,-1),vs=o("img",{class:"search-icon-b",src:ns,alt:""},null,-1),bs=ee('<div class="mini-search"><span class="search-icon svg-icon"></span></div><button class="info btn"><span class="info-icon"></span></button><button class="notifications btn"><span class="notifications-icon"></span></button>',3);function fs(t,e,r,i,n,s){var f;const a=b("add-board"),l=b("header-board-list"),u=b("profile-modal");return c(),d("header",{class:D([s.headerBgc,"main-header app-header flex align-center"])},[o("div",{onClick:e[0]||(e[0]=(...p)=>s.AppHeaderClicked&&s.AppHeaderClicked(...p)),class:"logo flex align-center"},ls),o("div",cs,[o("div",ds,[o("button",{onClick:e[1]||(e[1]=(...p)=>s.openList&&s.openList(...p)),class:"btn wide-s"},hs),gs,ms,o("button",{onClick:e[2]||(e[2]=(...p)=>s.onToggleAddBoard&&s.onToggleAddBoard(...p)),class:"btn create-btn"},"Create")]),n.createClicked?(c(),S(a,{key:0,onAddedBoard:s.onToggleAddBoard},null,8,["onAddedBoard"])):g("",!0),n.isShown?(c(),S(l,{key:1,onCloseModal:s.openList,boards:s.boards},null,8,["onCloseModal","boards"])):g("",!0),o("div",ps,[o("div",ks,[_s,vs,B(o("input",{class:"search-input","onUpdate:modelValue":e[3]||(e[3]=p=>n.searchTxt=p),type:"text",placeholder:"Search"},null,512),[[x,n.searchTxt]])]),bs,o("div",{onClick:e[4]||(e[4]=(...p)=>s.onToggleProfileModal&&s.onToggleProfileModal(...p)),class:"profile-app-header flex",style:I({backgroundImage:`url(${(f=s.loggedInUser)==null?void 0:f.imgUrl})`})},[n.profileModalOpen?(c(),S(u,{key:0,onCloseModal:s.onToggleProfileModal,user:s.loggedInUser},null,8,["onCloseModal","user"])):g("",!0)],4)])])],2)}var ys=_(as,[["render",fs]]);const Cs={components:{homeHeader:fe,loginHeader:Te,appHeader:ys},methods:{},computed:{headerType(){const t=this.$route.fullPath;return t==="/"?"home-header":t==="/auth/login"||t==="/auth/signup"?"login-header":"app-header"}}};function Is(t,e,r,i,n,s){return c(),S(H(s.headerType))}var $s=_(Cs,[["render",Is]]);const ws={computed:{isReady(){return this.$store.getters.isReady}}},Ts={key:0,class:"loading-container"},Ds=o("span",{class:"loading-gif"},null,-1),Ss=[Ds];function Bs(t,e,r,i,n,s){return s.isReady?g("",!0):(c(),d("div",Ts,Ss))}var xs=_(ws,[["render",Bs]]);const As={components:{headerContainer:$s,loadingGif:xs},async created(){await this.$store.dispatch("loadUser")},computed:{boards(){return this.$store.getters.boards},isReady(){return this.$store.getters.isReady},isReadyClass(){return{"loading-layout":this.isReady}}}};function Ms(t,e,r,i,n,s){const a=b("header-container"),l=b("router-view"),u=b("loading-gif");return c(),d(y,null,[s.isReady?(c(),S(a,{key:0})):g("",!0),s.isReady?(c(),S(l,{key:1})):g("",!0),w(u)],64)}var Os=_(As,[["render",Ms]]),Ns="/assets/hero.f5b958c8.png";const Ps={components:{},data(){return{}},methods:{logAsGuest(){console.log("Loggin as guest"),this.$router.push("/board")}},computed:{},unmounted(){}},Gs={class:"home-page main-layout"},Ls={class:"hero flex"},Us={class:"action-call flex"},Js=o("h1",{class:"hero-title"},"Twello helps teams move work forward.",-1),Rs=o("p",{class:"hero-p"}," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Twello. ",-1),Es=o("div",{class:"hero-img-container"},[o("img",{class:"hero-img",src:Ns,alt:""})],-1);function Fs(t,e,r,i,n,s){return c(),d("section",Gs,[o("div",Ls,[o("div",Us,[Js,Rs,o("button",{class:"live-demo-btn btn",onClick:e[0]||(e[0]=(...a)=>s.logAsGuest&&s.logAsGuest(...a))},"Try live demo")]),Es])])}var js=_(Ps,[["render",Fs]]);const Vs={props:{board:{type:Object}},components:{},data(){return{}},created(){},methods:{openBoard(){this.$router.push("/board/"+this.board._id)},async starredToggle(){await this.$store.dispatch({type:"starredBoardToggle",board:this.board})}},computed:{img(){var t;return((t=this.board.style)==null?void 0:t.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""},isStared(){var e;const t=this.$store.getters.loggedInUser;return(e=this.board.starredBy)!=null&&e.includes(t._id)?"starred":""}}},qs=o("span",null,null,-1),Hs={class:"board-title"};function zs(t,e,r,i,n,s){return r.board?(c(),d("li",{key:0,class:"board-preview",onClick:e[2]||(e[2]=(...a)=>s.openBoard&&s.openBoard(...a))},[o("div",{class:"board-background",style:I({backgroundImage:`url('${s.img}')`,backgroundColor:`${s.color}`})},[qs,o("div",Hs,v(r.board.title),1),o("div",{class:D(["flex star-container",s.isStared])},[o("a",{class:"unstarred-icon",onClick:e[0]||(e[0]=k((...a)=>s.starredToggle&&s.starredToggle(...a),["stop"]))}),o("a",{class:"starred-icon",onClick:e[1]||(e[1]=k((...a)=>s.starredToggle&&s.starredToggle(...a),["stop"]))})],2)],4)])):g("",!0)}var Ws=_(Vs,[["render",zs]]);const Ks={props:{boards:{type:Array}},components:{boardPreview:Ws,addBoard:V,AddBoard:V},data(){return{createMenuOpen:!1}},created(){},methods:{toggleNewBoard(){this.createMenuOpen=!this.createMenuOpen}},computed:{starredBoards(){return this.$store.getters.starredBoards}}},Ys={class:"board-list-container"},Qs=o("div",{class:"flex align"},[o("a",{class:"board-list-strred-icon"}),o("span",null,"Starred boards")],-1),Zs={class:"board-list clean-list"},Xs=o("div",{class:"flex align"},[o("a",{class:"board-list-title-icon"}),o("span",null,"Your boards")],-1),eo={class:"board-list clean-list"},to=o("div",{class:"add-bord-container"},[o("p",null,"Create new board")],-1),so=[to];function oo(t,e,r,i,n,s){const a=b("add-board"),l=b("board-preview");return c(),d("section",Ys,[n.createMenuOpen?(c(),S(a,{key:0,onAddedBoard:s.toggleNewBoard},null,8,["onAddedBoard"])):g("",!0),Qs,o("ul",Zs,[(c(!0),d(y,null,C(s.starredBoards,u=>(c(),S(l,{key:u._id,board:u},null,8,["board"]))),128))]),Xs,o("ul",eo,[(c(!0),d(y,null,C(r.boards,u=>(c(),S(l,{key:u._id,board:u},null,8,["board"]))),128)),o("li",{class:"add-new-board",onClick:e[0]||(e[0]=(...u)=>s.toggleNewBoard&&s.toggleNewBoard(...u))},so)])])}var no=_(Ks,[["render",oo]]);const ao={props:{},components:{},data(){return{}},created(){},methods:{},computed:{}},ro={class:"board-list-side-bar"},io={class:"clean-list"},lo=o("a",{class:"boards-menu-icon"},null,-1),co=o("span",null,"Boards",-1),uo=o("li",null,[o("div",{class:"list-container"},[o("a",{class:"templates-menu-icon"}),o("span",null,"Templates")])],-1),ho=o("a",{class:"Home-menu-icon"},null,-1),go=o("span",null,"Home",-1);function mo(t,e,r,i,n,s){const a=b("router-link");return c(),d("section",ro,[o("ul",io,[o("li",null,[w(a,{to:"/board"},{default:O(()=>[lo,co]),_:1})]),uo,o("li",null,[w(a,{to:"/",class:"list-container"},{default:O(()=>[ho,go]),_:1})])])])}var po=_(ao,[["render",mo]]);const ko={components:{boardList:no,boardListSideBar:po},async created(){let t=this.$store.getters.loggedInUser;console.log(t),t||(t={username:"guest@ca.com",password:"guest"},await N.login(t),await this.$store.dispatch("loadUser"))},data(){return{}},methods:{},computed:{boards(){return this.$store.getters.boards}},unmounted(){}},_o={key:0,class:"board-app flex"};function vo(t,e,r,i,n,s){const a=b("board-list-side-bar"),l=b("board-list");return s.boards?(c(),d("section",_o,[w(a),w(l,{boards:s.boards},null,8,["boards"])])):g("",!0)}var bo=_(ko,[["render",vo]]);const fo={props:{task:{type:Object}},components:{},data(){return{checklist:{id:"asdasd",title:"todo",items:[{id:"sfdfs",title:"done this",done:!0},{id:"sfdfs",title:"done that",done:!0}]}}},created(){},methods:{openTaskDetails(){this.$router.push(this.$route.fullPath+"/task/"+this.task.id),this.$emit("openTaskDetails")},labelClicked(){this.$emit("labelClicked")},dateChecked(){this.$emit("dateChecked",this.task.id)}},computed:{attachNum(){var t;return(t=this.task.attachments)==null?void 0:t.length},img(){return this.task.cover.backgroundImage},bgColor(){return this.task.cover.backgroundColor},labels(){return this.task.labelIds.map(t=>this.$store.getters.labelById(t))},checkedSum(){return`${this.doneSum}/${this.itemsSum}`},isDone(){return this.itemsSum===this.doneSum?"done":""},itemsSum(){return this.task.checklists.reduce((t,e)=>t+e.items.length,0)},doneSum(){return this.task.checklists.map(e=>e.items.filter(r=>r.isDone)).reduce((e,r)=>e+r.length,0)},isItems(){return this.itemsSum!==0},date(){const t=new Date(this.task.dueDate.startDate),e=new Date(this.task.dueDate.endDate),r=`${t.toLocaleString("en",{month:"short"})} ${t.getDate()}`,i=`${e.toLocaleString("en",{month:"short"})} ${e.getDate()}`;return this.task.dueDate.startDate?`${r}-${i}`:i},taskStatus(){return this.task.dueDate.isDone?"complited":this.task.dueDate.endDate<Date.now()?"overdue":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24?"due-soon":""}}},yo={key:0,class:"flex clean-list"},Co=["title"],Io={class:"task-preview-title"},$o={class:"actions-container flex"},wo={class:"first-actions"},To=o("a",{class:"date-icon"},null,-1),Do=o("a",{class:"checked-icon"},null,-1),So=o("a",{class:"complited-icon"},null,-1),Bo={class:"date"},xo={key:1,class:"description-preview"},Ao=o("a",{class:"description-icon",title:"This card has a description"},null,-1),Mo=[Ao],Oo={key:2,class:"attachment-preview"},No=o("a",{class:"attachments-icon",title:"attachments"},null,-1),Po={class:"attach-num"},Go=o("a",{class:"checklist-icon",title:"Checklist items"},null,-1),Lo={class:"checkedSum"},Uo={key:0,class:"members-preview flex"},Jo=["title"];function Ro(t,e,r,i,n,s){var a,l,u,f,p;return r.task?(c(),d("section",{key:0,class:"task-preview",onClick:e[2]||(e[2]=(...h)=>s.openTaskDetails&&s.openTaskDetails(...h))},[((a=r.task.cover)==null?void 0:a.type)==="color"?(c(),d("div",{key:0,class:"task-cover-color",style:I({backgroundColor:`${s.bgColor}`})},null,4)):g("",!0),((l=r.task.cover)==null?void 0:l.type)==="img"?(c(),d("div",{key:1,class:"task-cover-img",style:I({backgroundImage:`${s.img}`})},null,4)):g("",!0),o("main",null,[(u=r.task.labelIds)!=null&&u.length?(c(),d("ul",yo,[(c(!0),d(y,null,C(s.labels,h=>(c(),d("li",{title:h.title,onClick:e[0]||(e[0]=k((...m)=>s.labelClicked&&s.labelClicked(...m),["stop"])),key:h},[o("div",{class:"task-label",style:I({backgroundColor:`${h.color}`})},v(h.title),5)],8,Co))),128))])):g("",!0),o("h2",Io,v(r.task.title),1),o("div",$o,[o("div",wo,[r.task.dueDate?(c(),d("div",{key:0,class:D(["date-preview",s.taskStatus]),onClick:e[1]||(e[1]=k((...h)=>s.dateChecked&&s.dateChecked(...h),["stop"]))},[To,Do,So,o("span",Bo,v(s.date),1)],2)):g("",!0),r.task.description?(c(),d("div",xo,Mo)):g("",!0),(f=r.task.attachments)!=null&&f.length?(c(),d("div",Oo,[No,o("span",Po,v(s.attachNum),1)])):g("",!0),r.task.checklists&&s.isItems?(c(),d("div",{key:3,class:D(["checklist-preview",s.isDone])},[Go,o("span",Lo,v(s.checkedSum),1)],2)):g("",!0)]),(p=r.task.members)!=null&&p.length?(c(),d("div",Uo,[(c(!0),d(y,null,C(r.task.members,h=>(c(),d("span",{key:h._id,style:I({backgroundImage:`url(${h.imgUrl})`}),title:h.fullname},null,12,Jo))),128))])):g("",!0)])])])):g("",!0)}var Eo=_(fo,[["render",Ro]]);const Fo={props:{group:{type:Object}},components:{taskPreview:Eo,Container:z,Draggable:W},data(){return{addBtnClicked:!1,task:{title:""},isMenueOpen:!1}},created(){},methods:{getTaskPayload(t){return this.group.tasks[t]},onDrop(t){this.$emit("saveTaskDrop",{ev:t,groupId:this.group.id})},async onSaveTitle(t){!t.target.innerText||(this.group.title=t.target.innerText,this.$emit("editGroup",this.group))},openAddForm(){this.addBtnClicked=!this.addBtnClicked,console.log(this.$refs)},async saveTask(){await this.$emit("saveTask",{groupId:this.group.id,task:{title:this.task.title}}),this.task.title="",this.addBtnClicked=!this.addBtnClicked},openTaskDetails(){this.$emit("openTaskDetails",this.group.id)},removeGroup(){this.$emit("removeGroup",this.group.id)},labelClicked(){this.$emit("labelClicked")},toggleDeleteMenue(){this.isMenueOpen=!this.isMenueOpen},dateChecked(t){this.$emit("dateChecked",t,this.group.id)}},computed:{}},jo={key:0,class:"board-group"},Vo={class:"group-header"},qo=o("a",{class:"dots-icon"},null,-1),Ho=[qo],zo={key:0,class:"remove-list-modal"},Wo={class:"remove-list-header"},Ko=o("span",null,"List actions",-1),Yo={key:0,class:"tasks-container"},Qo=o("a",{class:"add-card-icon"},null,-1),Zo=T(" Add a card "),Xo=[Qo,Zo],en={key:2,class:"add-card-container"},tn=o("button",{class:"save-new-card-btn"}," Add card ",-1);function sn(t,e,r,i,n,s){var p;const a=b("task-preview"),l=b("Draggable"),u=b("Container"),f=U("focus");return r.group?(c(),d("section",jo,[o("div",Vo,[o("h1",{onBlur:e[0]||(e[0]=(...h)=>s.onSaveTitle&&s.onSaveTitle(...h)),class:"group-title",contenteditable:"",spellcheck:"false"},v(r.group.title),33),o("button",{class:"group-menu",onClick:e[1]||(e[1]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))},Ho),n.isMenueOpen?(c(),d("div",zo,[o("div",{class:"screen-toggle",onClick:e[2]||(e[2]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))}),o("div",Wo,[Ko,o("a",{class:"close-icon",onClick:e[3]||(e[3]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))})]),o("div",{class:"delete-item",onClick:e[4]||(e[4]=(...h)=>s.removeGroup&&s.removeGroup(...h))},"Archive this list")])):g("",!0)]),(p=r.group.tasks)!=null&&p.length?(c(),d("div",Yo,[w(u,{"drag-class":"on-dragging","get-child-payload":h=>s.getTaskPayload(h),"group-name":"group",onDrop:s.onDrop,orientation:"vertical",class:"clean-list group-list"},{default:O(()=>[(c(!0),d(y,null,C(r.group.tasks,h=>(c(),S(l,{key:h.id},{default:O(()=>[w(a,{onOpenTaskDetails:s.openTaskDetails,onLabelClicked:s.labelClicked,task:h,onDateChecked:s.dateChecked},null,8,["onOpenTaskDetails","onLabelClicked","task","onDateChecked"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])])):g("",!0),n.addBtnClicked?(c(),d("div",en,[o("form",{onSubmit:e[8]||(e[8]=k((...h)=>s.saveTask&&s.saveTask(...h),["prevent"]))},[B(o("textarea",{ref:"taskTitle","onUpdate:modelValue":e[6]||(e[6]=h=>n.task.title=h),"resize:none":"",placeholder:"Enter a title for this card..."},null,512),[[f],[x,n.task.title]]),o("div",null,[tn,o("a",{class:"close-add-btn",onClick:e[7]||(e[7]=h=>n.addBtnClicked=!n.addBtnClicked)})])],32)])):(c(),d("button",{key:1,onClick:e[5]||(e[5]=(...h)=>s.openAddForm&&s.openAddForm(...h)),class:"add-card-btn"},Xo))])):g("",!0)}var on=_(Fo,[["render",sn]]);const nn={emits:["closeModal"],data(){return{filterBy:{txt:""}}},methods:{onCloseFilter(){this.$emit("closeModal")}}},an={class:"board-filter-modal"},rn={class:"header flex align-center"},ln=o("span",{class:"title"},"Filter",-1),cn={class:"body"},dn=o("p",{class:"input-title"},"Keyword",-1),un=o("p",{class:"input-desc"},"Search cards, members, labels, and more.",-1);function hn(t,e,r,i,n,s){return c(),d("div",an,[o("div",rn,[ln,o("button",{onClick:e[0]||(e[0]=(...a)=>s.onCloseFilter&&s.onCloseFilter(...a)),class:"close-filter-board-icon"})]),o("div",cn,[o("form",null,[dn,B(o("input",{class:"filter-input","onUpdate:modelValue":e[1]||(e[1]=a=>n.filterBy.txt=a),placeholder:"Enter a Keyword...",type:"text"},null,512),[[x,n.filterBy.txt]]),un])])])}var gn=_(nn,[["render",hn]]);const mn={components:{},created(){},data(){return{getBy:"",users:[],chosenUser:{}}},methods:{onSetMember(t){this.chosenUser=t},onAddMember(){this.$store.dispatch({type:"addMember",user:this.chosenUser})},onClosePopup(){this.$emit("closePopup")},async getUsers(){this.users=await R.getUsersBy(this.getBy)},isChosen(t){return this.chosenUser._id===t._id}},computed:{},unmounted(){}},pn={class:"header"},kn=o("span",null,"Invite to board",-1),_n={class:"body"},vn=o("button",{class:"send-invite"},"Send invitation",-1),bn={key:0,class:"user-list clean-list"},fn=["onClick"],yn={key:0,class:"check-icon"};function Cn(t,e,r,i,n,s){var a;return c(),d("section",{onClick:e[4]||(e[4]=k(()=>{},["stop"])),class:"invite-modal"},[o("div",pn,[kn,o("div",{onClick:e[0]||(e[0]=(...l)=>s.onClosePopup&&s.onClosePopup(...l)),class:"icon"})]),o("div",_n,[o("form",{onSubmit:e[3]||(e[3]=k((...l)=>s.onAddMember&&s.onAddMember(...l),["prevent"]))},[B(o("input",{onInput:e[1]||(e[1]=(...l)=>s.getUsers&&s.getUsers(...l)),"onUpdate:modelValue":e[2]||(e[2]=l=>n.getBy=l),type:"text",placeholder:"Email address or name"},null,544),[[x,n.getBy]]),vn],32),(a=n.users)!=null&&a.length?(c(),d("ul",bn,[(c(!0),d(y,null,C(n.users,l=>(c(),d("li",{onClick:u=>s.onSetMember(l),class:"user-preview"},[o("div",{class:"icon",style:I({backgroundImage:`url(${l==null?void 0:l.imgUrl})`})},null,4),T(" "+v(l.fullname)+" ",1),s.isChosen(l)?(c(),d("div",yn)):g("",!0)],8,fn))),256))])):g("",!0)])])}var In=_(mn,[["render",Cn]]);const $n={components:{boardFilterModal:gn,inviteModal:In},props:{board:Object},emits:["openMenu"],data(){return{isFilterOpen:!1,inviteModalOpen:!1}},methods:{async onSaveBoardName(t){this.board.title=t.target.innerText,this.$store.dispatch({type:"saveBoard",boardToSave:this.board})},onOpenMenu(){this.$emit("openMenu")},onOpenFilter(){this.isFilterOpen=!this.isFilterOpen},onToggleInviteModal(){this.inviteModalOpen=!this.inviteModalOpen},onToggleBoardStar(){this.$store.dispatch({type:"starredBoardToggle",board:this.board})}},computed:{isStarred(){var e;const t=this.$store.getters.loggedInUser;return{starred:(e=this.board.starredBy)==null?void 0:e.includes(t._id)}}}},wn={class:"board-header flex space-between align-center"},Tn={class:"board-nav flex"},Dn=o("button",{class:"board-btn btn"},[o("span",{class:"svg-icon board-icon"}),T(" Board ")],-1),Sn={class:"invited-users flex"},Bn=o("span",{class:"invite"},null,-1),xn=T(" Invite "),An={class:"board-action"},Mn=o("span",null,[o("span",{class:"svg-icon filter"}),T(" Filter ")],-1),On=[Mn],Nn=o("span",{class:"dots"},null,-1),Pn=T("Show menu "),Gn=[Nn,Pn];function Ln(t,e,r,i,n,s){const a=b("invite-modal"),l=b("board-filter-modal");return c(),d(y,null,[o("header",wn,[o("div",Tn,[Dn,o("div",{class:"board-name flex",onBlur:e[0]||(e[0]=(...u)=>s.onSaveBoardName&&s.onSaveBoardName(...u)),contenteditable:""},v(r.board.title),33),o("button",{class:D(["star-btn btn",s.isStarred]),onClick:e[1]||(e[1]=(...u)=>s.onToggleBoardStar&&s.onToggleBoardStar(...u))},null,2),o("div",Sn,[(c(!0),d(y,null,C(r.board.members,u=>(c(),d("span",{key:u._id,style:I({backgroundImage:`url(${u.imgUrl})`})},null,4))),128))]),o("button",{onClick:e[2]||(e[2]=(...u)=>s.onToggleInviteModal&&s.onToggleInviteModal(...u)),class:"invite-btn btn"},[Bn,xn,n.inviteModalOpen?(c(),S(a,{key:0,onClosePopup:s.onToggleInviteModal},null,8,["onClosePopup"])):g("",!0)])]),o("div",An,[o("button",{onClick:e[3]||(e[3]=(...u)=>s.onOpenFilter&&s.onOpenFilter(...u)),class:"filter-btn btn"},On),o("button",{onClick:e[4]||(e[4]=(...u)=>s.onOpenMenu&&s.onOpenMenu(...u)),class:"right-nav-btn btn"},Gn)])]),n.isFilterOpen?(c(),S(l,{key:0,onCloseModal:s.onOpenFilter},null,8,["onCloseModal"])):g("",!0)],64)}var Un=_($n,[["render",Ln]]);const Jn={data(){return{results:null,searchTxt:""}},async created(){const t=await P.queryPhotos();this.results=t.results},methods:{async searchPhotos(){const t=await P.queryPhotos(this.searchTxt);this.results=t.results},setBackGroundImg(t){this.$emit("setBackGroundImg",t)},closeImgMenu(){this.$emit("closeImgMenu")},goBack(){this.$emit("goBack")}}},Rn={class:"right-menu background-img-menu"},En={class:"flex space-between"},Fn=o("h1",null,[T("Photos by "),o("span",null,[o("a",{target:"_blank",href:"https://unsplash.com/"},"Unsplah")])],-1),jn=o("hr",null,null,-1),Vn=o("button",null,"Search",-1),qn={class:"clean-list flex unsplash-imgs-results"},Hn=["onClick"],zn=["href"];function Wn(t,e,r,i,n,s){return c(),d("section",Rn,[o("header",En,[o("a",{onClick:e[0]||(e[0]=(...a)=>s.goBack&&s.goBack(...a)),class:"back-menu-icon"}),Fn,o("a",{class:"close-menu-icon",onClick:e[1]||(e[1]=(...a)=>s.closeImgMenu&&s.closeImgMenu(...a))})]),jn,o("form",{class:"search-bg-img-form",onSubmit:e[3]||(e[3]=k((...a)=>s.searchPhotos&&s.searchPhotos(...a),["prevent"]))},[B(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.searchTxt=a),type:"search"},null,512),[[x,n.searchTxt]]),Vn],32),o("ul",qn,[(c(!0),d(y,null,C(n.results,a=>(c(),d("li",{key:a.id},[o("div",{class:"right-menu-unsplash-img",onClick:l=>s.setBackGroundImg(a.urls.full),style:I({backgroundImage:`url(${a.urls.thumb})`})},[o("a",{class:"right-menu-unsplash-title",target:"_blank",href:a.user.links.html},v(a.user.first_name),9,zn)],12,Hn)]))),128))])])}var Kn=_(Jn,[["render",Wn]]);const Yn={data(){return{colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"]}},async created(){},methods:{async searchPhotos(){const t=await imgService.queryPhotos(this.searchTxt);this.results=t.results},goBack(){this.$emit("goBack")},setBackGroundColor(t){this.$emit("setBackGroundColor",t)},closeColorMenu(){this.$emit("closeColorMenu")}}},Qn={class:"right-menu background-color-menu"},Zn={class:"flex space-between"},Xn=o("h1",null,"Colors",-1),ea=o("hr",null,null,-1),ta={class:"clean-list flex right-menu-colors-list"},sa=["onClick"];function oa(t,e,r,i,n,s){return c(),d("section",Qn,[o("header",Zn,[o("a",{onClick:e[0]||(e[0]=(...a)=>s.goBack&&s.goBack(...a)),class:"back-menu-icon"}),Xn,o("a",{class:"close-menu-icon",onClick:e[1]||(e[1]=(...a)=>s.closeColorMenu&&s.closeColorMenu(...a))})]),ea,o("ul",ta,[(c(!0),d(y,null,C(n.colors,a=>(c(),d("li",{key:a},[o("div",{class:"right-menu-colors",onClick:l=>s.setBackGroundColor(a),style:I({backgroundColor:a})},null,12,sa)]))),128))])])}var na=_(Yn,[["render",oa]]);const aa={components:{backgroundImgMenu:Kn,backgroundColorMenu:na},data(){return{showImgClicked:!1,showColorClicked:!1}},async created(){},methods:{toggleImgMenu(){this.showImgClicked=!this.showImgClicked},toggleColorMenu(){this.showColorClicked=!this.showColorClicked},closeImgMenu(){this.showImgClicked=!this.showImgClicked,this.$emit("closeBgMenu")},closeColorMenu(){this.showColorClicked=!this.showColorClicked,this.$emit("closeBgMenu")},closeBgMenu(){this.$emit("closeBgMenu")},goBack(){this.$emit("goBack")},setBackGroundImg(t){this.$emit("setBackGroundImg",t)},setBackGroundColor(t){this.$emit("setBackGroundColor",t)}},computed:{isImgOpen(){return this.showImgClicked?"open":""},isColorOpen(){return this.showColorClicked?"open":""}}},ra={class:"right-menu background-menu"},ia={class:"flex space-between"},la=o("h1",null,"Change background",-1),ca=o("hr",null,null,-1),da={class:"bg-menu-main"},ua={class:"clean-list flex"},ha=o("div",{class:"bg-menu-imgs bg-photos-img"},null,-1),ga=o("div",{class:"bg-menu-imgs-title"},"photos",-1),ma=[ha,ga],pa=o("div",{class:"bg-menu-imgs bg-colors-img"},null,-1),ka=o("div",{class:"bg-menu-imgs-title"},"Colors",-1),_a=[pa,ka];function va(t,e,r,i,n,s){const a=b("background-img-menu"),l=b("background-color-menu");return c(),d("section",ra,[o("header",ia,[o("a",{onClick:e[0]||(e[0]=(...u)=>s.goBack&&s.goBack(...u)),class:"back-menu-icon"}),la,o("a",{class:"close-menu-icon",onClick:e[1]||(e[1]=(...u)=>s.closeBgMenu&&s.closeBgMenu(...u))})]),ca,o("main",da,[o("ul",ua,[o("li",{onClick:e[2]||(e[2]=(...u)=>s.toggleImgMenu&&s.toggleImgMenu(...u))},ma),o("li",{onClick:e[3]||(e[3]=(...u)=>s.toggleColorMenu&&s.toggleColorMenu(...u))},_a)])]),w(a,{onCloseImgMenu:s.closeImgMenu,onGoBack:s.toggleImgMenu,onSetBackGroundImg:s.setBackGroundImg,class:D(s.isImgOpen)},null,8,["onCloseImgMenu","onGoBack","onSetBackGroundImg","class"]),w(l,{onCloseColorMenu:s.closeColorMenu,onSetBackGroundColor:s.setBackGroundColor,onGoBack:s.toggleColorMenu,class:D(s.isColorOpen)},null,8,["onCloseColorMenu","onSetBackGroundColor","onGoBack","class"])])}var ba=_(aa,[["render",va]]);const fa={components:{backgroundMenu:ba},data(){return{showMenuClicked:!1}},async created(){},methods:{toggleMenu(){this.showMenuClicked=!this.showMenuClicked},closeMainMenu(){this.$emit("closeMenu")},closeBgMenu(){this.showMenuClicked=!this.showMenuClicked,this.$emit("closeMenu")},setBackGroundImg(t){this.$emit("setBackGroundImg",t)},setBackGroundColor(t){this.$emit("setBackGroundColor",t)}},computed:{isOpen(){return this.showMenuClicked?"open":""},board(){return this.$store.getters.board},img(){var t;return((t=this.board.style)==null?void 0:t.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""}}},ya={class:"right-menu right-side-nav"},Ca={class:"flex space-between"},Ia=o("h1",null,"Menu",-1),$a=o("hr",null,null,-1),wa={class:"clean-list main-menu-list"},Ta=o("span",null,"Change background",-1);function Da(t,e,r,i,n,s){const a=b("background-menu");return c(),d("section",ya,[o("header",Ca,[Ia,o("a",{class:"close-menu-icon",onClick:e[0]||(e[0]=(...l)=>s.closeMainMenu&&s.closeMainMenu(...l))})]),$a,o("ul",wa,[o("li",{onClick:e[1]||(e[1]=(...l)=>s.toggleMenu&&s.toggleMenu(...l)),class:"flex main-list-item"},[o("div",{class:"board-icon-img",style:I({backgroundImage:`url('${s.img}')`,backgroundColor:`${s.color}`})},null,4),Ta])]),w(a,{onCloseBgMenu:s.closeBgMenu,onGoBack:s.toggleMenu,onSetBackGroundImg:s.setBackGroundImg,onSetBackGroundColor:s.setBackGroundColor,class:D(s.isOpen)},null,8,["onCloseBgMenu","onGoBack","onSetBackGroundImg","onSetBackGroundColor","class"])])}var Sa=_(fa,[["render",Da]]);const Ba="",G=xa();window.socketService=G;G.setup();function xa(){var t=null;return{async setup(){t=te(Ba)},on(r,i){t.on(r,i)},off(r,i=null){!t||(i?t.off(r,i):t.removeAllListeners(r))},emit(r,i){console.log(r),console.log(i),t.emit(r,i)},terminate(){t=null}}}const Aa={components:{boardGroup:on,boardHeader:Un,rightNav:Sa,Container:z,Draggable:W},data(){return{addBtnClicked:!1,group:{title:""},currOpenTaskGroupId:null,showMenuClicked:!1,isLabelClicked:!1}},created(){},methods:{saveTaskDrop({ev:t,groupId:e}){if(t.removedIndex!==null){const r=JSON.parse(JSON.stringify(this.board));r.groups.find(n=>n.id===e).tasks.splice(t.removedIndex,1),this.$store.dispatch({type:"saveBoard",boardToSave:r})}t.addedIndex!==null&&setTimeout(()=>{const r=JSON.parse(JSON.stringify(this.board));r.groups.find(n=>n.id===e).tasks.splice(t.addedIndex,0,t.payload),this.$store.dispatch({type:"saveBoard",boardToSave:r})},500)},async onDrop({removedIndex:t,addedIndex:e}){this.$store.dispatch({type:"saveGroupDrop",fromIdx:t,toIdx:e})},async saveTask({groupId:t,task:e}){await this.$store.dispatch({type:"saveTask",taskToSave:e,groupId:t,activity:"Add a new card"})},async addGroup(){this.group.title.trim()!==""&&(await this.$store.dispatch({type:"saveGroup",groupToSave:{title:this.group.title},activity:"Add a new group"}),this.group.title="",this.addBtnClicked=!this.addBtnClicked)},async saveGroup(t){await this.$store.dispatch({type:"saveGroup",groupToSave:t,activity:"edit a group"})},openTaskDetails(t){this.currOpenTaskGroupId=t},async removeGroup(t){await this.$store.dispatch({type:"removeGroup",groupId:t,activity:"Remove group"})},toggleMenu(){this.showMenuClicked=!this.showMenuClicked},async setBackGroundImg(t){await this.$store.dispatch({type:"setBackGroundImg",imgUrl:t,activity:"Change background image"})},async setBackGroundColor(t){await this.$store.dispatch({type:"setBackGroundColor",color:t,activity:"Change background color"})},labelClicked(){this.isLabelClicked=!this.isLabelClicked},async dateChecked(t,e){await this.$store.dispatch({type:"toggleTaskDone",taskId:t,groupId:e,payload:t})}},computed:{boardId(){return this.$route.params.boardId},board(){return this.$store.getters.board},img(){var t;return((t=this.board.style)==null?void 0:t.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""},isOpen(){return this.showMenuClicked?"open":""},dragClass(){return{}},shownLabels(){return this.isLabelClicked?"show-title":"hide-title"}},watch:{boardId:{handler(){const{boardId:t}=this.$route.params;G.setup(),G.emit("watch-board",t),G.on("board-update",e=>{this.$store.dispatch({type:"saveBoard",boardToSave:e,isFromSocket:!0})}),this.$store.commit({type:"setBoard",boardId:t})},immediate:!0}}},Ma=o("span",null,"+",-1),Oa=T(" Add another list "),Na=[Ma,Oa],Pa={key:1,class:"add-group-container"},Ga=o("button",{class:"save-new-list-btn"},"Add list",-1);function La(t,e,r,i,n,s){const a=b("board-header"),l=b("board-group"),u=b("Draggable"),f=b("Container"),p=b("router-view"),h=b("right-nav"),m=U("focus");return s.board?(c(),d("section",{key:0,class:"board-details",style:I({backgroundImage:`url(${s.img})`,backgroundColor:`${s.color}`})},[w(a,{onOpenMenu:s.toggleMenu,board:s.board},null,8,["onOpenMenu","board"]),o("main",{class:D(["main-board",s.shownLabels])},[w(f,{"drag-class":"on-dragging",onDrop:s.onDrop,orientation:"horizontal",class:"flex clean-list"},{default:O(()=>[(c(!0),d(y,null,C(s.board.groups,M=>(c(),S(u,{key:M.id},{default:O(()=>[w(l,{onSaveTaskDrop:s.saveTaskDrop,class:"draggable-item",group:M,onEditGroup:s.saveGroup,onSaveTask:s.saveTask,onOpenTaskDetails:s.openTaskDetails,onRemoveGroup:s.removeGroup,onLabelClicked:s.labelClicked,onDateChecked:s.dateChecked},null,8,["onSaveTaskDrop","group","onEditGroup","onSaveTask","onOpenTaskDetails","onRemoveGroup","onLabelClicked","onDateChecked"])]),_:2},1024))),128)),n.addBtnClicked?(c(),d("div",Pa,[o("form",{onSubmit:e[3]||(e[3]=k((...M)=>s.addGroup&&s.addGroup(...M),["prevent"])),class:"add-group-form"},[B(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=M=>n.group.title=M),"resize:none":"",placeholder:"Enter list title..."},null,512),[[m],[x,n.group.title]]),Ga,o("span",{class:"close-add-btn",onClick:e[2]||(e[2]=M=>n.addBtnClicked=!n.addBtnClicked)})],32)])):(c(),d("button",{key:0,onClick:e[0]||(e[0]=M=>n.addBtnClicked=!n.addBtnClicked),class:"add-group-btn"},Na))]),_:1},8,["onDrop"]),w(p,{groupId:n.currOpenTaskGroupId},null,8,["groupId"]),w(h,{class:D(s.isOpen),onCloseMenu:s.toggleMenu,onSetBackGroundImg:s.setBackGroundImg,onSetBackGroundColor:s.setBackGroundColor},null,8,["class","onCloseMenu","onSetBackGroundImg","onSetBackGroundColor"])],2)],4)):g("",!0)}var Ua=_(Aa,[["render",La]]);const Ja={props:{item:Object},data(){return{openDeleteMenu:!1}},methods:{toggleIsDone(t){this.$emit("toggleIsDone",t)},onSaveItemTitle(t,e){!e.target.innerText||(t.title=e.target.innerText,this.$emit("onSaveItemTitle",t))},toggleDeleteMenue(){this.openDeleteMenu=!this.openDeleteMenu},removeItem(t){this.$emit("removeItem",t)}}},Ra=o("a",{class:"checked-icon"},null,-1),Ea=[Ra],Fa={class:"remove-modal-container"},ja={class:"dots-icon-container"},Va={key:0,class:"remove-item-modal"},qa={class:"remove-item-header"},Ha=o("span",null,"Item actions",-1);function za(t,e,r,i,n,s){return c(),d(y,null,[r.item?(c(),d("div",{key:0,class:"checklist-checkbox",onClick:e[0]||(e[0]=a=>s.toggleIsDone(r.item.id))},Ea)):g("",!0),o("div",{onBlur:e[1]||(e[1]=a=>s.onSaveItemTitle(r.item,a)),class:"item-title",contenteditable:"",spellcheck:"false"},v(r.item.title),33),o("div",Fa,[o("span",ja,[o("a",{class:"dots-icon",onClick:e[2]||(e[2]=(...a)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...a))})]),n.openDeleteMenu?(c(),d("div",Va,[o("div",{class:"screen-toggle",onClick:e[3]||(e[3]=(...a)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...a))}),o("div",qa,[Ha,o("a",{class:"close-icon",onClick:e[4]||(e[4]=(...a)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...a))})]),o("div",{class:"delete-item",onClick:e[5]||(e[5]=a=>s.removeItem(r.item.id))},"Delete")])):g("",!0)])],64)}var Wa=_(Ja,[["render",za]]);const Ka={props:{checklist:Object,isAddItemsOpen1:Boolean},components:{checklistItemPreview:Wa},created(){},data(){return{checklistItemTitle:"",isAddItemsOpen:!1}},methods:{addChecklistItem(t){this.$emit("addChecklistItem",t,this.checklistItemTitle),this.checklistItemTitle=""},toggleIsDone(t){this.$emit("toggleIsDone",this.checklist.id,t)},isItemDone(t){return t.isDone?"done":""},toglleAddItems(){this.isAddItemsOpen=!this.isAddItemsOpen},removeChecklist(t){this.$emit("removeChecklist",t)},async onSaveChecklistTitle(t){t.target.innerText.trim()!==""&&(this.checklist.title=t.target.innerText,this.$emit("editChecklist",this.checklist))},async onSaveItemTitle(t){this.$emit("editChecklistItem",t,this.checklist.id)},removeChecklistItem(t){this.$emit("removeChecklistItem",this.checklist.id,t)}},computed:{donePercentage(){const t=this.checklist.items.length,r=this.checklist.items.filter(n=>n.isDone).length;return`${Math.floor(r*100/t)||0}%`},isComplited(){return this.donePercentage==="100%"?"done":""}}},Ya={key:0,class:"checklist-header"},Qa={class:"checklist-header-title flex"},Za=o("div",{class:"checklist-icon"},null,-1),Xa={class:"progress-bar-container"},er={class:"progress-percentage"},tr={class:"progress-bar"},sr={class:"background-bar"},or={key:1,class:"add-checklist-item-form"},nr={class:"flex"};function ar(t,e,r,i,n,s){const a=b("checklist-item-preview"),l=U("focus");return c(),d(y,null,[r.checklist?(c(),d("div",Ya,[o("div",Qa,[Za,o("h3",{onBlur:e[0]||(e[0]=(...u)=>s.onSaveChecklistTitle&&s.onSaveChecklistTitle(...u)),class:"checklist-title",contenteditable:"",spellcheck:"false"},v(r.checklist.title),33)]),o("button",{class:"delete-checklist",onClick:e[1]||(e[1]=u=>s.removeChecklist(r.checklist.id))}," Delete ")])):g("",!0),o("div",Xa,[o("div",null,[o("span",er,v(s.donePercentage),1)]),o("div",tr,[o("div",sr,[o("div",{class:D(["front-bar",s.isComplited]),style:I({width:s.donePercentage})},null,6)])])]),(c(!0),d(y,null,C(r.checklist.items,u=>(c(),d("div",{class:D(["checklist-items",s.isItemDone(u)]),key:u.id},[w(a,{item:u,onToggleIsDone:s.toggleIsDone,onOnSaveItemTitle:s.onSaveItemTitle,onRemoveItem:s.removeChecklistItem},null,8,["item","onToggleIsDone","onOnSaveItemTitle","onRemoveItem"])],2))),128)),n.isAddItemsOpen?(c(),d("div",or,[B(o("input",{class:"add-checklist-item-input",type:"text",placeholder:"Add an item","onUpdate:modelValue":e[2]||(e[2]=u=>n.checklistItemTitle=u)},null,512),[[l],[x,n.checklistItemTitle]]),o("div",nr,[o("button",{onClick:e[3]||(e[3]=u=>s.addChecklistItem(r.checklist.id)),class:"add-checklist-item-btn"}," Add"),o("a",{class:"close-checklist-icon",onClick:e[4]||(e[4]=(...u)=>s.toglleAddItems&&s.toglleAddItems(...u))})])])):(c(),d("button",{key:2,class:"open-add-item-btn",onClick:e[5]||(e[5]=(...u)=>s.toglleAddItems&&s.toglleAddItems(...u))}," Add an item "))],64)}var rr=_(Ka,[["render",ar]]);const ir={emits:["action"],methods:{onArchive(){this.$emit("action",{cbName:"archiveTask"})}}},lr=o("span",null,"Are you sure?",-1),cr=o("button",{class:"deny"},"No",-1);function dr(t,e,r,i,n,s){return c(),d("div",{onClick:e[1]||(e[1]=k(()=>{},["stop"])),class:"archive btn"},[lr,o("button",{onClick:e[0]||(e[0]=(...a)=>s.onArchive&&s.onArchive(...a)),class:"confirm"},"Yes"),cr])}var ur=_(ir,[["render",dr]]);const hr={emits:["action"],components:{},created(){},data(){return{filterBy:""}},methods:{onAddMember(t){this.$emit("action",{cbName:"addMemberToTask",payload:t})}},computed:{filteredMembers(){return this.$store.getters.filteredMembers(this.filterBy)}},unmounted(){}},gr={class:"members-list clean-list"},mr=["onClick"];function pr(t,e,r,i,n,s){return c(),d("div",{onClick:e[5]||(e[5]=k(()=>{},["stop"])),class:"members-action"},[B(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.filterBy=a),placeholder:"Search members"},null,512),[[x,n.filterBy]]),o("ul",gr,[(c(!0),d(y,null,C(s.filteredMembers,a=>(c(),d("li",{key:a._id,class:"user-preview",onClick:l=>s.onAddMember(a)},[o("div",{onMouseout:e[1]||(e[1]=k(()=>{},["stop"])),onMouseover:e[2]||(e[2]=k(()=>{},["stop"])),class:"icon",style:I({backgroundImage:`url(${a.imgUrl})`})},null,36),o("span",{onMouseout:e[3]||(e[3]=k(()=>{},["stop"])),onMouseover:e[4]||(e[4]=k(()=>{},["stop"]))},v(a.fullname),33)],8,mr))),128))])])}var kr=_(hr,[["render",pr]]);const _r={emits:["action"],methods:{async onUploadImg(t){const e=await P.uploadImgFromComp(t);this.$emit("action",{cbName:"uploadAttachment",payload:e.url})}}},vr={class:"clean-list body"},br=o("span",null,"Computer",-1);function fr(t,e,r,i,n,s){return c(),d("div",{onClick:e[3]||(e[3]=k(()=>{},["stop"])),class:"attach btn"},[o("ul",vr,[o("li",null,[o("label",{onClick:e[2]||(e[2]=k(()=>{},["stop"])),for:"file",class:"computer"},[br,o("input",{id:"file",type:"file",onChange:e[0]||(e[0]=k((...a)=>s.onUploadImg&&s.onUploadImg(...a),["stop"])),onClick:e[1]||(e[1]=k(()=>{},["stop"]))},null,32)])])])])}var yr=_(_r,[["render",fr]]);const Cr={props:{task:Object},emits:["action"],components:{},created(){},data(){return{createLabelOpen:!1,clrOpts:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563"],newLabel:{title:"",color:"red"}}},methods:{onLabel(t){this.$emit("action",{cbName:"toggleLabel",payload:t})},setNewLabelClr(t){this.newLabel.color=t},saveNewLabel(){this.$emit("action",{cbName:"saveNewLabel",payload:JSON.parse(JSON.stringify(this.newLabel))}),this.newLabel={title:"",color:""}},toggleCreateLabel(){this.createLabelOpen=!this.createLabelOpen},isChosen(t){return this.task.labelIds?this.task.labelIds.includes(t):!1}},computed:{labels(){return this.$store.getters.labels}},unmounted(){}},Ir={class:"header"},$r={key:0,class:"labels-title"},wr={key:1,class:"create-label-header-container"},Tr=o("span",null,"Create label",-1),Dr={class:"body label-list-container"},Sr={key:0,class:"clean-list"},Br=["onClick"],xr={key:0,class:"selected-icon"},Ar={key:1,class:"create-label-container"},Mr={for:""},Or=T(" Name "),Nr={class:"clean-list clr-opts"},Pr=["onClick"],Gr={key:0,class:"selected-icon"};function Lr(t,e,r,i,n,s){const a=U("focus");return c(),d("div",{onClick:e[4]||(e[4]=k(()=>{},["stop"])),class:"label btn"},[o("div",Ir,[n.createLabelOpen?(c(),d("div",wr,[o("button",{onClick:e[0]||(e[0]=(...l)=>s.toggleCreateLabel&&s.toggleCreateLabel(...l)),class:"back"}),Tr])):(c(),d("span",$r,"Labels"))]),o("div",Dr,[n.createLabelOpen?(c(),d("div",Ar,[o("label",Mr,[Or,B(o("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>n.newLabel.title=l),type:"text",class:"new-label-title"},null,512),[[x,n.newLabel.title],[a]])]),o("ul",Nr,[(c(!0),d(y,null,C(n.clrOpts,l=>(c(),d("li",{key:l,onClick:u=>s.setNewLabelClr(l),class:"clr-opt",style:I({backgroundColor:l})},[n.newLabel.color===l?(c(),d("div",Gr)):g("",!0)],12,Pr))),128))]),o("button",{onClick:e[3]||(e[3]=(...l)=>s.saveNewLabel&&s.saveNewLabel(...l)),class:"create-label-btn btn"},"Create")])):(c(),d("ul",Sr,[(c(!0),d(y,null,C(s.labels,l=>(c(),d("li",{onClick:u=>s.onLabel(l.id),class:"label-list-item flex",key:l,style:I({backgroundColor:l.color})},[T(v(l.title)+" ",1),s.isChosen(l.id)?(c(),d("a",xr)):g("",!0)],12,Br))),128)),o("button",{class:"btn create-new-label",onClick:e[1]||(e[1]=(...l)=>s.toggleCreateLabel&&s.toggleCreateLabel(...l))},"Create a new label")]))])])}var Ur=_(Cr,[["render",Lr]]);const Jr={emits:["action"],components:{},created(){},data(){return{title:"Checklist"}},methods:{addChecklist(){this.title.trim()!==""&&(this.$emit("togglePopup"),this.$emit("addChecklist"),this.$emit("action",{cbName:"addChecklist",payload:this.title}))}},computed:{},unmounted(){}},Rr=T(" Title "),Er=o("button",{class:"add-checklist-btn"},"Add",-1);function Fr(t,e,r,i,n,s){const a=U("focus");return c(),d("section",{onClick:e[2]||(e[2]=k(()=>{},["stop"])),class:"checklist-container"},[o("form",{onSubmit:e[1]||(e[1]=k((...l)=>s.addChecklist&&s.addChecklist(...l),["prevent"])),class:"checklist-form flex"},[o("label",null,[Rr,B(o("input",{type:"text",class:"checklist-title-input","onUpdate:modelValue":e[0]||(e[0]=l=>n.title=l)},null,512),[[a],[x,n.title]])]),Er],32)])}var jr=_(Jr,[["render",Fr]]);const Vr={emits:["action","togglePopup"],data(){return{date:{value:[]}}},mounted(){this.date.value=[new Date,new Date]},methods:{onSave(){this.$emit("action",{cbName:"setTaskDueDate",payload:this.date}),this.$emit("togglePopup")},onRemove(){this.$emit("action",{cbName:"removeTaskDueDate"}),this.$emit("togglePopup")}},computed:{startDate(){const t=L(this.date[0]);return`${t.date()}/${t.month()+1}/${t.year()}`},endDate(){const t=L(this.date[1]);return`${t.date()}/${t.month()+1}/${t.year()}`}},unmounted(){}},qr={class:"start-date"},Hr=o("p",{class:"lable"},"Start date",-1),zr={class:"date"},Wr={class:"due-date"},Kr=o("p",{class:"lable"},"Due date",-1),Yr={class:"date"},Qr={class:"buttons"};function Zr(t,e,r,i,n,s){const a=b("Datepicker");return c(),d("div",{onClick:e[3]||(e[3]=k(()=>{},["stop"])),class:"dates-container"},[w(a,{modelValue:n.date,"onUpdate:modelValue":e[0]||(e[0]=l=>n.date=l),partialRange:!1,inline:"",range:"",autoApply:""},null,8,["modelValue"]),o("div",qr,[Hr,o("p",zr,v(s.startDate),1)]),o("div",Wr,[Kr,o("p",Yr,v(s.endDate),1)]),o("div",Qr,[o("button",{class:"dates-btn btn",onClick:e[1]||(e[1]=(...l)=>s.onSave&&s.onSave(...l))},"Save"),o("button",{class:"dates-btn btn",onClick:e[2]||(e[2]=(...l)=>s.onRemove&&s.onRemove(...l))},"Remove")])])}var Xr=_(Vr,[["render",Zr]]);const ei={emits:["onAction"],components:{},created(){},data(){return{actionPopupOpen:!1}},methods:{onLocation(){},toggleActionPopup(){this.actionPopupOpen=!this.actionPopupOpen}},computed:{},unmounted(){}},ti=o("div",{class:"icon"},null,-1),si=o("button",{class:"location"},"Location",-1),oi=[ti,si];function ni(t,e,r,i,n,s){return c(),d("div",{onClick:e[0]||(e[0]=(...a)=>s.toggleActionPopup&&s.toggleActionPopup(...a)),class:"location btn"},oi)}var ai=_(ei,[["render",ni]]);const ri={props:{task:Object},emits:["action","actions","togglePopup"],async created(){const t=await P.queryPhotos();t.results.splice(6,t.results.length),this.unsplashPhotos=t.results},data(){return{colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"],unsplashPhotos:[]}},methods:{onToggleCoverColor(t){var e,r;if(((r=(e=this.task)==null?void 0:e.cover)==null?void 0:r.backgroundColor)===t)return this.onRemoveCover();this.$emit("action",{cbName:"chooseCover",payload:{type:"color",style:t}})},onToggleCoverImg(t){var e,r;if(((r=(e=this.task)==null?void 0:e.cover)==null?void 0:r.backgroundImage)===`url(${t})`)return this.onRemoveCover();this.$emit("action",{cbName:"chooseCover",payload:{type:"img",style:t}})},onRemoveCover(){this.$emit("action",{cbName:"removeCover"})},async onUploadImg(t){const e=await P.uploadImgFromComp(t),r=[{cbName:"uploadAttachment",payload:e.url},{cbName:"chooseCover",payload:{type:"img",style:e.url}}];this.$emit("actions",r)},toggleActionPopup(){this.$emit("togglePopup")},isChosenColor(t){var e;return{chosen:((e=this.task.cover)==null?void 0:e.backgroundColor)===t}},isChosenImg(t){var e;return{chosen:((e=this.task.cover)==null?void 0:e.backgroundImage)===`url(${t})`}}},unmounted(){}},ii={class:"body"},li={class:"cover-clrs-container"},ci=o("span",null,"Colors",-1),di={class:"clean-list cover-clrs"},ui=["onClick"],hi={class:"attachments-container"},gi=o("span",null,"Attachments",-1),mi=T(" Upload a cover image "),pi={class:"unsplash-photos-container"},ki=o("span",null,"Photos from Unsplash",-1),_i={key:0,class:"clean-list imgs-container"},vi=["onClick"];function bi(t,e,r,i,n,s){return c(),d("div",{onClick:e[4]||(e[4]=k(()=>{},["stop"])),class:"cover-action btn"},[o("div",ii,[r.task.cover?(c(),d("div",{key:0,onClick:e[0]||(e[0]=k((...a)=>s.onRemoveCover&&s.onRemoveCover(...a),["stop"])),class:"remove-cover"},"Remove cover")):g("",!0),o("div",li,[ci,o("ul",di,[(c(!0),d(y,null,C(n.colors,a=>(c(),d("li",{onClick:l=>s.onToggleCoverColor(a),class:D(["cover-clr",s.isChosenColor(a)]),key:a,style:I({backgroundColor:a})},null,14,ui))),128))])]),o("div",hi,[gi,o("button",{onClick:e[3]||(e[3]=k(()=>{},["stop"])),for:"file",class:"btn upload-cover-img"},[mi,o("input",{id:"file",type:"file",onChange:e[1]||(e[1]=k((...a)=>s.onUploadImg&&s.onUploadImg(...a),["stop"])),onClick:e[2]||(e[2]=k(()=>{},["stop"]))},null,32)])]),o("div",pi,[ki,n.unsplashPhotos&&n.unsplashPhotos.length?(c(),d("ul",_i,[(c(!0),d(y,null,C(n.unsplashPhotos,a=>(c(),d("li",{onClick:k(l=>s.onToggleCoverImg(a.urls.full),["stop"]),class:D(["img-container",s.isChosenImg(a.urls.full)]),style:I({backgroundImage:`url(${a.urls.thumb})`})},null,14,vi))),256))])):g("",!0)])])])}var fi=_(ri,[["render",bi]]);const yi={emits:["togglePopup","action"],props:{action:String,task:Object},components:{archiveAction:ur,membersAction:kr,attachmentAction:yr,labelAction:Ur,checklistAction:jr,datesAction:Xr,coverAction:fi,locationAction:ai},created(){console.log(this.task)},data(){return{}},methods:{onTogglePopup(){this.$emit("togglePopup")},onAction(t){this.$emit("action",t)},onActions(t){this.$emit("actions",t)},addChecklist(){this.$emit("addChecklist")}},computed:{actionTxt(){let t=this.action.substring(0,this.action.indexOf("-"));return t==="attachment"?"Attach From":t}},unmounted(){}},Ci={class:"header"};function Ii(t,e,r,i,n,s){return c(),d("div",{onClick:e[1]||(e[1]=k(()=>{},["stop"])),class:"action-popup"},[o("div",Ci,[T(v(s.actionTxt)+" ",1),o("div",{onClick:e[0]||(e[0]=(...a)=>s.onTogglePopup&&s.onTogglePopup(...a)),class:"icon btn close-popup"})]),r.action?(c(),S(H(r.action),{key:0,onTogglePopup:s.onTogglePopup,onAction:s.onAction,onAddChecklist:s.addChecklist,task:r.task},null,8,["onTogglePopup","onAction","onAddChecklist","task"])):g("",!0)])}var $i=_(yi,[["render",Ii]]);const wi={emits:["openActionPopup"],props:{action:String},methods:{openActionPopup(){this.$emit("openActionPopup",this.action)}},computed:{actionTxt(){return this.action.substring(0,this.action.indexOf("-"))},actionClass(){return this.action==="cover-action"?this.action:this.actionTxt}}},Ti=o("div",{class:"icon"},null,-1);function Di(t,e,r,i,n,s){return c(),d("div",{onClick:e[0]||(e[0]=(...a)=>s.openActionPopup&&s.openActionPopup(...a)),class:D(["btn btn-action",s.actionClass])},[Ti,o("span",null,v(s.actionTxt),1)],2)}var Si=_(wi,[["render",Di]]);const Bi={props:{groupId:String},components:{actionPopup:$i,actionBtn:Si,checklistDetails:rr},data(){return{task:null,descEditOpen:!1,newDesc:"",localGroupId:null,groupName:"",actionCmps:["members-action","label-action","checklist-action","dates-action","attachment-action","location-action","cover-action","archive-action"],currOpenAction:"",isAddItemsOpen:!1}},watch:{taskId:{async handler(){var t;try{if(!((t=this.$route.params)!=null&&t.taskId))return;const e=this.$route.params.taskId,r=await this.$store.dispatch({type:"getGroupByTask",taskId:e});this.localGroupId=r.id,this.groupName=r.title,this.task=await this.$store.dispatch({type:"getTaskById",taskId:e,groupId:this.groupId||this.localGroupId})}catch(e){console.log(e)}},immediate:!0}},methods:{toggleAction(t){this.currOpenAction=this.currOpenAction?"":t},async saveTask(t){return t=JSON.parse(JSON.stringify(t)),this.$store.dispatch({type:"saveTask",taskToSave:t,groupId:this.groupId||this.localGroupId})},async onRemoveAttachment(t){const e=this.task.attachments.findIndex(r=>r.id===t);this.task.attachments.splice(e,1),this.task.cover&&delete this.task.cover,this.saveTask(this.task)},async onAction({cbName:t,payload:e=null}){if(await this.$store.dispatch({type:t,taskId:this.task.id,groupId:this.localGroupId,payload:e}),t==="archiveTask")return this.onCloseDetails();const r=this.$route.params.taskId;this.task=await this.$store.dispatch({type:"getTaskById",taskId:r,groupId:this.groupId||this.localGroupId})},async onActions(t){await this.$store.dispatch({type:t[0].cbName,taskId:this.task.id,groupId:this.localGroupId,payload:t[0].payload}),await this.$store.dispatch({type:t[1].cbName,taskId:this.task.id,groupId:this.localGroupId,payload:t[1].payload});const e=this.$route.params.taskId;this.task=await this.$store.dispatch({type:"getTaskById",taskId:e,groupId:this.groupId||this.localGroupId})},async onSaveTitle(t){this.task.title=t.target.innerText,await this.saveTask(this.task)},async onSaveDesc(){this.task.description=this.newDesc,await this.saveTask(this.task),this.toggleDescEdit()},onMakeCover(t){this.onAction({cbName:"chooseCover",payload:{type:"img",style:t}})},onCloseDetails(){const t=this.$route.fullPath,e=t.substring(0,t.indexOf("/task"));this.$router.push(e)},toggleDescEdit(){this.newDesc=this.task.description,this.descEditOpen=!this.descEditOpen},setPopupMode(t){this.isActionPopupOpen=t},getLabelById(t){return this.$store.getters.labelById(t)},getTime(t){return L(+t).fromNow()},addChecklistItem(t,e){this.onAction({cbName:"addChecklistItem",payload:{checklistId:t,title:e}})},toggleIsDone(t,e){this.onAction({cbName:"toggleIsDone",payload:{checklistId:t,itemId:e}})},isItemDone(t){return t.isDone?"done":""},addChecklist(){},removeChecklist(t){this.onAction({cbName:"removeChecklist",payload:t})},editChecklist(t){this.onAction({cbName:"editChecklist",payload:t})},editChecklistItem(t,e){this.onAction({cbName:"editChecklistItem",payload:{itemToSave:t,checklistId:e}})},removeChecklistItem(t,e){this.onAction({cbName:"removeChecklistItem",payload:{checklistId:t,itemId:e}})},toggleTaskDone(t){console.log(t),this.onAction({cbName:"toggleTaskDone",payload:{taskId:t}})}},computed:{taskId(){return this.$route.params.taskId},descTxt(){return"description"in this.task&&this.task.description?this.task.description:"Add a more detailed description..."},isFull(){return{empty:this.task.description}},open(){return{open:this.isActionPopupOpen}},timeString(){var t=L(this.task.dueDate.endDate).toLocaleString();return t=t.substring(0,t.length-9),t},taskStatus(){return this.task.dueDate.isDone?"complete":this.task.dueDate.endDate<Date.now()?"overdue":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24?"due soon":""},statusColor(){return{overDue:this.task.dueDate.endDate<Date.now(),"due-soon":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24,"task-done":this.task.dueDate.isDone}},checkboxDone(){return{done:this.task.dueDate.isDone}}},unmounted(){}},xi={class:"task-details-header"},Ai=o("div",{class:"icon"},null,-1),Mi={class:"title-container"},Oi={class:"group-txt"},Ni=T(" in list: "),Pi={class:"main-details"},Gi={class:"main-content"},Li={class:"top-actions-container task-layout"},Ui={class:"members-container"},Ji=o("small",null,"Members:",-1),Ri={class:"members"},Ei={key:0,class:"labels-container"},Fi=o("small",null,"Labels",-1),ji={class:"labels-list"},Vi={key:1,class:"due-date-container"},qi=o("small",null,"Due date",-1),Hi=o("span",{class:"checked-icon"},null,-1),zi=[Hi],Wi={class:"due-date"},Ki={class:"date"},Yi={class:"description-container"},Qi=o("div",{class:"description-header"},[o("div",{class:"icon"}),o("h3",null,"Description")],-1),Zi={class:"desc-actions"},Xi=o("button",{class:"save-new-list-btn"},"Save",-1),el={key:0,class:"attachments-container"},tl=o("div",{class:"attachments-header"},[o("div",{class:"icon"}),o("h3",null,"Attachments")],-1),sl={class:"img-container"},ol=["src"],nl={class:"attachment-details"},al={class:"name"},rl=o("a",{class:"attachment-name-icon"},null,-1),il={class:"attachment-actions"},ll=["onClick"],cl={class:"attacment-make-cover"},dl=o("a",{class:"make-cover-icon"},null,-1),ul=["onClick"],hl={class:"actions"},gl=o("h3",{class:"actions-title"},"Add to card",-1),ml=o("div",{class:"placeholder"},null,-1);function pl(t,e,r,i,n,s){var p,h;const a=b("action-popup"),l=b("action-btn"),u=b("checklist-details"),f=U("focus");return n.task?(c(),d("div",{key:0,onClick:e[10]||(e[10]=k((...m)=>s.onCloseDetails&&s.onCloseDetails(...m),["stop"])),class:"task-details-container"},[n.currOpenAction?(c(),S(a,{key:0,onAction:s.onAction,onActions:s.onActions,onTogglePopup:s.toggleAction,onAddChecklist:s.addChecklist,action:n.currOpenAction,task:n.task},null,8,["onAction","onActions","onTogglePopup","onAddChecklist","action","task"])):g("",!0),n.task?(c(),d("section",{key:1,onClick:e[8]||(e[8]=k(()=>{},["stop"])),class:D(["task-details",{"cover-open":n.task.cover}])},[n.task.cover?(c(),d("div",{key:0,style:I(n.task.cover),class:"cover"},[w(l,{onOpenActionPopup:s.toggleAction,action:"cover-action"},null,8,["onOpenActionPopup"])],4)):g("",!0),o("header",xi,[Ai,o("div",Mi,[o("h2",{onBlur:e[0]||(e[0]=(...m)=>s.onSaveTitle&&s.onSaveTitle(...m)),class:"title",contenteditable:"",spellcheck:"false"},v(n.task.title),33),o("div",Oi,[Ni,o("span",null,v(n.groupName),1)])])]),o("main",Pi,[o("section",Gi,[o("div",Li,[o("div",Ui,[Ji,o("ul",Ri,[(c(!0),d(y,null,C(n.task.members,m=>(c(),d("li",{class:"member",style:I({backgroundImage:`url(${m.imgUrl})`})},null,4))),256)),o("li",{onClick:e[1]||(e[1]=k(m=>s.toggleAction("members-action"),["stop"])),class:"member add icon"})])]),(p=n.task.labelIds)!=null&&p.length?(c(),d("section",Ei,[Fi,o("ul",ji,[(c(!0),d(y,null,C(n.task.labelIds,m=>(c(),d("li",{class:"label",key:m,style:I({backgroundColor:s.getLabelById(m).color})},v(s.getLabelById(m).title),5))),128))])])):g("",!0),(h=n.task.dueDate)!=null&&h.endDate?(c(),d("div",Vi,[qi,o("div",{class:D([s.checkboxDone,"date-display flex align-center"])},[o("div",{onClick:e[2]||(e[2]=m=>s.toggleTaskDone(n.task.id)),class:"dueDate-checkbox"},zi),o("div",Wi,[o("span",Ki,v(s.timeString),1),o("span",{class:D([s.statusColor,"mini-status"])},v(s.taskStatus),3)])],2)])):g("",!0)]),o("div",Yi,[Qi,n.descEditOpen?(c(),d("form",{key:1,class:"description-edit-form task-layout",onSubmit:e[6]||(e[6]=k((...m)=>s.onSaveDesc&&s.onSaveDesc(...m),["prevent"]))},[B(o("textarea",{class:"description-edit","onUpdate:modelValue":e[4]||(e[4]=m=>n.newDesc=m),placeholder:"Add a more detailed description..."},null,512),[[f],[x,n.newDesc]]),o("div",Zi,[Xi,o("button",{onClick:e[5]||(e[5]=k((...m)=>s.toggleDescEdit&&s.toggleDescEdit(...m),["stop"])),class:"icon close"})])],32)):(c(),d("div",{key:0,onClick:e[3]||(e[3]=k((...m)=>s.toggleDescEdit&&s.toggleDescEdit(...m),["stop"])),class:D(["description task-layout",s.isFull])},[o("span",null,v(s.descTxt),1)],2))]),n.task.attachments&&n.task.attachments.length?(c(),d("div",el,[tl,(c(!0),d(y,null,C(n.task.attachments,m=>(c(),d("div",{class:"attachment-thumbnail task-layout",key:m.id},[o("div",sl,[o("img",{src:m.url,alt:""},null,8,ol)]),o("div",nl,[o("span",al,[T(v(m.name)+" ",1),rl]),o("div",il,[o("span",null,"Added "+v(s.getTime(m.createdAt))+" -",1),o("small",{class:"attacment-delete",onClick:M=>s.onRemoveAttachment(m.id)},"Delete",8,ll),o("div",cl,[dl,o("span",{class:"attacment-cover-title",onClick:M=>s.onMakeCover(m.url)},"Make cover",8,ul)])])])]))),128))])):g("",!0),(c(!0),d(y,null,C(n.task.checklists,m=>(c(),d("div",{class:"checklist-container",key:m.id},[w(u,{checklist:m,isAddItemsOpen1:n.isAddItemsOpen,onAddChecklistItem:s.addChecklistItem,onToggleIsDone:s.toggleIsDone,onRemoveChecklist:s.removeChecklist,onEditChecklist:s.editChecklist,onEditChecklistItem:s.editChecklistItem,onRemoveChecklistItem:s.removeChecklistItem},null,8,["checklist","isAddItemsOpen1","onAddChecklistItem","onToggleIsDone","onRemoveChecklist","onEditChecklist","onEditChecklistItem","onRemoveChecklistItem"])]))),128))]),o("aside",hl,[gl,ml,(c(!0),d(y,null,C(n.actionCmps,m=>(c(),S(l,{onOpenActionPopup:s.toggleAction,key:m,action:m},null,8,["onOpenActionPopup","action"]))),128))])]),o("button",{onClick:e[7]||(e[7]=(...m)=>s.onCloseDetails&&s.onCloseDetails(...m)),class:"btn close icon"})],2)):g("",!0),n.currOpenAction?(c(),d("div",{key:2,onClick:e[9]||(e[9]=k((...m)=>s.toggleAction&&s.toggleAction(...m),["stop"])),class:"clickable-background"})):g("",!0)])):g("",!0)}var kl=_(Bi,[["render",pl]]),_l=[{path:"/board",name:"board-app",component:bo},{path:"/board/:boardId",name:"board-details",component:Ua,children:[{path:"task/:taskId",name:"task-details",component:kl}]}];const vl={components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}};function bl(t,e,r,i,n,s){return c(),d("section",null,"This is a user profile")}var fl=_(vl,[["render",bl]]);const yl={components:{},created(){},data(){return{user:{username:"",password:"",fullname:""},Vue3GoogleOauth:se("Vue3GoogleOauth")}},methods:{onUserAction(){if(this.currAction==="login")return this.login();this.signup()},onUserGoogleAction(){if(this.currAction==="login")return this.loginWithGoogle();this.signupWithGoogle()},async loginWithGoogle(){try{const t=await this.$gAuth.signIn(),e={fullname:t.Du.tf,username:t.Du.tv};t&&await N.loginWithGoogle(e),this.$router.push("/board")}catch(t){console.log(t)}},async signupWithGoogle(){try{const t=await this.$gAuth.signIn();console.log(t);const e={fullname:t.Du.tf,username:t.Du.tv,imgUrl:t.Du.eN};t&&await N.signupWithGoogle(e),this.$router.push("/board")}catch(t){console.log(t)}},async login(){try{await N.login(this.user),await this.$store.dispatch("loadUser"),this.$router.push("/board")}catch(t){console.log(t)}},async logout(){try{await N.logout(),this.$store.dispatch("loadUser")}catch(t){console.log(t)}},async signup(){try{await N.signup(this.user),this.$store.dispatch("loadUser"),this.$router.push("/board")}catch(t){console.log(t)}}},computed:{currAction(){return this.$route.params.action},currActionTxt(){return this.currAction==="login"?"Log in":"Sign up"}},unmounted(){}},Cl={class:"auth-form-container"},Il={class:"title"},$l=o("div",{class:"action-options-seperator"},"OR",-1),wl=o("div",{class:"icon"},null,-1),Tl=o("span",null,"Continue with Google",-1),Dl=[wl,Tl];function Sl(t,e,r,i,n,s){return c(),d("section",{class:D(["auth-actions-container",s.currAction])},[o("div",Cl,[o("h1",Il,v(s.currActionTxt)+" to Twello",1),o("form",{class:"auth-input-form",onSubmit:e[3]||(e[3]=k((...a)=>s.onUserAction&&s.onUserAction(...a),["prevent","stop"]))},[B(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.user.username=a),type:"email",class:"username",placeholder:"Enter your email",required:""},null,512),[[x,n.user.username]]),B(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.user.password=a),type:"password",class:"password",placeholder:"Enter your password",required:""},null,512),[[x,n.user.password]]),s.currAction==="signup"?B((c(),d("input",{key:0,"onUpdate:modelValue":e[2]||(e[2]=a=>n.user.fullname=a),type:"text",class:"fullname",placeholder:"Enter full name",required:""},null,512)),[[x,n.user.fullname]]):g("",!0),o("button",null,v(s.currActionTxt),1)],32),$l,o("button",{onClick:e[4]||(e[4]=(...a)=>s.onUserGoogleAction&&s.onUserGoogleAction(...a)),class:"google-action"},Dl)])],2)}var Bl=_(yl,[["render",Sl]]),xl=[{path:"/auth/:action",name:"login",component:Bl},{path:"/user/:username",name:"user-profile",component:fl}];const Al=oe({history:ne(),routes:[{path:"/",name:"home",component:js},..._l,...xl]});var Ml={state:{boards:[],board:{}},getters:{boards({boards:t}){return JSON.parse(JSON.stringify(t))},board({board:t}){return JSON.parse(JSON.stringify(t))},labels({board:t}){return JSON.parse(JSON.stringify(t.labels))},labelById:({board:t})=>e=>JSON.parse(JSON.stringify(t.labels.find(r=>r.id===e))),filteredMembers:({board:t})=>e=>{const r=new RegExp(e);return JSON.parse(JSON.stringify(t.members.filter(i=>r.test(i.username)||r.test(i.fullname))))},starredBoards(t,e,r){return JSON.parse(JSON.stringify(t.boards.filter(i=>{var n;return(n=i.starredBy)==null?void 0:n.includes(r.userModule.loggedInUser._id)})))}},mutations:{setBoards(t,{boards:e}){t.boards=e},saveBoard(t,{savedBoard:e}){const r=t.boards.findIndex(i=>i._id===e._id);r!==-1?t.boards.splice(r,1,e):t.boards.unshift(e)},setBoard(t,{boardId:e}){const r=t.boards.find(i=>i._id===e);if(!r)return console.log("Couldnt find board");t.board=r},removeGroup(t,{groupId:e}){const r=t.board.groups.findIndex(i=>i.id===e);t.board.groups.splice(r,1)}},actions:{async loadBoards({commit:t,rootState:e}){try{const r=await $.query({user:e.userModule.loggedInUser});t({type:"setBoards",boards:r})}catch(r){console.log(r)}},async saveBoard({commit:t},{boardToSave:e,isFromSocket:r=!1}){try{const i=await $.save(e);console.log(i),t({type:"saveBoard",savedBoard:i}),t({type:"setBoard",boardId:e._id}),r||G.emit("board-updated",i)}catch(i){console.log(i)}},async updateBoard({commit:t},{boardToUpdate:e}){},getTaskById({state:t},{taskId:e,groupId:r}){let n=t.board.groups.find(s=>s.id===r).tasks.find(s=>s.id===e);return n=JSON.parse(JSON.stringify(n)),n.groupId=r,n},async saveTask({state:t,dispatch:e,commit:r},{taskToSave:i,groupId:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.saveTask(a,i,s,n);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async saveGroup({state:t,dispatch:e},{groupToSave:r,activity:i}){try{const n=JSON.parse(JSON.stringify(t.board)),s=$.saveGroup(n,r);await e({type:"saveBoard",boardToSave:s})}catch(n){console.log(n)}},async removeGroup({state:t,dispatch:e,commit:r},{groupId:i,activity:n}){try{const s=JSON.parse(JSON.stringify(t.board)),a=$.removeGroup(s,i,n);await e({type:"saveBoard",boardToSave:a})}catch(s){console.log(s)}},async archiveTask({state:t,dispatch:e,commit:r},{taskId:i,groupId:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.archiveTask(a,i,n,s);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async setTaskDueDate({state:t,dispatch:e,commit:r},{taskId:i,groupId:n,payload:s,activity:a}){try{const l=JSON.parse(JSON.stringify(t.board)),u=await $.saveTaskDueDate(l,i,n,s,a);await e({type:"saveBoard",boardToSave:u})}catch(l){console.log(l)}},async removeTaskDueDate({state:t,dispatch:e,commit:r},{taskId:i,groupId:n}){try{const s=JSON.parse(JSON.stringify(t.board)),a=await $.removeTaskDueDate(s,i,n);await e({type:"saveBoard",boardToSave:a})}catch(s){console.log(s)}},async toggleTaskDone({state:t,dispatch:e,commit:r},{taskId:i,groupId:n,payload:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.toggleTaskDone(a,i,n,s);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async uploadAttachment({state:t,dispatch:e,commit:r},{taskId:i,groupId:n,payload:s,activity:a}){try{const l=JSON.parse(JSON.stringify(t.board)),u=await $.saveAttachment(l,i,n,s,a);await e({type:"saveBoard",boardToSave:u})}catch(l){console.log(l)}},async setBackGroundImg({state:t,dispatch:e},{imgUrl:r,activity:i}){try{const n=JSON.parse(JSON.stringify(t.board));n.style.color="",n.style.imgUrl=r,await e({type:"saveBoard",boardToSave:n})}catch(n){console.log(n)}},async setBackGroundColor({state:t,dispatch:e},{color:r,activity:i}){try{const n=JSON.parse(JSON.stringify(t.board));n.style.imgUrl="",n.style.color=r,await e({type:"saveBoard",boardToSave:n})}catch(n){console.log(n)}},async saveGroupDrop({state:t,dispatch:e,commit:r},{fromIdx:i,toIdx:n}){try{const s=JSON.parse(JSON.stringify(t.board)),a=await $.saveGroupDrop(s,i,n);await e({type:"saveBoard",boardToSave:a})}catch(s){console.log(s)}},async getGroupByTask({state:t},{taskId:e}){return t.board.groups.find(r=>r.tasks.find(i=>i.id===e))},async chooseCover({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.saveCover(a,r,i,n,s);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async toggleLabel({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{console.log(r,i,n);const a=JSON.parse(JSON.stringify(t.board)),l=await $.toggleLabel(a,r,i,n,s);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async saveNewLabel({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.saveNewLabel(a,n,s);await e({type:"saveBoard",boardToSave:l.boardToSave}),await e({type:"toggleLabel",taskId:r,groupId:i,payload:l.id})}catch(a){console.log(a)}},async removeCover({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.removeCover(a,r,i,s);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async addChecklist({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.addChecklist(a,r,i,n,s);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async addChecklistItem({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.addChecklistItem(a,r,i,n,s);console.log(l),await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async toggleIsDone({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),p=a.groups.find(h=>h.id===i).tasks.find(h=>h.id===r).checklists.find(h=>h.id===n.checklistId).items.find(h=>h.id===n.itemId);p.isDone=!p.isDone,await e({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async removeChecklist({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),u=a.groups.find(p=>p.id===i).tasks.find(p=>p.id===r),f=u.checklists.findIndex(p=>p.id===n);u.checklists.splice(f,1),await e({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async editChecklist({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),u=a.groups.find(p=>p.id===i).tasks.find(p=>p.id===r),f=u.checklists.findIndex(p=>p.id===n.id);u.checklists.splice(f,1,n),await e({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async editChecklistItem({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),f=a.groups.find(h=>h.id===i).tasks.find(h=>h.id===r).checklists.find(h=>h.id===n.checklistId),p=f.items.findIndex(h=>h.id===n.itemToSave.id);f.items.splice(p,1,n.itemToSave),await e({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async addMember({state:t,dispatch:e},{user:r}){try{const i=JSON.parse(JSON.stringify(t.board)),n=await $.addMember(i,r);console.log(n),await e({type:"saveBoard",boardToSave:n})}catch(i){console.log(i)}},async removeChecklistItem({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{console.log(n);const a=JSON.parse(JSON.stringify(t.board)),f=a.groups.find(h=>h.id===i).tasks.find(h=>h.id===r).checklists.find(h=>h.id===n.checklistId),p=f.items.findIndex(h=>h.id===n.itemId);f.items.splice(p,1),await e({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async addMemberToTask({state:t,dispatch:e},{taskId:r,groupId:i,payload:n,activity:s}){try{const a=JSON.parse(JSON.stringify(t.board)),l=await $.addMemberToTask(a,r,i,n);await e({type:"saveBoard",boardToSave:l})}catch(a){console.log(a)}},async starredBoardToggle({dispatch:t,rootState:e},{board:r}){try{const i=e.userModule.loggedInUser._id,n=await $.starredBoardToggle(r,i);await t({type:"saveBoard",boardToSave:n})}catch(i){console.log(i)}}}},Ol={state:{loggedInUser:""},getters:{loggedInUser({loggedInUser:t}){return t}},mutations:{setLoggedInUser(t,{user:e}){t.loggedInUser=e}},actions:{async loadUser({commit:t,dispatch:e}){t({type:"setIsReady",isReady:!1}),setTimeout(async()=>{const r=R.getLoggedInUser();t({type:"setLoggedInUser",user:r}),await e("loadBoards"),t({type:"setIsReady",isReady:!0})},1e3)}}};const Nl=ae({strict:!0,state:{isReady:!1},getters:{isReady({isReady:t}){return t}},mutations:{setIsReady(t,{isReady:e}){t.isReady=e}},actions:{},modules:{boardModule:Ml,userModule:Ol}}),Pl={mounted:t=>{t.focus()}},Gl={bind:function(t,{expression:e},{context:r}){t.clickOutside=({clientX:i,clientY:n})=>{var{left:s,top:a,width:l,height:u}=t.getBoundingCLientRect();i>s&&i<s+l&&n>a&&n<a+u||r[e]()},setTimeout(()=>{document.addEventListener("click",t.clickOutside)},0)},unbind:t=>{document.removeEventListener("click",t.clickOutside)}};const Ll="1085095174420-s26dkcaicaiubfjpebgqjpb3dopricv9.apps.googleusercontent.com";re(Os).use(Nl).use(Al).use(ie,{clientId:Ll,scope:"email",prompt:"consent"}).directive("focus",Pl).directive("close",Gl).component("Datepicker",le).mount("#app");
