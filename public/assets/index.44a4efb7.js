import{r as b,o as l,c as d,a as o,b as $,w as O,d as D,F as y,e as I,n as C,t as k,f as oe,g as z,h as ne,i as G,j as B,v as A,k as M,l as _,m as S,p as m,q as w,s as re,u as W,x as ae,C as K,D as Y,y as Q,z as Z,B as X,A as ie,E as le,G as ce,H as de,I as ue,J as he,U as ge}from"./vendor.5163db7f.js";const me=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};me();var p=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const pe={},ke={class:"main-header home-header flex space-between align-center"},_e=o("div",{class:"logo flex align-center"},[o("span",{class:"logo-icon"}),o("span",{class:"logo-txt"},"Twello")],-1),be={class:"home-nav"},ve={class:"clean-list flex"},fe={class:"login-btn"},ye=D("Log in"),Ce={class:"signup-btn"},Ie=D("Sign up");function $e(e,t){const n=b("router-link");return l(),d("header",ke,[_e,o("nav",null,[o("div",be,[o("ul",ve,[o("li",null,[o("button",fe,[$(n,{to:"/auth/login",class:"login-link"},{default:O(()=>[ye]),_:1})])]),o("li",null,[o("button",Ce,[$(n,{to:"/auth/signup",class:"signup-board"},{default:O(()=>[Ie]),_:1})])])])])])])}var we=p(pe,[["render",$e]]);const De={},Te={class:"main-header login-logout-header"},Be=o("div",{class:"logo flex align-center"},[o("span",{class:"logo-img"}),o("span",{class:"logo-txt"},"Twello")],-1),Se=[Be];function Ae(e,t){return l(),d("header",Te,Se)}var xe=p(De,[["render",Ae]]);const Oe={props:{boards:Array},emits:["closeModal"],created(){},methods:{goToBoard(e){this.$router.push(`/board/${e._id}`),this.onClose()},onClose(){this.$emit("closeModal")},img(e){var t;return`url(${((t=e.style)==null?void 0:t.imgUrl)||""})`}},computed:{}},Me={class:"header-board-list"},Ne={class:"header flex space-between align-center"},Pe=o("span",{class:"title"},"Boards",-1),Ge=o("a",{class:"close-board-list-icon"},null,-1),Le=[Ge],Ue={class:"board-list clean-list"},Je=["onClick"];function Re(e,t,n,i,r,s){return l(),d("div",Me,[o("div",Ne,[Pe,o("button",{class:"close-btn btn",onClick:t[0]||(t[0]=(...a)=>s.onClose&&s.onClose(...a))},Le)]),o("ul",Ue,[(l(!0),d(y,null,I(n.boards,a=>(l(),d("li",{class:"board flex align-center",onClick:c=>s.goToBoard(a),key:a._id},[o("div",{class:"mini-pic",style:C({backgroundImage:s.img(a)})},null,4),o("span",null,k(a.title),1)],8,Je))),128))])])}var Ee=p(Oe,[["render",Re]]);const U={makeId:Fe,makeExtId:je,getRandomInt:Ve,getRandomColor:qe,resetLocalStorage:He,save:ze,load:We};function Fe(e="",t=13){let n=e;const i="0123456789";for(let r=0;r<t;r++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}function je(e=13){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function Ve(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function qe(){const e="0123456789ABCDEF";let t="#";for(let n=0;n<6;n++)t+=e[Math.floor(Math.random()*16)];return t}function He(){localStorage.clear(),sessionStorage.clear(),window.location.reload()}function ze(e,t){localStorage.setItem(e,JSON.stringify(t))}function We(e){return JSON.parse(localStorage.getItem(e))||null}const Ke=oe({accessKey:"LM4Rpq3DaqATHDr2uryLi9FbEwE5CJhRJR6qRGc5Nu0"}),L={uploadImgFromComp:Ze,queryPhotos:Ye,getImgColor:Qe};async function Ye(e="vacation"){try{return(await Ke.search.getPhotos({query:e,orientation:"landscape"})).response}catch(t){throw console.log("Couldnt get photos from unsplash",t),t}}async function Qe(e){return(await new ne().getColorAsync(e)).hex}async function Ze(e){const t="twello",i="https://api.cloudinary.com/v1_1/twello/image/upload",r=new FormData;r.append("file",e.target.files[0]),r.append("upload_preset",t);try{return(await z.post(i,r)).data}catch(s){throw console.log(s),s}}const Xe="/api/";var et=z.create({withCredentials:!0});const x={get(e,t){return V(e,"GET",t)},post(e,t){return V(e,"POST",t)},put(e,t){return V(e,"PUT",t)},delete(e,t){return V(e,"DELETE",t)}};async function V(e,t="GET",n=null){try{return(await et({url:`${Xe}${e}`,method:t,data:n,params:t==="GET"?n:null})).data}catch(i){throw console.log(`Had Issues ${t}ing to the backend, endpoint: ${e}, with data: ${n}`),console.dir(i),i.response&&i.response.status===401&&window.location.assign("/login"),i}}function tt(e){const t=sessionStorage.getItem(e);return t?JSON.parse(t):null}function st(e,t){sessionStorage[e]=JSON.stringify(t)}const ee={load:tt,save:st},te="userLocDB",se="user",J={save:ot,getLoggedInUser:nt,getByUsername:rt,getUsersBy:at};function ot(e){return ee.save(te,e)}function nt(){return ee.load(te)}async function rt(e){return await x.get(`${se}/member/${e}`)}async function at(e){return await x.get(`${se}/by/${e}`)}const R={add:lt,getActivityTxt:ct};function it({type:e,itemName:t,containerName:n="",ids:i={boardId:"",groupId:"",taskId:""}}){return{id:U.makeId("a"),createdAt:Date.now(),user:J.getLoggedInUser(),type:e,itemName:t,containerName:n,ids:i}}function lt(e){var n;console.log(e);const t=it(e);return(n=e.board.activities)!=null&&n.length?e.board.activities.unshift(t):e.board.activities=[t],console.log(e.board),Promise.resolve(e.board)}function ct(e,t,n){let i=` ${e.type} `;return e.type==="renamed"?i+=`this ${t}`:i+=`${n===e.itemName?`this ${t}`:e.itemName} 
    ${e.type==="added"?"to":"from"} ${e.containerName===n?`this ${t}`:e.containerName}`}const T={query:dt,save:ut,remove:ht,saveTask:mt,saveGroup:kt,removeGroup:gt,archiveTask:pt,saveAttachment:yt,saveGroupDrop:_t,saveCover:$t,toggleLabel:wt,saveNewLabel:Dt,removeCover:Tt,getEmptyBoard:xt,addChecklist:Ct,addChecklistItem:It,addMember:Bt,saveTaskDueDate:bt,removeTaskDueDate:vt,toggleTaskDone:ft,addMemberToTask:St,starredBoardToggle:At},q="board";async function dt(e={}){return await x.get(q,e)}function ut(e){return e._id?Nt(e):Pt(e)}async function ht(e){return await x.remove(`${q}/${e}`)}function gt(e,t,n){const i=e.groups.findIndex(r=>r.id===t);return i===-1&&console.log("group not found"),e.groups.splice(i,1),e}async function mt(e,t,n){const i=e.groups.find(r=>r.id===n);if(!t.id)t.id=U.makeId("t"),t.createdAt=Date.now(),i.tasks.push(t),e=await R.add({board:e,type:"added",itemName:t.title,containerName:i.title,ids:{groupId:n,taskId:t.id}});else{console.log("Im here updating!");const r=i.tasks.findIndex(s=>s.id===t.id);if(r===-1)return Promise.reject("Couldnt find task to edit");i.tasks.splice(r,1,t)}return Promise.resolve(e)}function pt(e,t,n,i){const r=e.groups.find(a=>a.id===n),s=r.tasks.findIndex(a=>a.id===t);return r.tasks.splice(s,1),Promise.resolve(e)}async function kt(e,t){if(!t.id)t.id=U.makeId("g"),t.tasks=[],e.groups.push(t),e=await R.add({board:e,type:"added",itemName:t.title,containerName:"this board"});else{const n=e.groups.findIndex(i=>i.id===t.id);if(n===-1)return Promise.reject("Couldnt find group to edit");e.groups.splice(n,1,t)}return e}function _t(e,t,n){const i=e.groups.splice(t,1)[0];return e.groups.splice(n,0,i),Promise.resolve(e)}async function bt(e,t,n,i,r){const a=e.groups.find(u=>u.id===n).tasks.find(u=>u.id===t),c=Ot(i);return a.dueDate=c,e=await R.add({board:e,type:"added",itemName:"due date",containerName:a.title,ids:{groupId:n,taskId:t}}),Promise.resolve(e)}function vt(e,t,n){const r=e.groups.find(s=>s.id===n).tasks.find(s=>s.id===t);return delete r.dueDate,Promise.resolve(e)}function ft(e,t,n){const r=e.groups.find(s=>s.id===n).tasks.find(s=>s.id===t);return r.dueDate.isDone=!r.dueDate.isDone,Promise.resolve(e)}function yt(e,t,n,i,r){const a=e.groups.find(u=>u.id===n).tasks.find(u=>u.id===t),c=Mt(i);return"attachments"in a?a.attachments.unshift(c):a.attachments=[c],Promise.resolve(e)}function Ct(e,t,n,i,r){const a=e.groups.find(u=>u.id===n).tasks.find(u=>u.id===t),c={id:U.makeId("c"),title:i,createdAt:Date.now(),items:[]};return"checklists"in a?a.checklists.push(c):a.checklists=[c],Promise.resolve(e)}function It(e,t,n,i,r){const c=e.groups.find(v=>v.id===n).tasks.find(v=>v.id===t).checklists.find(v=>v.id===i.checklistId),u={id:U.makeId("i"),title:i.title,createdAt:Date.now(),isDone:!1};return c.items.push(u),Promise.resolve(e)}async function $t(e,t,n,i,r){let s={type:i.type,backgroundColor:i.style};i.type!=="color"&&(s.backgroundImage=`url(${i.style})`,s.backgroundColor=await L.getImgColor(i.style));const c=e.groups.find(u=>u.id===n).tasks.find(u=>u.id===t);return c.cover=s,Promise.resolve(e)}function wt(e,t,n,i,r){var c;const a=e.groups.find(u=>u.id===n).tasks.find(u=>u.id===t);if((c=a.labelIds)!=null&&c.length){const u=a.labelIds.findIndex(v=>v===i);u!==-1?a.labelIds.splice(u,1):a.labelIds.push(i)}else a.labelIds=[i];return Promise.resolve(e)}function Dt(e,t,n){return t.id=U.makeId("l"),e.labels.unshift(t),Promise.resolve({boardToSave:e,id:t.id})}function Tt(e,t,n,i){const s=e.groups.find(a=>a.id===n).tasks.find(a=>a.id===t);return delete s.cover,Promise.resolve(e)}async function Bt(e,t){var n;return(n=e==null?void 0:e.members)!=null&&n.length||(e.members=[]),e.members.some(i=>i.username===t.username)?Promise.reject("User is already on board"):(e.members.push(t),e=await R.add({board:e,type:"added",itemName:t.fullname,containerName:"this board"}),Promise.resolve(e))}async function St(e,t,n,i){var a,c;const s=e.groups.find(u=>u.id===n).tasks.find(u=>u.id===t);return(a=s.members)!=null&&a.includes(i)?Promise.reject("Member is already on task"):((c=s==null?void 0:s.members)!=null&&c.length?s.members.push(i):s.members=[i],e=await R.add({board:e,type:"added",itemName:i.fullname,containerName:"this card",ids:{groupId:n,taskId:t}}),Promise.resolve(e))}function At(e,t){var n;if((n=e.starredBy)!=null&&n.length){const i=e.starredBy.findIndex(r=>r===t);i===-1?e.starredBy.push(t):e.starredBy.splice(i,1)}else e.starredBy=[t];return Promise.resolve(e)}function xt(){return{title:"",createdAt:Date.now(),createdBy:{},style:{},labels:[{id:"l101",title:"Done",color:"#61bd4f"},{id:"l102",title:"Progress",color:"#f2d600"},{id:"l103",title:"Low priority",color:"#c377e0"},{id:"l104",title:"Medium priority",color:"#ff9f1a"},{id:"l105",title:"High priority",color:"#eb5a46"},{id:"l106",title:"All",color:"#0079bf"}],members:[],groups:[]}}function Ot(e){const t=G(e[0]).unix()*1e3,n=G(e[1]).unix()*1e3;return console.log(t),console.log(n),t===n?{endDate:n,isDone:!1}:{startDate:t,endDate:n,isDone:!1}}function Mt(e){const t=e.lastIndexOf("/")+1,n=e.lastIndexOf("_"),i=e.substring(/\.(png|jpg|gif|bmp|jpeg|PNG|JPG|GIF|BMP|JPEG)/.exec(e).index),r=e.substring(t,n)+i;return{id:U.makeId("a"),url:e,name:r,createdAt:Date.now()}}async function Nt(e){return await x.put(`${q}/${e._id}`,e)}async function Pt(e){return await x.post(q,e)}const Gt={emits:["addedBoard","closeModal"],data(){return{boardToAdd:T.getEmptyBoard(),imgs:null,colors:["#0079bf","#d29034","#519839","#b04632","#89609e"]}},created(){this.displayImgs()},methods:{async displayImgs(){const e=await L.queryPhotos(this.searchTxt);this.imgs=e.results.splice(1,4)},setBackgroundImg(e){this.boardToAdd.style.imgUrl=e.urls.full,this.boardToAdd.style.color=""},setBackgroundColor(e){this.boardToAdd.style.color=e,this.boardToAdd.style.imgUrl=""},onCreateBoard(){if(this.boardToAdd.title.trim()==="")return;const e=this.$store.getters.loggedInUser;this.boardToAdd.createdBy=e,this.boardToAdd.members=[e],this.$store.dispatch({type:"saveBoard",boardToSave:this.boardToAdd}),this.$emit("addedBoard")},onClose(){this.$emit("addedBoard")}}},Lt={class:"add-board"},Ut={class:"header flex"},Jt=o("h1",{class:"title"},"Create board",-1),Rt={class:"body"},Et={class:"bg-panel"},Ft=o("span",{class:"background-title"},"Background",-1),jt={class:"img-list clean-list flex"},Vt=["onClick","src"],qt={class:"color-list clean-list flex"},Ht=["onClick"],zt={class:"input-panel"},Wt=o("span",{class:"input-title"},[D(" Board title "),o("span",{class:"asterisk"},"*")],-1);function Kt(e,t,n,i,r,s){return l(),d("section",Lt,[o("div",Ut,[Jt,o("a",{onClick:t[0]||(t[0]=(...a)=>s.onClose&&s.onClose(...a)),class:"close-create-board-icon"})]),o("div",Rt,[o("div",Et,[Ft,o("ul",jt,[(l(!0),d(y,null,I(r.imgs,a=>(l(),d("li",{key:a.id},[o("img",{class:"img",onClick:c=>s.setBackgroundImg(a),src:a.urls.thumb,alt:""},null,8,Vt)]))),128))]),o("ul",qt,[(l(!0),d(y,null,I(r.colors,a=>(l(),d("li",{key:a},[o("div",{class:"color",onClick:c=>s.setBackgroundColor(a),style:C({backgroundColor:a})},null,12,Ht)]))),128))])]),o("div",zt,[Wt,B(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.boardToAdd.title=a),type:"text"},null,512),[[A,r.boardToAdd.title]])]),o("button",{class:"create-btn btn",onClick:t[2]||(t[2]=(...a)=>s.onCreateBoard&&s.onCreateBoard(...a))},"Create")])])}var H=p(Gt,[["render",Kt]]);const N={login:Yt,logout:Xt,signup:es,signupWithGoogle:Zt,loginWithGoogle:Qt},F="auth";async function Yt(e){try{const t=await x.post(`${F}/login`,e);return J.save(t),Promise.resolve(t)}catch(t){throw console.log("Couldnt login",t),t}}async function Qt(e){e.password="isGoogle";try{const t=await x.post(`${F}/login`,e);return J.save(t),Promise.resolve(t)}catch(t){console.log("Couldnt login with google",t)}}async function Zt(e){e.password="isGoogle";try{const t=await x.post(`${F}/signup`,e);return J.save(t),Promise.resolve(t)}catch(t){throw console.log("Couldnt signup with google",t),t}}async function Xt(){try{return await x.post(`${F}/logout`),sessionStorage.clear(),Promise.resolve()}catch(e){throw console.log(e),e}}async function es(e){try{const t=await x.post(`${F}/signup`,e);return J.save(t),t}catch(t){throw console.log("Couldnt login",t),t}}const ts={props:{user:Object},emits:["closeModal"],methods:{async onLogout(){await N.logout(),this.$router.push("/")},onClose(){this.$emit("closeModal")}},computed:{imgUrl(){var e;return`url(${(e=this.user)==null?void 0:e.imgUrl})`||""}}},ss={class:"header"},os=o("span",null,"Account",-1),ns={class:"user"},rs={class:"details"},as={class:"fullname"},is={class:"username"},ls=o("div",{class:"profile-btns"},[o("span",{class:"profile-btn"},"Profile"),o("span",{class:"activity-btn"},"Activity"),o("span",{class:"Cards-btn"},"Cards")],-1);function cs(e,t,n,i,r,s){const a=M("close");return B((l(),d("section",{onClick:t[2]||(t[2]=_(()=>{},["stop"])),class:"profile-modal"},[o("div",ss,[os,o("span",{onClick:t[0]||(t[0]=(...c)=>s.onClose&&s.onClose(...c)),class:"close-profile-modal"})]),o("div",ns,[o("div",{class:"profile-icon",style:C({backgroundImage:s.imgUrl})},null,4),o("div",rs,[o("span",as,k(n.user.fullname),1),o("small",is,k(n.user.username),1)])]),ls,o("div",{onClick:t[1]||(t[1]=(...c)=>s.onLogout&&s.onLogout(...c)),class:"logout"},"Logout")])),[[a,s.onClose]])}var ds=p(ts,[["render",cs]]),us="/assets/search-icon.22ae21ff.png",hs="/assets/search-black.2b77d9f4.png";const gs={components:{headerBoardList:Ee,addBoard:H,profileModal:ds},created(){},data(){return{searchTxt:"",isShown:!1,createClicked:!1,profileModalOpen:!1}},methods:{openList(e){this.isShown=!this.isShown},AppHeaderClicked(){this.$router.push("/board")},onToggleAddBoard(){this.createClicked=!this.createClicked},onToggleProfileModal(){this.profileModalOpen=!this.profileModalOpen}},computed:{headerBgc(){return{"trans-header":/board\//g.test(this.$route.fullPath)}},boards(){return this.$store.getters.boards},currBoard(){return this.$store.getters.board},loggedInUser(){return this.$store.getters.loggedInUser}},unmounted(){}},ms=o("img",{class:"gif-logo",src:"",alt:""},null,-1),ps=o("span",{class:"logo-txt"},"Twello",-1),ks=[ms,ps],_s={class:"board-main-nav flex space-between align-center"},bs={class:"actions"},vs=o("span",null,[D(" Board "),o("span",{class:"svg-icon expand"})],-1),fs=[vs],ys=o("button",{class:"btn wide-s"},[o("span",null,[D(" Starred "),o("span",{class:"svg-icon expand"})])],-1),Cs=o("button",{class:"btn narrow-s"},[o("span",null,[D(" More "),o("span",{class:"svg-icon expand"})])],-1),Is={class:"second-actions flex"},$s=D("SR"),ws={class:"search-app-header"},Ds=o("img",{class:"search-icon",src:us,alt:""},null,-1),Ts=o("img",{class:"search-icon-b",src:hs,alt:""},null,-1),Bs=re('<div class="mini-search"><span class="search-icon svg-icon"></span></div><button class="info btn"><span class="info-icon"></span></button><button class="notifications btn"><span class="notifications-icon"></span></button>',3);function Ss(e,t,n,i,r,s){var f;const a=b("add-board"),c=b("header-board-list"),u=b("router-link"),v=b("profile-modal");return l(),d("header",{class:w([s.headerBgc,"main-header app-header flex align-center"])},[o("div",{onClick:t[0]||(t[0]=(...h)=>s.AppHeaderClicked&&s.AppHeaderClicked(...h)),class:"logo flex align-center"},ks),o("div",_s,[o("div",bs,[o("button",{onClick:t[1]||(t[1]=(...h)=>s.openList&&s.openList(...h)),class:"btn wide-s"},fs),ys,Cs,o("button",{onClick:t[2]||(t[2]=(...h)=>s.onToggleAddBoard&&s.onToggleAddBoard(...h)),class:"btn create-btn xnarrow-s"},"Create")]),r.createClicked?(l(),S(a,{key:0,onAddedBoard:s.onToggleAddBoard},null,8,["onAddedBoard"])):m("",!0),r.isShown?(l(),S(c,{key:1,onCloseModal:s.openList,boards:s.boards},null,8,["onCloseModal","boards"])):m("",!0),o("div",Is,[$(u,{to:"/listening",class:"btn btn-sr"},{default:O(()=>[$s]),_:1}),o("div",ws,[Ds,Ts,B(o("input",{class:"search-input","onUpdate:modelValue":t[3]||(t[3]=h=>r.searchTxt=h),type:"text",placeholder:"Search"},null,512),[[A,r.searchTxt]])]),Bs,o("div",{onClick:t[4]||(t[4]=(...h)=>s.onToggleProfileModal&&s.onToggleProfileModal(...h)),class:"profile-app-header flex",style:C({backgroundImage:`url(${(f=s.loggedInUser)==null?void 0:f.imgUrl})`})},[r.profileModalOpen?(l(),S(v,{key:0,onCloseModal:s.onToggleProfileModal,user:s.loggedInUser},null,8,["onCloseModal","user"])):m("",!0)],4)])])],2)}var As=p(gs,[["render",Ss]]);const xs={components:{homeHeader:we,loginHeader:xe,appHeader:As},methods:{},computed:{headerType(){const e=this.$route.fullPath;return e==="/"?"home-header":e==="/auth/login"||e==="/auth/signup"?"login-header":"app-header"}}};function Os(e,t,n,i,r,s){return l(),S(W(s.headerType))}var Ms=p(xs,[["render",Os]]);const Ns={computed:{isReady(){return this.$store.getters.isReady}}},Ps={key:0,class:"loading-container"},Gs=o("span",{class:"loading-gif"},null,-1),Ls=[Gs];function Us(e,t,n,i,r,s){return s.isReady?m("",!0):(l(),d("div",Ps,Ls))}var Js=p(Ns,[["render",Us]]);const Rs={components:{headerContainer:Ms,loadingGif:Js},async created(){await this.$store.dispatch("loadUser")},computed:{boards(){return this.$store.getters.boards},isReady(){return this.$store.getters.isReady},isReadyClass(){return{"loading-layout":this.isReady}}}};function Es(e,t,n,i,r,s){const a=b("header-container"),c=b("router-view"),u=b("loading-gif");return l(),d(y,null,[s.isReady?(l(),S(a,{key:0})):m("",!0),s.isReady?(l(),S(c,{key:1})):m("",!0),$(u)],64)}var Fs=p(Rs,[["render",Es]]),js="/assets/hero.f5b958c8.png";const Vs={components:{},data(){return{}},methods:{logAsGuest(){console.log("Loggin as guest"),this.$router.push("/board")}},computed:{},unmounted(){}},qs={class:"home-page main-layout"},Hs={class:"hero flex"},zs={class:"action-call flex"},Ws=o("h1",{class:"hero-title"},"Twello helps teams move work forward.",-1),Ks=o("p",{class:"hero-p"}," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Twello. ",-1),Ys=o("div",{class:"hero-img-container"},[o("img",{class:"hero-img",src:js,alt:""})],-1);function Qs(e,t,n,i,r,s){return l(),d("section",qs,[o("div",Hs,[o("div",zs,[Ws,Ks,o("button",{class:"live-demo-btn btn",onClick:t[0]||(t[0]=(...a)=>s.logAsGuest&&s.logAsGuest(...a))},"Try live demo")]),Ys])])}var Zs=p(Vs,[["render",Qs]]);const Xs={props:{board:{type:Object}},components:{},data(){return{}},created(){},methods:{openBoard(){this.$router.push("/board/"+this.board._id)},async starredToggle(){await this.$store.dispatch({type:"starredBoardToggle",board:this.board})}},computed:{img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){var e;return(e=this.board.style)!=null&&e.color?this.board.style.color:""},isStared(){var t;const e=this.$store.getters.loggedInUser;return(t=this.board.starredBy)!=null&&t.includes(e._id)?"starred":""}}},eo=o("span",null,null,-1),to={class:"board-title"};function so(e,t,n,i,r,s){return n.board?(l(),d("li",{key:0,class:"board-preview",onClick:t[2]||(t[2]=(...a)=>s.openBoard&&s.openBoard(...a))},[o("div",{class:"board-background",style:C({backgroundImage:`url('${s.img}')`,backgroundColor:`${s.color}`})},[eo,o("div",to,k(n.board.title),1),o("div",{class:w(["flex star-container",s.isStared])},[o("a",{class:"unstarred-icon",onClick:t[0]||(t[0]=_((...a)=>s.starredToggle&&s.starredToggle(...a),["stop"]))}),o("a",{class:"starred-icon",onClick:t[1]||(t[1]=_((...a)=>s.starredToggle&&s.starredToggle(...a),["stop"]))})],2)],4)])):m("",!0)}var oo=p(Xs,[["render",so]]);const no={props:{boards:{type:Array}},components:{boardPreview:oo,addBoard:H,AddBoard:H},data(){return{createMenuOpen:!1}},created(){},methods:{toggleNewBoard(){this.createMenuOpen=!this.createMenuOpen}},computed:{starredBoards(){return this.$store.getters.starredBoards}}},ro={class:"board-list-container"},ao=o("div",{class:"flex align"},[o("a",{class:"board-list-strred-icon"}),o("span",null,"Starred boards")],-1),io={class:"board-list clean-list"},lo=o("div",{class:"flex align"},[o("a",{class:"board-list-title-icon"}),o("span",null,"Your boards")],-1),co={class:"board-list clean-list"},uo=o("div",{class:"add-bord-container"},[o("p",null,"Create new board")],-1),ho=[uo];function go(e,t,n,i,r,s){const a=b("add-board"),c=b("board-preview");return l(),d("section",ro,[r.createMenuOpen?(l(),S(a,{key:0,onAddedBoard:s.toggleNewBoard},null,8,["onAddedBoard"])):m("",!0),ao,o("ul",io,[(l(!0),d(y,null,I(s.starredBoards,u=>(l(),S(c,{key:u._id,board:u},null,8,["board"]))),128))]),lo,o("ul",co,[(l(!0),d(y,null,I(n.boards,u=>(l(),S(c,{key:u._id,board:u},null,8,["board"]))),128)),o("li",{class:"add-new-board",onClick:t[0]||(t[0]=(...u)=>s.toggleNewBoard&&s.toggleNewBoard(...u))},ho)])])}var mo=p(no,[["render",go]]);const po={props:{},components:{},data(){return{}},created(){},methods:{},computed:{}},ko={class:"board-list-side-bar"},_o={class:"clean-list"},bo=o("a",{class:"boards-menu-icon"},null,-1),vo=o("span",null,"Boards",-1),fo=o("li",null,[o("div",{class:"list-container"},[o("a",{class:"templates-menu-icon"}),o("span",null,"Templates")])],-1),yo=o("a",{class:"Home-menu-icon"},null,-1),Co=o("span",null,"Home",-1);function Io(e,t,n,i,r,s){const a=b("router-link");return l(),d("section",ko,[o("ul",_o,[o("li",null,[$(a,{to:"/board"},{default:O(()=>[bo,vo]),_:1})]),fo,o("li",null,[$(a,{to:"/",class:"list-container"},{default:O(()=>[yo,Co]),_:1})])])])}var $o=p(po,[["render",Io]]);const wo="",P=Do();P.setup();function Do(){var e=null;return{async setup(){e=ae(wo)},on(n,i){e.on(n,i)},off(n,i=null){!e||(i?e.off(n,i):e.removeAllListeners(n))},emit(n,i){console.log(n),console.log(i),e.emit(n,i)},terminate(){e=null}}}const To={components:{boardList:mo,boardListSideBar:$o},async created(){P.on("boards-updated",()=>{this.$store.dispatch("loadBoards")});let e=this.$store.getters.loggedInUser;console.log(e),e||(e={username:"guest@ca.com",password:"guest"},await N.login(e),await this.$store.dispatch("loadUser"))},data(){return{}},methods:{},computed:{boards(){return this.$store.getters.boards}},unmounted(){}},Bo={key:0,class:"board-app flex"};function So(e,t,n,i,r,s){const a=b("board-list-side-bar"),c=b("board-list");return s.boards?(l(),d("section",Bo,[$(a),$(c,{boards:s.boards},null,8,["boards"])])):m("",!0)}var Ao=p(To,[["render",So]]);const xo={props:{task:{type:Object}},components:{},data(){return{checklist:{id:"asdasd",title:"todo",items:[{id:"sfdfs",title:"done this",done:!0},{id:"sfdfs",title:"done that",done:!0}]}}},created(){},methods:{openTaskDetails(){this.$router.push(this.$route.fullPath+"/task/"+this.task.id),this.$emit("openTaskDetails")},labelClicked(){this.$emit("labelClicked")},dateChecked(){this.$emit("dateChecked",this.task.id)}},computed:{attachNum(){var e;return(e=this.task.attachments)==null?void 0:e.length},img(){return this.task.cover.backgroundImage},bgColor(){return this.task.cover.backgroundColor},labels(){return this.task.labelIds.map(e=>this.$store.getters.labelById(e))},checkedSum(){return`${this.doneSum}/${this.itemsSum}`},isDone(){return this.itemsSum===this.doneSum?"done":""},itemsSum(){return this.task.checklists.reduce((e,t)=>e+t.items.length,0)},doneSum(){return this.task.checklists.map(t=>t.items.filter(n=>n.isDone)).reduce((t,n)=>t+n.length,0)},isItems(){return this.itemsSum!==0},date(){const e=new Date(this.task.dueDate.startDate),t=new Date(this.task.dueDate.endDate),n=`${e.toLocaleString("en",{month:"short"})} ${e.getDate()}`,i=`${t.toLocaleString("en",{month:"short"})} ${t.getDate()}`;return this.task.dueDate.startDate?`${n}-${i}`:i},taskStatus(){return this.task.dueDate.isDone?"complited":this.task.dueDate.endDate<Date.now()?"overdue":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24?"due-soon":""}}},Oo={key:0,class:"flex clean-list"},Mo=["title"],No={class:"task-preview-title"},Po={class:"actions-container flex"},Go={class:"first-actions"},Lo=o("a",{class:"date-icon"},null,-1),Uo=o("a",{class:"checked-icon"},null,-1),Jo=o("a",{class:"complited-icon"},null,-1),Ro={class:"date"},Eo={key:1,class:"description-preview"},Fo=o("a",{class:"description-icon",title:"This card has a description"},null,-1),jo=[Fo],Vo={key:2,class:"attachment-preview"},qo=o("a",{class:"attachments-icon",title:"attachments"},null,-1),Ho={class:"attach-num"},zo=o("a",{class:"checklist-icon",title:"Checklist items"},null,-1),Wo={class:"checkedSum"},Ko={key:0,class:"members-preview flex"},Yo=["title"];function Qo(e,t,n,i,r,s){var a,c,u,v,f;return n.task?(l(),d("section",{key:0,class:"task-preview",onClick:t[2]||(t[2]=(...h)=>s.openTaskDetails&&s.openTaskDetails(...h))},[((a=n.task.cover)==null?void 0:a.type)==="color"?(l(),d("div",{key:0,class:"task-cover-color",style:C({backgroundColor:`${s.bgColor}`})},null,4)):m("",!0),((c=n.task.cover)==null?void 0:c.type)==="img"?(l(),d("div",{key:1,class:"task-cover-img",style:C({backgroundImage:`${s.img}`})},null,4)):m("",!0),o("main",null,[(u=n.task.labelIds)!=null&&u.length?(l(),d("ul",Oo,[(l(!0),d(y,null,I(s.labels,h=>(l(),d("li",{title:h.title,onClick:t[0]||(t[0]=_((...E)=>s.labelClicked&&s.labelClicked(...E),["stop"])),key:h},[o("div",{class:"task-label",style:C({backgroundColor:`${h.color}`})},k(h.title),5)],8,Mo))),128))])):m("",!0),o("h2",No,k(n.task.title),1),o("div",Po,[o("div",Go,[n.task.dueDate?(l(),d("div",{key:0,class:w(["date-preview flex",s.taskStatus]),onClick:t[1]||(t[1]=_((...h)=>s.dateChecked&&s.dateChecked(...h),["stop"]))},[Lo,Uo,Jo,o("span",Ro,k(s.date),1)],2)):m("",!0),n.task.description?(l(),d("div",Eo,jo)):m("",!0),(v=n.task.attachments)!=null&&v.length?(l(),d("div",Vo,[qo,o("span",Ho,k(s.attachNum),1)])):m("",!0),n.task.checklists&&s.isItems?(l(),d("div",{key:3,class:w(["checklist-preview flex",s.isDone])},[zo,o("span",Wo,k(s.checkedSum),1)],2)):m("",!0)]),(f=n.task.members)!=null&&f.length?(l(),d("div",Ko,[(l(!0),d(y,null,I(n.task.members,h=>(l(),d("span",{key:h._id,style:C({backgroundImage:`url(${h.imgUrl})`}),title:h.fullname},null,12,Yo))),128))])):m("",!0)])])])):m("",!0)}var Zo=p(xo,[["render",Qo]]);const Xo={props:{group:{type:Object}},components:{taskPreview:Zo,Container:K,Draggable:Y},data(){return{addBtnClicked:!1,task:{title:""},isMenueOpen:!1}},created(){},methods:{getTaskPayload(e){return this.group.tasks[e]},onDrop(e){this.$emit("saveTaskDrop",{ev:e,groupId:this.group.id})},async onSaveTitle(e){!e.target.innerText||(this.group.title=e.target.innerText,this.$emit("editGroup",this.group))},openAddForm(){this.addBtnClicked=!this.addBtnClicked,console.log(this.$refs)},async saveTask(){await this.$emit("saveTask",{groupId:this.group.id,task:{title:this.task.title}}),this.task.title="",this.addBtnClicked=!this.addBtnClicked},openTaskDetails(){this.$emit("openTaskDetails",this.group.id)},removeGroup(){this.$emit("removeGroup",this.group.id)},labelClicked(){this.$emit("labelClicked")},toggleDeleteMenue(){this.isMenueOpen=!this.isMenueOpen},dateChecked(e){this.$emit("dateChecked",e,this.group.id)}},computed:{}},en={key:0,class:"board-group"},tn={class:"group-header"},sn=o("a",{class:"dots-icon"},null,-1),on=[sn],nn={key:0,class:"remove-list-modal"},rn={class:"remove-list-header"},an=o("span",null,"List actions",-1),ln={key:0,class:"tasks-container"},cn=o("a",{class:"add-card-icon"},null,-1),dn=D(" Add a card "),un=[cn,dn],hn={key:2,class:"add-card-container"},gn=o("button",{class:"save-new-card-btn"}," Add card ",-1);function mn(e,t,n,i,r,s){var f;const a=b("task-preview"),c=b("Draggable"),u=b("Container"),v=M("focus");return n.group?(l(),d("section",en,[o("div",tn,[o("h1",{onBlur:t[0]||(t[0]=(...h)=>s.onSaveTitle&&s.onSaveTitle(...h)),class:"group-title",contenteditable:"",spellcheck:"false"},k(n.group.title),33),o("button",{class:"group-menu",onClick:t[1]||(t[1]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))},on),r.isMenueOpen?(l(),d("div",nn,[o("div",{class:"screen-toggle",onClick:t[2]||(t[2]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))}),o("div",rn,[an,o("a",{class:"close-icon",onClick:t[3]||(t[3]=(...h)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...h))})]),o("div",{class:"delete-item",onClick:t[4]||(t[4]=(...h)=>s.removeGroup&&s.removeGroup(...h))},"Archive this list")])):m("",!0)]),(f=n.group.tasks)!=null&&f.length?(l(),d("div",ln,[$(u,{"drag-class":"on-dragging","get-child-payload":h=>s.getTaskPayload(h),"group-name":"group",onDrop:s.onDrop,orientation:"vertical",class:"clean-list group-list"},{default:O(()=>[(l(!0),d(y,null,I(n.group.tasks,h=>(l(),S(c,{key:h.id},{default:O(()=>[$(a,{onOpenTaskDetails:s.openTaskDetails,onLabelClicked:s.labelClicked,task:h,onDateChecked:s.dateChecked},null,8,["onOpenTaskDetails","onLabelClicked","task","onDateChecked"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])])):m("",!0),r.addBtnClicked?(l(),d("div",hn,[o("form",{onSubmit:t[8]||(t[8]=_((...h)=>s.saveTask&&s.saveTask(...h),["prevent"]))},[B(o("textarea",{ref:"taskTitle","onUpdate:modelValue":t[6]||(t[6]=h=>r.task.title=h),"resize:none":"",placeholder:"Enter a title for this card..."},null,512),[[v],[A,r.task.title]]),o("div",null,[gn,o("a",{class:"close-add-btn",onClick:t[7]||(t[7]=h=>r.addBtnClicked=!r.addBtnClicked)})])],32)])):(l(),d("button",{key:1,onClick:t[5]||(t[5]=(...h)=>s.openAddForm&&s.openAddForm(...h)),class:"add-card-btn"},un))])):m("",!0)}var pn=p(Xo,[["render",mn]]);const kn={emits:["closeModal"],data(){return{filterBy:{txt:""}}},methods:{onCloseFilter(){this.$emit("closeModal")}}},_n={class:"board-filter-modal"},bn={class:"header flex align-center"},vn=o("span",{class:"title"},"Filter",-1),fn={class:"body"},yn=o("p",{class:"input-title"},"Keyword",-1),Cn=o("p",{class:"input-desc"},"Search cards, members, labels, and more.",-1);function In(e,t,n,i,r,s){return l(),d("div",_n,[o("div",bn,[vn,o("button",{onClick:t[0]||(t[0]=(...a)=>s.onCloseFilter&&s.onCloseFilter(...a)),class:"close-filter-board-icon"})]),o("div",fn,[o("form",null,[yn,B(o("input",{class:"filter-input","onUpdate:modelValue":t[1]||(t[1]=a=>r.filterBy.txt=a),placeholder:"Enter a Keyword...",type:"text"},null,512),[[A,r.filterBy.txt]]),Cn])])])}var $n=p(kn,[["render",In]]);const wn={components:{},created(){},data(){return{getBy:"",users:[],chosenUser:{}}},methods:{onSetMember(e){this.chosenUser=e},onAddMember(){this.$store.dispatch({type:"addMember",user:this.chosenUser})},onClosePopup(){this.$emit("closePopup")},async getUsers(){this.users=await J.getUsersBy(this.getBy)},isChosen(e){return this.chosenUser._id===e._id}},computed:{},unmounted(){}},Dn={class:"header"},Tn=o("span",null,"Invite to board",-1),Bn={class:"body"},Sn=o("button",{class:"send-invite"},"Send invitation",-1),An={key:0,class:"user-list clean-list"},xn=["onClick"],On={key:0,class:"check-icon"};function Mn(e,t,n,i,r,s){var c;const a=M("close");return B((l(),d("section",{onClick:t[4]||(t[4]=_(()=>{},["stop"])),class:"invite-modal"},[o("div",Dn,[Tn,o("div",{onClick:t[0]||(t[0]=(...u)=>s.onClosePopup&&s.onClosePopup(...u)),class:"icon"})]),o("div",Bn,[o("form",{onSubmit:t[3]||(t[3]=_((...u)=>s.onAddMember&&s.onAddMember(...u),["prevent"]))},[B(o("input",{onInput:t[1]||(t[1]=(...u)=>s.getUsers&&s.getUsers(...u)),"onUpdate:modelValue":t[2]||(t[2]=u=>r.getBy=u),type:"text",placeholder:"Email address or name"},null,544),[[A,r.getBy]]),Sn],32),(c=r.users)!=null&&c.length?(l(),d("ul",An,[(l(!0),d(y,null,I(r.users,u=>(l(),d("li",{onClick:v=>s.onSetMember(u),class:"user-preview"},[o("div",{class:"icon",style:C({backgroundImage:`url(${u==null?void 0:u.imgUrl})`})},null,4),D(" "+k(u.fullname)+" ",1),s.isChosen(u)?(l(),d("div",On)):m("",!0)],8,xn))),256))])):m("",!0)])])),[[a,s.onClosePopup]])}var Nn=p(wn,[["render",Mn]]);const Pn={components:{boardFilterModal:$n,inviteModal:Nn},props:{board:Object},emits:["openMenu"],data(){return{isFilterOpen:!1,inviteModalOpen:!1}},methods:{async onSaveBoardName(e){this.board.title=e.target.innerText,this.$store.dispatch({type:"saveBoard",boardToSave:this.board})},onOpenMenu(){this.$emit("openMenu")},onOpenFilter(){this.isFilterOpen=!this.isFilterOpen},onToggleInviteModal(){this.inviteModalOpen=!this.inviteModalOpen},onToggleBoardStar(){this.$store.dispatch({type:"starredBoardToggle",board:this.board})}},computed:{isStarred(){var t;const e=this.$store.getters.loggedInUser;return{starred:(t=this.board.starredBy)==null?void 0:t.includes(e._id)}}}},Gn={class:"board-header flex space-between align-center"},Ln={class:"board-nav flex"},Un=o("button",{class:"board-btn btn"},[o("span",{class:"svg-icon board-icon"}),D(" Board ")],-1),Jn={class:"invited-users flex"},Rn=o("span",{class:"invite"},null,-1),En=D(" Invite "),Fn={class:"board-action"},jn=o("span",null,[o("span",{class:"svg-icon filter"}),D(" Filter ")],-1),Vn=[jn],qn=o("span",{class:"dots"},null,-1),Hn=D("Show menu "),zn=[qn,Hn];function Wn(e,t,n,i,r,s){const a=b("invite-modal"),c=b("board-filter-modal");return l(),d(y,null,[o("header",Gn,[o("div",Ln,[Un,o("div",{class:"board-name flex",onBlur:t[0]||(t[0]=(...u)=>s.onSaveBoardName&&s.onSaveBoardName(...u)),contenteditable:""},k(n.board.title),33),o("button",{class:w(["star-btn btn",s.isStarred]),onClick:t[1]||(t[1]=(...u)=>s.onToggleBoardStar&&s.onToggleBoardStar(...u))},null,2),o("div",Jn,[(l(!0),d(y,null,I(n.board.members,u=>(l(),d("span",{key:u._id,style:C({backgroundImage:`url(${u.imgUrl})`})},null,4))),128))]),o("button",{onClick:t[2]||(t[2]=(...u)=>s.onToggleInviteModal&&s.onToggleInviteModal(...u)),class:"invite-btn btn"},[Rn,En,r.inviteModalOpen?(l(),S(a,{key:0,onClosePopup:s.onToggleInviteModal},null,8,["onClosePopup"])):m("",!0)])]),o("div",Fn,[o("button",{onClick:t[3]||(t[3]=(...u)=>s.onOpenFilter&&s.onOpenFilter(...u)),class:"filter-btn btn"},Vn),o("button",{onClick:t[4]||(t[4]=(...u)=>s.onOpenMenu&&s.onOpenMenu(...u)),class:"right-nav-btn btn"},zn)])]),r.isFilterOpen?(l(),S(c,{key:0,onCloseModal:s.onOpenFilter},null,8,["onCloseModal"])):m("",!0)],64)}var Kn=p(Pn,[["render",Wn]]);const Yn={data(){return{results:null,searchTxt:"vacation"}},async created(){const e=await L.queryPhotos();this.results=e.results},methods:{async searchPhotos(){const e=await L.queryPhotos(this.searchTxt);this.results=e.results},setBackGroundImg(e){this.$emit("setBackGroundImg",e)},closeImgMenu(){this.$emit("closeImgMenu")},goBack(){this.$emit("goBack")}}},Qn={class:"right-menu background-img-menu"},Zn={class:"flex space-between"},Xn=o("h1",null,[D("Photos by "),o("span",null,[o("a",{target:"_blank",href:"https://unsplash.com/"},"Unsplah")])],-1),er=o("hr",null,null,-1),tr=o("button",null,"Search",-1),sr={class:"clean-list flex unsplash-imgs-results"},or=["onClick"],nr=["href"];function rr(e,t,n,i,r,s){return l(),d("section",Qn,[o("header",Zn,[o("a",{onClick:t[0]||(t[0]=(...a)=>s.goBack&&s.goBack(...a)),class:"back-menu-icon"}),Xn,o("a",{class:"close-menu-icon",onClick:t[1]||(t[1]=(...a)=>s.closeImgMenu&&s.closeImgMenu(...a))})]),er,o("form",{class:"search-bg-img-form",onSubmit:t[3]||(t[3]=_((...a)=>s.searchPhotos&&s.searchPhotos(...a),["prevent"]))},[B(o("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.searchTxt=a),type:"search"},null,512),[[A,r.searchTxt]]),tr],32),o("ul",sr,[(l(!0),d(y,null,I(r.results,a=>(l(),d("li",{key:a.id},[o("div",{class:"right-menu-unsplash-img",onClick:c=>s.setBackGroundImg(a.urls.full),style:C({backgroundImage:`url(${a.urls.thumb})`})},[o("a",{class:"right-menu-unsplash-title",target:"_blank",href:a.user.links.html},k(a.user.first_name),9,nr)],12,or)]))),128))])])}var ar=p(Yn,[["render",rr]]);const ir={data(){return{colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"]}},async created(){},methods:{async searchPhotos(){const e=await imgService.queryPhotos(this.searchTxt);this.results=e.results},goBack(){this.$emit("goBack")},setBackGroundColor(e){this.$emit("setBackGroundColor",e)},closeColorMenu(){this.$emit("closeColorMenu")}}},lr={class:"right-menu background-color-menu"},cr={class:"flex space-between"},dr=o("h1",null,"Colors",-1),ur=o("hr",null,null,-1),hr={class:"clean-list flex right-menu-colors-list"},gr=["onClick"];function mr(e,t,n,i,r,s){return l(),d("section",lr,[o("header",cr,[o("a",{onClick:t[0]||(t[0]=(...a)=>s.goBack&&s.goBack(...a)),class:"back-menu-icon"}),dr,o("a",{class:"close-menu-icon",onClick:t[1]||(t[1]=(...a)=>s.closeColorMenu&&s.closeColorMenu(...a))})]),ur,o("ul",hr,[(l(!0),d(y,null,I(r.colors,a=>(l(),d("li",{key:a},[o("div",{class:"right-menu-colors",onClick:c=>s.setBackGroundColor(a),style:C({backgroundColor:a})},null,12,gr)]))),128))])])}var pr=p(ir,[["render",mr]]);const kr={components:{backgroundImgMenu:ar,backgroundColorMenu:pr},data(){return{showImgClicked:!1,showColorClicked:!1}},async created(){},methods:{toggleImgMenu(){this.showImgClicked=!this.showImgClicked},toggleColorMenu(){this.showColorClicked=!this.showColorClicked},closeImgMenu(){this.showImgClicked=!this.showImgClicked,this.$emit("closeBgMenu")},closeColorMenu(){this.showColorClicked=!this.showColorClicked,this.$emit("closeBgMenu")},closeBgMenu(){this.$emit("closeBgMenu")},goBack(){this.$emit("goBack")},setBackGroundImg(e){this.$emit("setBackGroundImg",e)},setBackGroundColor(e){this.$emit("setBackGroundColor",e)}},computed:{isImgOpen(){return this.showImgClicked?"open":""},isColorOpen(){return this.showColorClicked?"open":""}}},_r={class:"right-menu background-menu"},br={class:"flex space-between"},vr=o("h1",null,"Change background",-1),fr=o("hr",null,null,-1),yr={class:"bg-menu-main"},Cr={class:"clean-list flex"},Ir=o("div",{class:"bg-menu-imgs bg-photos-img"},null,-1),$r=o("div",{class:"bg-menu-imgs-title"},"photos",-1),wr=[Ir,$r],Dr=o("div",{class:"bg-menu-imgs bg-colors-img"},null,-1),Tr=o("div",{class:"bg-menu-imgs-title"},"Colors",-1),Br=[Dr,Tr];function Sr(e,t,n,i,r,s){const a=b("background-img-menu"),c=b("background-color-menu");return l(),d("section",_r,[o("header",br,[o("a",{onClick:t[0]||(t[0]=(...u)=>s.goBack&&s.goBack(...u)),class:"back-menu-icon"}),vr,o("a",{class:"close-menu-icon",onClick:t[1]||(t[1]=(...u)=>s.closeBgMenu&&s.closeBgMenu(...u))})]),fr,o("main",yr,[o("ul",Cr,[o("li",{onClick:t[2]||(t[2]=(...u)=>s.toggleImgMenu&&s.toggleImgMenu(...u))},wr),o("li",{onClick:t[3]||(t[3]=(...u)=>s.toggleColorMenu&&s.toggleColorMenu(...u))},Br)])]),$(a,{onCloseImgMenu:s.closeImgMenu,onGoBack:s.toggleImgMenu,onSetBackGroundImg:s.setBackGroundImg,class:w(s.isImgOpen)},null,8,["onCloseImgMenu","onGoBack","onSetBackGroundImg","class"]),$(c,{onCloseColorMenu:s.closeColorMenu,onSetBackGroundColor:s.setBackGroundColor,onGoBack:s.toggleColorMenu,class:w(s.isColorOpen)},null,8,["onCloseColorMenu","onSetBackGroundColor","onGoBack","class"])])}var Ar=p(kr,[["render",Sr]]);const xr={components:{backgroundMenu:Ar},data(){return{showMenuClicked:!1}},methods:{toggleMenu(){this.showMenuClicked=!this.showMenuClicked},closeMainMenu(){this.$emit("closeMenu")},closeBgMenu(){this.showMenuClicked=!this.showMenuClicked,this.$emit("closeMenu")},setBackGroundImg(e){this.$emit("setBackGroundImg",e)},setBackGroundColor(e){this.$emit("setBackGroundColor",e)},getActivityTxt(e){return R.getActivityTxt(e,"board")},openDashboard(){this.closeMainMenu(),this.$router.push("/board/"+this.board._id+"/dashboard")},print(e){console.log(e)},getTime(e){return G(+e).fromNow()}},computed:{isOpen(){return this.showMenuClicked?"open":""},board(){return this.$store.getters.board},img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""}}},Or={class:"right-menu right-side-nav"},Mr={class:"flex space-between"},Nr=o("h1",null,"Menu",-1),Pr=o("hr",null,null,-1),Gr={class:"clean-list main-menu-list"},Lr=o("li",{class:"flex main-list-item"},[o("div",{class:"board-icon"},[o("a",{class:"about-board-icon"})]),o("span",null,"About this board")],-1),Ur=o("span",null,"Change background",-1),Jr=o("div",{class:"board-icon"},[o("a",{class:"dashboard-icon"})],-1),Rr=o("span",null,"Dashboard",-1),Er=[Jr,Rr],Fr=o("hr",null,null,-1),jr={class:"activity-list-item"},Vr=o("div",{class:"flex board-activities-header"},[o("div",{class:"board-icon"},[o("a",{class:"activity-board-icon"})]),o("span",{class:"board-activity-title"},"Activity")],-1),qr={class:"clean-list"},Hr=["onClick"],zr={class:"activity-txt"},Wr={class:"activity-txt-username"},Kr={class:"activity-time"};function Yr(e,t,n,i,r,s){const a=b("background-menu");return l(),d("section",Or,[o("header",Mr,[Nr,o("a",{class:"close-menu-icon",onClick:t[0]||(t[0]=(...c)=>s.closeMainMenu&&s.closeMainMenu(...c))})]),Pr,o("ul",Gr,[Lr,o("li",{onClick:t[1]||(t[1]=(...c)=>s.toggleMenu&&s.toggleMenu(...c)),class:"flex background-list-item"},[o("div",{class:"board-icon-img",style:C({backgroundImage:`url('${s.img}')`,backgroundColor:`${s.color}`})},null,4),Ur]),o("li",{class:"flex main-list-item",onClick:t[2]||(t[2]=(...c)=>s.openDashboard&&s.openDashboard(...c))},Er),Fr,o("li",jr,[Vr,o("ul",qr,[(l(!0),d(y,null,I(s.board.activities,c=>{var u,v;return l(),d("li",{class:"activity-container",key:c.id},[o("span",{onClick:f=>s.print(c),class:"user-img",style:C({backgroundImage:`url(${(u=c.user)==null?void 0:u.imgUrl})`})},null,12,Hr),o("span",zr,[o("span",Wr,k((v=c.user)==null?void 0:v.fullname),1),D(" "+k(s.getActivityTxt(c)),1)]),o("div",Kr,k(s.getTime(c.createdAt)),1)])}),128))])])]),$(a,{onCloseBgMenu:s.closeBgMenu,onGoBack:s.toggleMenu,onSetBackGroundImg:s.setBackGroundImg,onSetBackGroundColor:s.setBackGroundColor,class:w(s.isOpen)},null,8,["onCloseBgMenu","onGoBack","onSetBackGroundImg","onSetBackGroundColor","class"])])}var Qr=p(xr,[["render",Yr]]);const Zr={components:{boardGroup:pn,boardHeader:Kn,rightNav:Qr,Container:K,Draggable:Y},data(){return{addBtnClicked:!1,group:{title:""},currOpenTaskGroupId:null,showMenuClicked:!1,isLabelClicked:!1}},created(){},methods:{saveTaskDrop({ev:e,groupId:t}){if(e.removedIndex!==null){const n=JSON.parse(JSON.stringify(this.board));n.groups.find(r=>r.id===t).tasks.splice(e.removedIndex,1),this.$store.dispatch({type:"saveBoard",boardToSave:n})}e.addedIndex!==null&&setTimeout(()=>{const n=JSON.parse(JSON.stringify(this.board));n.groups.find(r=>r.id===t).tasks.splice(e.addedIndex,0,e.payload),this.$store.dispatch({type:"saveBoard",boardToSave:n})},1e3)},async onDrop({removedIndex:e,addedIndex:t}){this.$store.dispatch({type:"saveGroupDrop",fromIdx:e,toIdx:t})},async saveTask({groupId:e,task:t}){await this.$store.dispatch({type:"saveTask",taskToSave:t,groupId:e,activity:"Add a new card"})},async addGroup(){this.group.title.trim()!==""&&(await this.$store.dispatch({type:"saveGroup",groupToSave:{title:this.group.title},activity:"Add a new group"}),this.group.title="",this.addBtnClicked=!this.addBtnClicked)},async saveGroup(e){await this.$store.dispatch({type:"saveGroup",groupToSave:e,activity:"edit a group"})},openTaskDetails(e){this.currOpenTaskGroupId=e},async removeGroup(e){await this.$store.dispatch({type:"removeGroup",groupId:e,activity:"Remove group"})},toggleMenu(){this.showMenuClicked=!this.showMenuClicked},async setBackGroundImg(e){await this.$store.dispatch({type:"setBackGroundImg",imgUrl:e,activity:"Change background image"})},async setBackGroundColor(e){await this.$store.dispatch({type:"setBackGroundColor",color:e,activity:"Change background color"})},labelClicked(){this.isLabelClicked=!this.isLabelClicked},async dateChecked(e,t){await this.$store.dispatch({type:"toggleTaskDone",taskId:e,groupId:t,payload:e})}},computed:{boardId(){return this.$route.params.boardId},board(){return this.$store.getters.board},img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""},isOpen(){return this.showMenuClicked?"open":""},dragClass(){return{}},shownLabels(){return this.isLabelClicked?"show-title":"hide-title"}},watch:{boardId:{handler(){const{boardId:e}=this.$route.params;P.setup(),P.emit("watch-board",e),P.on("board-update",t=>{this.$store.dispatch({type:"saveBoardFromSocket",board:t})}),this.$store.commit({type:"setBoard",boardId:e})},immediate:!0}}},Xr=o("span",null,"+",-1),ea=D(" Add another list "),ta=[Xr,ea],sa={key:1,class:"add-group-container"},oa=o("button",{class:"save-new-list-btn"},"Add list",-1);function na(e,t,n,i,r,s){const a=b("board-header"),c=b("board-group"),u=b("Draggable"),v=b("Container"),f=b("router-view"),h=b("right-nav"),E=M("focus");return s.board?(l(),d("section",{key:0,class:"board-details",style:C({backgroundImage:`url(${s.img})`,backgroundColor:`${s.color}`})},[$(a,{onOpenMenu:s.toggleMenu,board:s.board},null,8,["onOpenMenu","board"]),o("main",{class:w(["main-board",s.shownLabels])},[$(v,{"drag-class":"on-dragging",onDrop:s.onDrop,orientation:"horizontal",class:"flex clean-list"},{default:O(()=>[(l(!0),d(y,null,I(s.board.groups,g=>(l(),S(u,{key:g.id},{default:O(()=>[$(c,{onSaveTaskDrop:s.saveTaskDrop,class:"draggable-item",group:g,onEditGroup:s.saveGroup,onSaveTask:s.saveTask,onOpenTaskDetails:s.openTaskDetails,onRemoveGroup:s.removeGroup,onLabelClicked:s.labelClicked,onDateChecked:s.dateChecked},null,8,["onSaveTaskDrop","group","onEditGroup","onSaveTask","onOpenTaskDetails","onRemoveGroup","onLabelClicked","onDateChecked"])]),_:2},1024))),128)),r.addBtnClicked?(l(),d("div",sa,[o("form",{onSubmit:t[3]||(t[3]=_((...g)=>s.addGroup&&s.addGroup(...g),["prevent"])),class:"add-group-form"},[B(o("textarea",{"onUpdate:modelValue":t[1]||(t[1]=g=>r.group.title=g),"resize:none":"",placeholder:"Enter list title..."},null,512),[[E],[A,r.group.title]]),oa,o("span",{class:"close-add-btn",onClick:t[2]||(t[2]=g=>r.addBtnClicked=!r.addBtnClicked)})],32)])):(l(),d("button",{key:0,onClick:t[0]||(t[0]=g=>r.addBtnClicked=!r.addBtnClicked),class:"add-group-btn"},ta))]),_:1},8,["onDrop"]),$(f,{groupId:r.currOpenTaskGroupId},null,8,["groupId"]),$(h,{class:w(s.isOpen),onCloseMenu:s.toggleMenu,onSetBackGroundImg:s.setBackGroundImg,onSetBackGroundColor:s.setBackGroundColor},null,8,["class","onCloseMenu","onSetBackGroundImg","onSetBackGroundColor"])],2)],4)):m("",!0)}var ra=p(Zr,[["render",na]]);const aa={props:{item:Object},data(){return{openDeleteMenu:!1}},methods:{toggleIsDone(e){this.$emit("toggleIsDone",e)},onSaveItemTitle(e,t){!t.target.innerText||(e.title=t.target.innerText,this.$emit("onSaveItemTitle",e))},toggleDeleteMenue(){this.openDeleteMenu=!this.openDeleteMenu},removeItem(e){this.$emit("removeItem",e)}}},ia=o("a",{class:"checked-icon"},null,-1),la=[ia],ca={class:"remove-modal-container"},da={class:"dots-icon-container"},ua={key:0,class:"remove-item-modal"},ha={class:"remove-item-header"},ga=o("span",null,"Item actions",-1);function ma(e,t,n,i,r,s){return l(),d(y,null,[n.item?(l(),d("div",{key:0,class:"checklist-checkbox",onClick:t[0]||(t[0]=a=>s.toggleIsDone(n.item.id))},la)):m("",!0),o("div",{onBlur:t[1]||(t[1]=a=>s.onSaveItemTitle(n.item,a)),class:"item-title",contenteditable:"",spellcheck:"false"},k(n.item.title),33),o("div",ca,[o("span",da,[o("a",{class:"dots-icon",onClick:t[2]||(t[2]=(...a)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...a))})]),r.openDeleteMenu?(l(),d("div",ua,[o("div",{class:"screen-toggle",onClick:t[3]||(t[3]=(...a)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...a))}),o("div",ha,[ga,o("a",{class:"close-icon",onClick:t[4]||(t[4]=(...a)=>s.toggleDeleteMenue&&s.toggleDeleteMenue(...a))})]),o("div",{class:"delete-item",onClick:t[5]||(t[5]=a=>s.removeItem(n.item.id))},"Delete")])):m("",!0)])],64)}var pa=p(aa,[["render",ma]]);const ka={props:{checklist:Object,isAddItemsOpen1:Boolean},components:{checklistItemPreview:pa},created(){},data(){return{checklistItemTitle:"",isAddItemsOpen:!1}},methods:{addChecklistItem(e){this.$emit("addChecklistItem",e,this.checklistItemTitle),this.checklistItemTitle=""},toggleIsDone(e){this.$emit("toggleIsDone",this.checklist.id,e)},isItemDone(e){return e.isDone?"done":""},toglleAddItems(){this.isAddItemsOpen=!this.isAddItemsOpen},removeChecklist(e){this.$emit("removeChecklist",e)},async onSaveChecklistTitle(e){e.target.innerText.trim()!==""&&(this.checklist.title=e.target.innerText,this.$emit("editChecklist",this.checklist))},async onSaveItemTitle(e){this.$emit("editChecklistItem",e,this.checklist.id)},removeChecklistItem(e){this.$emit("removeChecklistItem",this.checklist.id,e)}},computed:{donePercentage(){const e=this.checklist.items.length,n=this.checklist.items.filter(r=>r.isDone).length;return`${Math.floor(n*100/e)||0}%`},isComplited(){return this.donePercentage==="100%"?"done":""}}},_a={key:0,class:"checklist-header"},ba={class:"checklist-header-title flex"},va=o("div",{class:"checklist-icon"},null,-1),fa={class:"progress-bar-container"},ya={class:"progress-percentage"},Ca={class:"progress-bar"},Ia={class:"background-bar"},$a={key:1,class:"add-checklist-item-form"},wa={class:"flex"};function Da(e,t,n,i,r,s){const a=b("checklist-item-preview"),c=M("focus");return l(),d(y,null,[n.checklist?(l(),d("div",_a,[o("div",ba,[va,o("h3",{onBlur:t[0]||(t[0]=(...u)=>s.onSaveChecklistTitle&&s.onSaveChecklistTitle(...u)),class:"checklist-title",contenteditable:"",spellcheck:"false"},k(n.checklist.title),33)]),o("button",{class:"delete-checklist",onClick:t[1]||(t[1]=u=>s.removeChecklist(n.checklist.id))}," Delete ")])):m("",!0),o("div",fa,[o("div",null,[o("span",ya,k(s.donePercentage),1)]),o("div",Ca,[o("div",Ia,[o("div",{class:w(["front-bar",s.isComplited]),style:C({width:s.donePercentage})},null,6)])])]),(l(!0),d(y,null,I(n.checklist.items,u=>(l(),d("div",{class:w(["checklist-items",s.isItemDone(u)]),key:u.id},[$(a,{item:u,onToggleIsDone:s.toggleIsDone,onOnSaveItemTitle:s.onSaveItemTitle,onRemoveItem:s.removeChecklistItem},null,8,["item","onToggleIsDone","onOnSaveItemTitle","onRemoveItem"])],2))),128)),r.isAddItemsOpen?(l(),d("div",$a,[B(o("input",{class:"add-checklist-item-input",type:"text",placeholder:"Add an item","onUpdate:modelValue":t[2]||(t[2]=u=>r.checklistItemTitle=u)},null,512),[[c],[A,r.checklistItemTitle]]),o("div",wa,[o("button",{onClick:t[3]||(t[3]=u=>s.addChecklistItem(n.checklist.id)),class:"add-checklist-item-btn"}," Add"),o("a",{class:"close-checklist-icon",onClick:t[4]||(t[4]=(...u)=>s.toglleAddItems&&s.toglleAddItems(...u))})])])):(l(),d("button",{key:2,class:"open-add-item-btn",onClick:t[5]||(t[5]=(...u)=>s.toglleAddItems&&s.toglleAddItems(...u))}," Add an item "))],64)}var Ta=p(ka,[["render",Da]]);const Ba={emits:["action"],methods:{onArchive(){this.$emit("action",{cbName:"archiveTask"})}}},Sa=o("span",null,"Are you sure?",-1),Aa=o("button",{class:"deny"},"No",-1);function xa(e,t,n,i,r,s){return l(),d("div",{onClick:t[1]||(t[1]=_(()=>{},["stop"])),class:"archive btn"},[Sa,o("button",{onClick:t[0]||(t[0]=(...a)=>s.onArchive&&s.onArchive(...a)),class:"confirm"},"Yes"),Aa])}var Oa=p(Ba,[["render",xa]]);const Ma={emits:["action"],components:{},created(){},data(){return{filterBy:""}},methods:{onAddMember(e){this.$emit("action",{cbName:"addMemberToTask",payload:e})}},computed:{filteredMembers(){return this.$store.getters.filteredMembers(this.filterBy)}},unmounted(){}},Na={class:"members-list clean-list"},Pa=["onClick"];function Ga(e,t,n,i,r,s){return l(),d("div",{onClick:t[5]||(t[5]=_(()=>{},["stop"])),class:"members-action"},[B(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>r.filterBy=a),placeholder:"Search members"},null,512),[[A,r.filterBy]]),o("ul",Na,[(l(!0),d(y,null,I(s.filteredMembers,a=>(l(),d("li",{key:a._id,class:"user-preview",onClick:c=>s.onAddMember(a)},[o("div",{onMouseout:t[1]||(t[1]=_(()=>{},["stop"])),onMouseover:t[2]||(t[2]=_(()=>{},["stop"])),class:"icon",style:C({backgroundImage:`url(${a.imgUrl})`})},null,36),o("span",{onMouseout:t[3]||(t[3]=_(()=>{},["stop"])),onMouseover:t[4]||(t[4]=_(()=>{},["stop"]))},k(a.fullname),33)],8,Pa))),128))])])}var La=p(Ma,[["render",Ga]]);const Ua={emits:["action"],methods:{async onUploadImg(e){const t=await L.uploadImgFromComp(e);this.$emit("action",{cbName:"uploadAttachment",payload:t.url})}}},Ja={class:"clean-list body"},Ra=o("span",null,"Computer",-1);function Ea(e,t,n,i,r,s){return l(),d("div",{onClick:t[3]||(t[3]=_(()=>{},["stop"])),class:"attach btn"},[o("ul",Ja,[o("li",null,[o("label",{onClick:t[2]||(t[2]=_(()=>{},["stop"])),for:"file",class:"computer"},[Ra,o("input",{id:"file",type:"file",onChange:t[0]||(t[0]=_((...a)=>s.onUploadImg&&s.onUploadImg(...a),["stop"])),onClick:t[1]||(t[1]=_(()=>{},["stop"]))},null,32)])])])])}var Fa=p(Ua,[["render",Ea]]);const ja={props:{task:Object},emits:["action"],components:{},created(){},data(){return{createLabelOpen:!1,clrOpts:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#0079bf","#00c2e0","#51e898","#ff78cb","#344563"],newLabel:{title:"",color:"red"}}},methods:{onLabel(e){this.$emit("action",{cbName:"toggleLabel",payload:e})},setNewLabelClr(e){this.newLabel.color=e},saveNewLabel(){this.$emit("action",{cbName:"saveNewLabel",payload:JSON.parse(JSON.stringify(this.newLabel))}),this.newLabel={title:"",color:""}},toggleCreateLabel(){this.createLabelOpen=!this.createLabelOpen},isChosen(e){return this.task.labelIds?this.task.labelIds.includes(e):!1}},computed:{labels(){return this.$store.getters.labels}},unmounted(){}},Va={class:"header"},qa={key:0,class:"labels-title"},Ha={key:1,class:"create-label-header-container"},za=o("span",null,"Create label",-1),Wa={class:"body label-list-container"},Ka={key:0,class:"clean-list"},Ya=["onClick"],Qa={key:0,class:"selected-icon"},Za={key:1,class:"create-label-container"},Xa={for:""},ei=D(" Name "),ti={class:"clean-list clr-opts"},si=["onClick"],oi={key:0,class:"selected-icon"};function ni(e,t,n,i,r,s){const a=M("focus");return l(),d("div",{onClick:t[4]||(t[4]=_(()=>{},["stop"])),class:"label btn"},[o("div",Va,[r.createLabelOpen?(l(),d("div",Ha,[o("button",{onClick:t[0]||(t[0]=(...c)=>s.toggleCreateLabel&&s.toggleCreateLabel(...c)),class:"back"}),za])):(l(),d("span",qa,"Labels"))]),o("div",Wa,[r.createLabelOpen?(l(),d("div",Za,[o("label",Xa,[ei,B(o("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>r.newLabel.title=c),type:"text",class:"new-label-title"},null,512),[[A,r.newLabel.title],[a]])]),o("ul",ti,[(l(!0),d(y,null,I(r.clrOpts,c=>(l(),d("li",{key:c,onClick:u=>s.setNewLabelClr(c),class:"clr-opt",style:C({backgroundColor:c})},[r.newLabel.color===c?(l(),d("div",oi)):m("",!0)],12,si))),128))]),o("button",{onClick:t[3]||(t[3]=(...c)=>s.saveNewLabel&&s.saveNewLabel(...c)),class:"create-label-btn btn"},"Create")])):(l(),d("ul",Ka,[(l(!0),d(y,null,I(s.labels,c=>(l(),d("li",{onClick:u=>s.onLabel(c.id),class:"label-list-item flex",key:c,style:C({backgroundColor:c.color})},[D(k(c.title)+" ",1),s.isChosen(c.id)?(l(),d("a",Qa)):m("",!0)],12,Ya))),128)),o("button",{class:"btn create-new-label",onClick:t[1]||(t[1]=(...c)=>s.toggleCreateLabel&&s.toggleCreateLabel(...c))},"Create a new label")]))])])}var ri=p(ja,[["render",ni]]);const ai={emits:["action"],components:{},created(){},data(){return{title:"Checklist"}},methods:{addChecklist(){this.title.trim()!==""&&(this.$emit("togglePopup"),this.$emit("addChecklist"),this.$emit("action",{cbName:"addChecklist",payload:this.title}))}},computed:{},unmounted(){}},ii=D(" Title "),li=o("button",{class:"add-checklist-btn"},"Add",-1);function ci(e,t,n,i,r,s){const a=M("focus");return l(),d("section",{onClick:t[2]||(t[2]=_(()=>{},["stop"])),class:"checklist-container"},[o("form",{onSubmit:t[1]||(t[1]=_((...c)=>s.addChecklist&&s.addChecklist(...c),["prevent"])),class:"checklist-form flex"},[o("label",null,[ii,B(o("input",{type:"text",class:"checklist-title-input","onUpdate:modelValue":t[0]||(t[0]=c=>r.title=c)},null,512),[[a],[A,r.title]])]),li],32)])}var di=p(ai,[["render",ci]]);const ui={emits:["action","togglePopup"],data(){return{date:{value:[]}}},mounted(){this.date.value=[new Date,new Date]},methods:{onSave(){this.$emit("action",{cbName:"setTaskDueDate",payload:this.date}),this.$emit("togglePopup")},onRemove(){this.$emit("action",{cbName:"removeTaskDueDate"}),this.$emit("togglePopup")}},computed:{startDate(){const e=G(this.date[0]);return`${e.date()}/${e.month()+1}/${e.year()}`},endDate(){const e=G(this.date[1]);return`${e.date()}/${e.month()+1}/${e.year()}`}},unmounted(){}},hi={class:"flex"},gi={class:"start-date"},mi=o("p",{class:"lable"},"Start date",-1),pi={class:"date"},ki={class:"due-date"},_i=o("p",{class:"lable"},"Due date",-1),bi={class:"date"},vi={class:"buttons"};function fi(e,t,n,i,r,s){const a=b("Datepicker");return l(),d("div",{onClick:t[3]||(t[3]=_(()=>{},["stop"])),class:"dates-container"},[$(a,{modelValue:r.date,"onUpdate:modelValue":t[0]||(t[0]=c=>r.date=c),partialRange:!1,inline:"",range:"",autoApply:""},null,8,["modelValue"]),o("div",hi,[o("div",gi,[mi,o("p",pi,k(s.startDate),1)]),o("div",ki,[_i,o("p",bi,k(s.endDate),1)])]),o("div",vi,[o("button",{class:"dates-btn btn",onClick:t[1]||(t[1]=(...c)=>s.onSave&&s.onSave(...c))},"Save"),o("button",{class:"dates-btn btn",onClick:t[2]||(t[2]=(...c)=>s.onRemove&&s.onRemove(...c))},"Remove")])])}var yi=p(ui,[["render",fi]]);const Ci={emits:["onAction"],components:{},created(){},data(){return{actionPopupOpen:!1}},methods:{onLocation(){},toggleActionPopup(){this.actionPopupOpen=!this.actionPopupOpen}},computed:{},unmounted(){}},Ii=o("div",{class:"icon"},null,-1),$i=o("button",{class:"location"},"Location",-1),wi=[Ii,$i];function Di(e,t,n,i,r,s){return l(),d("div",{onClick:t[0]||(t[0]=(...a)=>s.toggleActionPopup&&s.toggleActionPopup(...a)),class:"location btn"},wi)}var Ti=p(Ci,[["render",Di]]);const Bi={props:{task:Object},emits:["action","actions","togglePopup"],async created(){const e=await L.queryPhotos();e.results.splice(6,e.results.length),this.unsplashPhotos=e.results},data(){return{colors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"],unsplashPhotos:[]}},methods:{onToggleCoverColor(e){var t,n;if(((n=(t=this.task)==null?void 0:t.cover)==null?void 0:n.backgroundColor)===e)return this.onRemoveCover();this.$emit("action",{cbName:"chooseCover",payload:{type:"color",style:e}})},onToggleCoverImg(e){var t,n;if(((n=(t=this.task)==null?void 0:t.cover)==null?void 0:n.backgroundImage)===`url(${e})`)return this.onRemoveCover();this.$emit("action",{cbName:"chooseCover",payload:{type:"img",style:e}})},onRemoveCover(){this.$emit("action",{cbName:"removeCover"})},async onUploadImg(e){const t=await L.uploadImgFromComp(e),n=[{cbName:"uploadAttachment",payload:t.url},{cbName:"chooseCover",payload:{type:"img",style:t.url}}];this.$emit("actions",n)},toggleActionPopup(){this.$emit("togglePopup")},isChosenColor(e){var t;return{chosen:((t=this.task.cover)==null?void 0:t.backgroundColor)===e}},isChosenImg(e){var t;return{chosen:((t=this.task.cover)==null?void 0:t.backgroundImage)===`url(${e})`}}},unmounted(){}},Si={class:"body"},Ai={class:"cover-clrs-container"},xi=o("span",null,"Colors",-1),Oi={class:"clean-list cover-clrs"},Mi=["onClick"],Ni={class:"attachments-container"},Pi=o("span",null,"Attachments",-1),Gi=D(" Upload a cover image "),Li={class:"unsplash-photos-container"},Ui=o("span",null,"Photos from Unsplash",-1),Ji={key:0,class:"clean-list imgs-container"},Ri=["onClick"];function Ei(e,t,n,i,r,s){return l(),d("div",{onClick:t[4]||(t[4]=_(()=>{},["stop"])),class:"cover-action btn"},[o("div",Si,[n.task.cover?(l(),d("div",{key:0,onClick:t[0]||(t[0]=_((...a)=>s.onRemoveCover&&s.onRemoveCover(...a),["stop"])),class:"remove-cover"},"Remove cover")):m("",!0),o("div",Ai,[xi,o("ul",Oi,[(l(!0),d(y,null,I(r.colors,a=>(l(),d("li",{onClick:c=>s.onToggleCoverColor(a),class:w(["cover-clr",s.isChosenColor(a)]),key:a,style:C({backgroundColor:a})},null,14,Mi))),128))])]),o("div",Ni,[Pi,o("button",{onClick:t[3]||(t[3]=_(()=>{},["stop"])),for:"file",class:"btn upload-cover-img"},[Gi,o("input",{id:"file",type:"file",onChange:t[1]||(t[1]=_((...a)=>s.onUploadImg&&s.onUploadImg(...a),["stop"])),onClick:t[2]||(t[2]=_(()=>{},["stop"]))},null,32)])]),o("div",Li,[Ui,r.unsplashPhotos&&r.unsplashPhotos.length?(l(),d("ul",Ji,[(l(!0),d(y,null,I(r.unsplashPhotos,a=>(l(),d("li",{onClick:_(c=>s.onToggleCoverImg(a.urls.full),["stop"]),class:w(["img-container",s.isChosenImg(a.urls.full)]),style:C({backgroundImage:`url(${a.urls.thumb})`})},null,14,Ri))),256))])):m("",!0)])])])}var Fi=p(Bi,[["render",Ei]]);const ji={emits:["togglePopup","action"],props:{action:String,task:Object},components:{archiveAction:Oa,membersAction:La,attachmentAction:Fa,labelAction:ri,checklistAction:di,datesAction:yi,coverAction:Fi,locationAction:Ti},created(){console.log(this.task)},data(){return{}},methods:{onTogglePopup(){console.log("here"),this.$emit("togglePopup")},onAction(e){this.$emit("action",e)},onActions(e){this.$emit("actions",e)},addChecklist(){this.$emit("addChecklist")}},computed:{actionTxt(){let e=this.action.substring(0,this.action.indexOf("-"));return e==="attachment"?"Attach From":e}},unmounted(){}},Vi={class:"action-popup"},qi={class:"header"};function Hi(e,t,n,i,r,s){const a=M("close");return B((l(),d("div",Vi,[o("div",qi,[D(k(s.actionTxt)+" ",1),o("div",{onClick:t[0]||(t[0]=_((...c)=>s.onTogglePopup&&s.onTogglePopup(...c),["stop"])),class:"icon btn close-popup"})]),n.action?(l(),S(W(n.action),{key:0,onTogglePopup:s.onTogglePopup,onAction:s.onAction,onAddChecklist:s.addChecklist,task:n.task},null,8,["onTogglePopup","onAction","onAddChecklist","task"])):m("",!0)])),[[a,s.onTogglePopup]])}var zi=p(ji,[["render",Hi]]);const Wi={emits:["openActionPopup"],props:{action:String},methods:{openActionPopup(){this.$emit("openActionPopup",this.action)}},computed:{actionTxt(){return this.action.substring(0,this.action.indexOf("-"))},actionClass(){return this.action==="cover-action"?this.action:this.actionTxt}}},Ki=o("div",{class:"icon"},null,-1);function Yi(e,t,n,i,r,s){return l(),d("div",{onClick:t[0]||(t[0]=(...a)=>s.openActionPopup&&s.openActionPopup(...a)),class:w(["btn btn-action",s.actionClass])},[Ki,o("span",null,k(s.actionTxt),1)],2)}var Qi=p(Wi,[["render",Yi]]);const Zi={props:{groupId:String},components:{actionPopup:zi,actionBtn:Qi,checklistDetails:Ta},data(){return{task:null,descEditOpen:!1,newDesc:"",localGroupId:null,groupName:"",actionCmps:["members-action","label-action","checklist-action","dates-action","attachment-action","location-action","cover-action","archive-action"],currOpenAction:"",isAddItemsOpen:!1,isActivitiesOpen:!1}},watch:{taskId:{async handler(){var e;try{if(!((e=this.$route.params)!=null&&e.taskId))return;const t=this.$route.params.taskId,n=await this.$store.dispatch({type:"getGroupByTask",taskId:t});this.localGroupId=n.id,this.groupName=n.title,this.task=await this.$store.dispatch({type:"getTaskById",taskId:t,groupId:this.groupId||this.localGroupId})}catch(t){console.log(t)}},immediate:!0}},methods:{toggleActivities(){this.isActivitiesOpen=!this.isActivitiesOpen},toggleAction(e){console.log(e),this.currOpenAction=this.currOpenAction?"":e},async saveTask(e){return e=JSON.parse(JSON.stringify(e)),this.$store.dispatch({type:"saveTask",taskToSave:e,groupId:this.groupId||this.localGroupId})},async onRemoveAttachment(e){const t=this.task.attachments.findIndex(n=>n.id===e);this.task.attachments.splice(t,1),this.task.cover&&delete this.task.cover,this.saveTask(this.task)},async onAction({cbName:e,payload:t=null}){if(await this.$store.dispatch({type:e,taskId:this.task.id,groupId:this.localGroupId,payload:t}),e==="archiveTask")return this.onCloseDetails();const n=this.$route.params.taskId;this.task=await this.$store.dispatch({type:"getTaskById",taskId:n,groupId:this.groupId||this.localGroupId})},async onActions(e){await this.$store.dispatch({type:e[0].cbName,taskId:this.task.id,groupId:this.localGroupId,payload:e[0].payload}),await this.$store.dispatch({type:e[1].cbName,taskId:this.task.id,groupId:this.localGroupId,payload:e[1].payload});const t=this.$route.params.taskId;this.task=await this.$store.dispatch({type:"getTaskById",taskId:t,groupId:this.groupId||this.localGroupId})},async onSaveTitle(e){this.task.title=e.target.innerText,await this.saveTask(this.task)},async onSaveDesc(){this.task.description=this.newDesc,await this.saveTask(this.task),this.toggleDescEdit()},onMakeCover(e){this.onAction({cbName:"chooseCover",payload:{type:"img",style:e}})},onCloseDetails(){const e=this.$route.fullPath,t=e.substring(0,e.indexOf("/task"));this.$router.push(t)},toggleDescEdit(){this.newDesc=this.task.description,this.descEditOpen=!this.descEditOpen},setPopupMode(e){this.isActionPopupOpen=e},getLabelById(e){return this.$store.getters.labelById(e)},getTime(e){return G(+e).fromNow()},addChecklistItem(e,t){this.onAction({cbName:"addChecklistItem",payload:{checklistId:e,title:t}})},toggleIsDone(e,t){this.onAction({cbName:"toggleIsDone",payload:{checklistId:e,itemId:t}})},isItemDone(e){return e.isDone?"done":""},addChecklist(){},removeChecklist(e){this.onAction({cbName:"removeChecklist",payload:e})},editChecklist(e){this.onAction({cbName:"editChecklist",payload:e})},editChecklistItem(e,t){this.onAction({cbName:"editChecklistItem",payload:{itemToSave:e,checklistId:t}})},removeChecklistItem(e,t){this.onAction({cbName:"removeChecklistItem",payload:{checklistId:e,itemId:t}})},toggleTaskDone(e){console.log(e),this.onAction({cbName:"toggleTaskDone",payload:{taskId:e}})},getActivityTxt(e){return R.getActivityTxt(e,"card",this.task.title)}},computed:{taskId(){return this.$route.params.taskId},descTxt(){return"description"in this.task&&this.task.description?this.task.description:"Add a more detailed description..."},isFull(){return{empty:this.task.description}},open(){return{open:this.isActionPopupOpen}},timeString(){var e=G(this.task.dueDate.endDate).toLocaleString();return e=e.substring(0,e.length-9),e},taskStatus(){return this.task.dueDate.isDone?"complete":this.task.dueDate.endDate<Date.now()?"overdue":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24?"due soon":""},statusColor(){return{overDue:this.task.dueDate.endDate<Date.now(),"due-soon":Math.abs(this.task.dueDate.endDate-Date.now())/(60*60*1e3)<24,"task-done":this.task.dueDate.isDone}},checkboxDone(){return{done:this.task.dueDate.isDone}},taskActivities(){return this.$store.getters.activitiesByTask(this.$route.params.taskId)},showBtnTxt(){return this.isActivitiesOpen?"Hide":"Show"}},unmounted(){}},Xi={class:"task-details-header"},el=o("div",{class:"icon"},null,-1),tl={class:"title-container"},sl={class:"group-txt"},ol=D(" in list: "),nl={class:"main-details"},rl={class:"main-content"},al={class:"top-actions-container task-layout"},il={key:0,class:"members-container"},ll=o("small",null,"Members:",-1),cl={class:"members"},dl={key:1,class:"labels-container"},ul=o("small",null,"Labels",-1),hl={class:"labels-list"},gl={key:2,class:"due-date-container"},ml=o("small",null,"Due date",-1),pl=o("span",{class:"checked-icon"},null,-1),kl=[pl],_l={class:"due-date"},bl={class:"date"},vl={class:"description-container"},fl=o("div",{class:"description-header"},[o("div",{class:"icon"}),o("h3",null,"Description")],-1),yl={class:"desc-actions"},Cl=o("button",{class:"save-new-list-btn"},"Save",-1),Il={key:0,class:"attachments-container"},$l=o("div",{class:"attachments-header"},[o("div",{class:"icon"}),o("h3",null,"Attachments")],-1),wl={class:"img-container"},Dl=["src"],Tl={class:"attachment-details"},Bl={class:"name"},Sl=o("a",{class:"attachment-name-icon"},null,-1),Al={class:"attachment-actions"},xl=["onClick"],Ol={class:"attacment-make-cover"},Ml=o("a",{class:"make-cover-icon"},null,-1),Nl=["onClick"],Pl={class:"activities-container"},Gl={class:"activities-header"},Ll=o("div",null,[o("div",{class:"icon"}),o("h3",null,"Activity")],-1),Ul={key:0,class:"activities-list clean-list"},Jl={class:"activity-item"},Rl={class:"details"},El={class:"username"},Fl={class:"date"},jl={class:"actions"},Vl=o("h3",{class:"actions-title"},"Add to card",-1),ql=o("div",{class:"placeholder"},null,-1);function Hl(e,t,n,i,r,s){var f,h,E;const a=b("action-popup"),c=b("action-btn"),u=b("checklist-details"),v=M("focus");return r.task?(l(),d("div",{key:0,onClick:t[10]||(t[10]=_((...g)=>s.onCloseDetails&&s.onCloseDetails(...g),["stop"])),class:"task-details-container"},[r.currOpenAction?(l(),S(a,{key:0,onAction:s.onAction,onActions:s.onActions,onTogglePopup:s.toggleAction,onAddChecklist:s.addChecklist,action:r.currOpenAction,task:r.task},null,8,["onAction","onActions","onTogglePopup","onAddChecklist","action","task"])):m("",!0),r.task?(l(),d("section",{key:1,onClick:t[9]||(t[9]=_(()=>{},["stop"])),class:w(["task-details",{"cover-open":r.task.cover}])},[r.task.cover?(l(),d("div",{key:0,style:C(r.task.cover),class:"cover"},[$(c,{onOpenActionPopup:s.toggleAction,action:"cover-action"},null,8,["onOpenActionPopup"])],4)):m("",!0),o("header",Xi,[el,o("div",tl,[o("h2",{onBlur:t[0]||(t[0]=(...g)=>s.onSaveTitle&&s.onSaveTitle(...g)),class:"title",contenteditable:"",spellcheck:"false"},k(r.task.title),33),o("div",sl,[ol,o("span",null,k(r.groupName),1)])])]),o("main",nl,[o("section",rl,[o("div",al,[(f=r.task.members)!=null&&f.length?(l(),d("div",il,[ll,o("ul",cl,[(l(!0),d(y,null,I(r.task.members,g=>(l(),d("li",{class:"member",style:C({backgroundImage:`url(${g.imgUrl})`})},null,4))),256)),o("li",{onClick:t[1]||(t[1]=_(g=>s.toggleAction("members-action"),["stop"])),class:"member add icon"})])])):m("",!0),(h=r.task.labelIds)!=null&&h.length?(l(),d("section",dl,[ul,o("ul",hl,[(l(!0),d(y,null,I(r.task.labelIds,g=>(l(),d("li",{class:"label",key:g,style:C({backgroundColor:s.getLabelById(g).color})},k(s.getLabelById(g).title),5))),128))])])):m("",!0),(E=r.task.dueDate)!=null&&E.endDate?(l(),d("div",gl,[ml,o("div",{class:w([s.checkboxDone,"date-display flex align-center"])},[o("div",{onClick:t[2]||(t[2]=g=>s.toggleTaskDone(r.task.id)),class:"dueDate-checkbox"},kl),o("div",_l,[o("span",bl,k(s.timeString),1),o("span",{class:w([s.statusColor,"mini-status"])},k(s.taskStatus),3)])],2)])):m("",!0)]),o("div",vl,[fl,r.descEditOpen?(l(),d("form",{key:1,class:"description-edit-form task-layout",onSubmit:t[6]||(t[6]=_((...g)=>s.onSaveDesc&&s.onSaveDesc(...g),["prevent"]))},[B(o("textarea",{class:"description-edit","onUpdate:modelValue":t[4]||(t[4]=g=>r.newDesc=g),placeholder:"Add a more detailed description..."},null,512),[[v],[A,r.newDesc]]),o("div",yl,[Cl,o("button",{onClick:t[5]||(t[5]=_((...g)=>s.toggleDescEdit&&s.toggleDescEdit(...g),["stop"])),class:"icon close"})])],32)):(l(),d("div",{key:0,onClick:t[3]||(t[3]=_((...g)=>s.toggleDescEdit&&s.toggleDescEdit(...g),["stop"])),class:w(["description task-layout",s.isFull])},[o("span",null,k(s.descTxt),1)],2))]),r.task.attachments&&r.task.attachments.length?(l(),d("div",Il,[$l,(l(!0),d(y,null,I(r.task.attachments,g=>(l(),d("div",{class:"attachment-thumbnail task-layout",key:g.id},[o("div",wl,[o("img",{src:g.url,alt:""},null,8,Dl)]),o("div",Tl,[o("span",Bl,[D(k(g.name)+" ",1),Sl]),o("div",Al,[o("span",null,"Added "+k(s.getTime(g.createdAt))+" -",1),o("small",{class:"attacment-delete",onClick:j=>s.onRemoveAttachment(g.id)},"Delete",8,xl),o("div",Ol,[Ml,o("span",{class:"attacment-cover-title",onClick:j=>s.onMakeCover(g.url)},"Make cover",8,Nl)])])])]))),128))])):m("",!0),(l(!0),d(y,null,I(r.task.checklists,g=>(l(),d("div",{class:"checklist-container",key:g.id},[$(u,{checklist:g,isAddItemsOpen1:r.isAddItemsOpen,onAddChecklistItem:s.addChecklistItem,onToggleIsDone:s.toggleIsDone,onRemoveChecklist:s.removeChecklist,onEditChecklist:s.editChecklist,onEditChecklistItem:s.editChecklistItem,onRemoveChecklistItem:s.removeChecklistItem},null,8,["checklist","isAddItemsOpen1","onAddChecklistItem","onToggleIsDone","onRemoveChecklist","onEditChecklist","onEditChecklistItem","onRemoveChecklistItem"])]))),128)),o("div",Pl,[o("div",Gl,[Ll,o("button",{onClick:t[7]||(t[7]=(...g)=>s.toggleActivities&&s.toggleActivities(...g)),class:"btn show"},k(s.showBtnTxt)+" details",1)]),r.isActivitiesOpen?(l(),d("ul",Ul,[(l(!0),d(y,null,I(s.taskActivities,g=>{var j;return l(),d("li",Jl,[o("div",{class:"user-icon",style:C({backgroundImage:`url(${(j=g.user)==null?void 0:j.imgUrl})`})},null,4),o("div",Rl,[o("span",null,[o("span",El,k(g.user.fullname),1),D(" "+k(s.getActivityTxt(g)),1)]),o("small",Fl,k(s.getTime(g.createdAt)),1)])])}),256))])):m("",!0)])]),o("aside",jl,[Vl,ql,(l(!0),d(y,null,I(r.actionCmps,g=>(l(),S(c,{onOpenActionPopup:s.toggleAction,key:g,action:g},null,8,["onOpenActionPopup","action"]))),128))])]),o("button",{onClick:t[8]||(t[8]=(...g)=>s.onCloseDetails&&s.onCloseDetails(...g)),class:"btn close icon"})],2)):m("",!0)])):m("",!0)}var zl=p(Zi,[["render",Hl]]);Q.register(...Z);const Wl={props:{board:Object},components:{BarChart:X},data(){return{data:[]}},created(){},computed:{testData(){return{labels:this.labels,datasets:[{data:this.membersData,backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4"]}]}},options(){return{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Cards per member"}}}},labels(){return this.board.members.map(e=>e=e.fullname)},membersData(){return this.board.members.map(e=>this.board.groups.reduce((t,n)=>t+=n.tasks.reduce((i,r)=>(r.members?i+=r.members.filter(s=>s._id===e._id).length:i+=0,i),0),0))}},methods:{}},Kl={class:"members-tasks-chart"},Yl=o("h1",null,null,-1);function Ql(e,t,n,i,r,s){const a=b("BarChart");return l(),d("section",Kl,[Yl,$(a,{chartData:s.testData,options:s.options},null,8,["chartData","options"])])}var Zl=p(Wl,[["render",Ql]]);Q.register(...Z);const Xl={props:{board:Object},components:{BarChart:X},data(){return{data:[]}},created(){},computed:{testData(){return{labels:this.labels,datasets:[{data:this.membersData,backgroundColor:["#0079AF"]}]}},options(){return{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Cards per list"}}}},labels(){return this.board.groups.map(e=>e=e.title)},membersData(){return this.board.groups.map(e=>e.tasks.length)}},methods:{}},ec={class:"task-group-chart"},tc=o("h1",null,null,-1);function sc(e,t,n,i,r,s){const a=b("BarChart");return l(),d("section",ec,[tc,$(a,{chartData:s.testData,options:s.options},null,8,["chartData","options"])])}var oc=p(Xl,[["render",sc]]);const nc={components:{membersTasksChart:Zl,taskGroupChart:oc},data(){return{}},methods:{closeDashboard(){this.$router.push("/board/"+this.board._id)}},computed:{board(){return this.$store.getters.board},img(){var e;return((e=this.board.style)==null?void 0:e.imgUrl)||""},color(){return this.board.style.color?this.board.style.color:""}}},rc={class:"dashboard"},ac={class:"dashboard-title"};function ic(e,t,n,i,r,s){const a=b("members-tasks-chart"),c=b("task-group-chart");return l(),d("section",{class:"dashboard-container",style:C({backgroundImage:`url(${s.img})`,backgroundColor:`${s.color}`})},[o("div",rc,[o("header",null,[o("div",{class:"close-icon",onClick:t[0]||(t[0]=(...u)=>s.closeDashboard&&s.closeDashboard(...u))}),o("h1",ac,k(s.board.title)+" Dashboard",1)]),$(a,{board:s.board},null,8,["board"]),$(c,{board:s.board},null,8,["board"])])],4)}var lc=p(nc,[["render",ic]]);const cc={data(){return{isTryAgain:!1,isRecording:!1,isLoading:!1,sr:null}},methods:{toggleSr(){if(this.isRecording=!this.isRecording,this.isRecording)return this.startSr();this.sr.abort()},startSr(){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.sr=new e,this.sr.continuous=!0,this.sr.lang="he-IL",this.sr.onstart=()=>{console.log("sr started")},this.sr.onend=()=>{console.log("sr stopped"),this.isRecording=!1},this.sr.onresult=async t=>{var i;this.isLoading=!0;const n=t.results;for(let r in n){for(let s in n[r]){const a=(i=n[r][s])==null?void 0:i.transcript;if(typeof a=="string"&&a.includes("\u05EA\u05D9\u05DB\u05E0\u05E1")&&a.includes("\u05DC")){console.log("match!");try{const c=a.substring(a.indexOf("\u05DC")+1).trim();console.log("Finding: ",c);const u=await this.$store.dispatch({type:"boardIdByName",query:c});return this.isLoading=!1,this.sr.stop(),u?(this.$router.push(`/board/${u}`),this.isTryAgain=!1):this.isTryAgain=!0}catch{this.isTryAgain=!0}}}return this.sr.stop(),this.isTryAgain=!0}},this.sr.start(),this.isRecording=!0}},computed:{recording(){return{recording:this.isRecording}}}},dc={key:0,class:"loading-container"},uc={key:1,class:"tryAgain-container"},hc={key:2,class:"recording-container"};function gc(e,t,n,i,r,s){return l(),d(y,null,[r.isLoading?(l(),d("div",dc,"Loading")):r.isTryAgain?(l(),d("div",uc,"TryAgain")):r.isRecording?(l(),d("div",hc,"Recording")):m("",!0),o("div",{onClick:t[0]||(t[0]=(...a)=>s.toggleSr&&s.toggleSr(...a)),class:w([s.recording,"recorder-container"])},[o("div",{class:w([s.recording,"outer"])},null,2),o("div",{class:w([s.recording,"outer-2"])},null,2),o("div",{class:w([s.recording,"icon-microphone"])},"R",2)],2)],64)}var mc=p(cc,[["render",gc],["__scopeId","data-v-604500b4"]]),pc=[{path:"/board",name:"board-app",component:Ao},{path:"/listening",name:"recorder-page",component:mc},{path:"/board/:boardId",name:"board-details",component:ra,children:[{path:"task/:taskId",name:"task-details",component:zl},{path:"dashboard",name:"dashboard",component:lc}]}];const kc={components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}};function _c(e,t,n,i,r,s){return l(),d("section",null,"This is a user profile")}var bc=p(kc,[["render",_c]]);const vc={components:{},created(){},data(){return{user:{username:"",password:"",fullname:""},Vue3GoogleOauth:ie("Vue3GoogleOauth")}},methods:{onUserAction(){if(this.currAction==="login")return this.login();this.signup()},onUserGoogleAction(){if(this.currAction==="login")return this.loginWithGoogle();this.signupWithGoogle()},async loginWithGoogle(){try{const e=await this.$gAuth.signIn(),t={fullname:e.Du.tf,username:e.Du.tv};e&&await N.loginWithGoogle(t),this.$router.push("/board")}catch(e){console.log(e)}},async signupWithGoogle(){try{const e=await this.$gAuth.signIn();console.log(e);const t={fullname:e.Du.tf,username:e.Du.tv,imgUrl:e.Du.eN};e&&await N.signupWithGoogle(t),this.$router.push("/board")}catch(e){console.log(e)}},async login(){try{await N.login(this.user),await this.$store.dispatch("loadUser"),this.$router.push("/board")}catch(e){console.log(e)}},async logout(){try{await N.logout(),this.$store.dispatch("loadUser")}catch(e){console.log(e)}},async signup(){try{await N.signup(this.user),this.$store.dispatch("loadUser"),this.$router.push("/board")}catch(e){console.log(e)}}},computed:{currAction(){return this.$route.params.action},currActionTxt(){return this.currAction==="login"?"Log in":"Sign up"}},unmounted(){}},fc={class:"auth-form-container"},yc={class:"title"},Cc=o("div",{class:"action-options-seperator"},"OR",-1),Ic=o("div",{class:"icon"},null,-1),$c=o("span",null,"Continue with Google",-1),wc=[Ic,$c];function Dc(e,t,n,i,r,s){return l(),d("section",{class:w(["auth-actions-container",s.currAction])},[o("div",fc,[o("h1",yc,k(s.currActionTxt)+" to Twello",1),o("form",{class:"auth-input-form",onSubmit:t[3]||(t[3]=_((...a)=>s.onUserAction&&s.onUserAction(...a),["prevent","stop"]))},[B(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.user.username=a),type:"email",class:"username",placeholder:"Enter your email",required:""},null,512),[[A,r.user.username]]),B(o("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.user.password=a),type:"password",class:"password",placeholder:"Enter your password",required:""},null,512),[[A,r.user.password]]),s.currAction==="signup"?B((l(),d("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=a=>r.user.fullname=a),type:"text",class:"fullname",placeholder:"Enter full name",required:""},null,512)),[[A,r.user.fullname]]):m("",!0),o("button",null,k(s.currActionTxt),1)],32),Cc,o("button",{onClick:t[4]||(t[4]=(...a)=>s.onUserGoogleAction&&s.onUserGoogleAction(...a)),class:"google-action"},wc)])],2)}var Tc=p(vc,[["render",Dc]]),Bc=[{path:"/auth/:action",name:"login",component:Tc},{path:"/user/:username",name:"user-profile",component:bc}];const Sc=le({history:ce(),routes:[{path:"/",name:"home",component:Zs},...pc,...Bc]});var Ac={state:{boards:[],board:{}},getters:{boards({boards:e}){return JSON.parse(JSON.stringify(e))},board({board:e}){return JSON.parse(JSON.stringify(e))},labels({board:e}){return JSON.parse(JSON.stringify(e.labels))},labelById:({board:e})=>t=>JSON.parse(JSON.stringify(e.labels.find(n=>n.id===t))),filteredMembers:({board:e})=>t=>{const n=new RegExp(t);return JSON.parse(JSON.stringify(e.members.filter(i=>n.test(i.username)||n.test(i.fullname))))},starredBoards(e,t,n){return JSON.parse(JSON.stringify(e.boards.filter(i=>{var r;return(r=i.starredBy)==null?void 0:r.includes(n.userModule.loggedInUser._id)})))},activitiesByTask:e=>t=>JSON.parse(JSON.stringify(e.board.activities.filter(n=>n.ids.taskId===t)))},mutations:{setBoards(e,{boards:t}){e.boards=t},saveBoard(e,{savedBoard:t}){const n=e.boards.findIndex(i=>i._id===t._id);n!==-1?e.boards.splice(n,1,t):e.boards.push(t)},setBoard(e,{boardId:t}){const n=e.boards.find(i=>i._id===t);if(!n)return console.log("Couldnt find board");e.board=n},removeGroup(e,{groupId:t}){const n=e.board.groups.findIndex(i=>i.id===t);e.board.groups.splice(n,1)}},actions:{async loadBoards({commit:e,rootState:t}){try{const n=await T.query({user:t.userModule.loggedInUser});e({type:"setBoards",boards:n})}catch(n){console.log(n)}},async saveBoard({commit:e},{boardToSave:t}){try{const n=JSON.parse(JSON.stringify(t)),i=await T.save(n);e({type:"saveBoard",savedBoard:i}),e({type:"setBoard",boardId:i._id}),P.emit("board-updated",n)}catch(n){throw console.log(n),n}},saveBoardFromSocket({commit:e},{board:t}){e({type:"saveBoard",savedBoard:t}),e({type:"setBoard",boardId:t._id})},getTaskById({state:e},{taskId:t,groupId:n}){let r=e.board.groups.find(s=>s.id===n).tasks.find(s=>s.id===t);return r=JSON.parse(JSON.stringify(r)),r.groupId=n,r},async saveTask({state:e,dispatch:t,commit:n},{taskToSave:i,groupId:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.saveTask(a,i,r);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async saveGroup({state:e,dispatch:t},{groupToSave:n}){try{const i=JSON.parse(JSON.stringify(e.board)),r=await T.saveGroup(i,n);await t({type:"saveBoard",boardToSave:r})}catch(i){console.log(i)}},async removeGroup({state:e,dispatch:t,commit:n},{groupId:i,activity:r}){try{const s=JSON.parse(JSON.stringify(e.board)),a=T.removeGroup(s,i,r);await t({type:"saveBoard",boardToSave:a})}catch(s){console.log(s)}},async archiveTask({state:e,dispatch:t,commit:n},{taskId:i,groupId:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.archiveTask(a,i,r,s);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async setTaskDueDate({state:e,dispatch:t,commit:n},{taskId:i,groupId:r,payload:s,activity:a}){try{const c=JSON.parse(JSON.stringify(e.board)),u=await T.saveTaskDueDate(c,i,r,s,a);await t({type:"saveBoard",boardToSave:u})}catch(c){console.log(c)}},async removeTaskDueDate({state:e,dispatch:t,commit:n},{taskId:i,groupId:r}){try{const s=JSON.parse(JSON.stringify(e.board)),a=await T.removeTaskDueDate(s,i,r);await t({type:"saveBoard",boardToSave:a})}catch(s){console.log(s)}},async toggleTaskDone({state:e,dispatch:t,commit:n},{taskId:i,groupId:r,payload:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.toggleTaskDone(a,i,r,s);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async uploadAttachment({state:e,dispatch:t,commit:n},{taskId:i,groupId:r,payload:s,activity:a}){try{const c=JSON.parse(JSON.stringify(e.board)),u=await T.saveAttachment(c,i,r,s,a);await t({type:"saveBoard",boardToSave:u})}catch(c){console.log(c)}},async setBackGroundImg({state:e,dispatch:t},{imgUrl:n,activity:i}){try{const r=JSON.parse(JSON.stringify(e.board));r.style.color="",r.style.imgUrl=n,await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async setBackGroundColor({state:e,dispatch:t},{color:n,activity:i}){try{const r=JSON.parse(JSON.stringify(e.board));r.style.imgUrl="",r.style.color=n,await t({type:"saveBoard",boardToSave:r})}catch(r){console.log(r)}},async saveGroupDrop({state:e,dispatch:t,commit:n},{fromIdx:i,toIdx:r}){try{const s=JSON.parse(JSON.stringify(e.board)),a=await T.saveGroupDrop(s,i,r);await t({type:"saveBoard",boardToSave:a})}catch(s){console.log(s)}},async getGroupByTask({state:e},{taskId:t}){return e.board.groups.find(n=>n.tasks.find(i=>i.id===t))},async chooseCover({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.saveCover(a,n,i,r,s);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async toggleLabel({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.toggleLabel(a,n,i,r,s);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async saveNewLabel({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.saveNewLabel(a,r,s);await t({type:"saveBoard",boardToSave:c.boardToSave}),await t({type:"toggleLabel",taskId:n,groupId:i,payload:c.id})}catch(a){console.log(a)}},async removeCover({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.removeCover(a,n,i,s);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async addChecklist({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.addChecklist(a,n,i,r,s);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async addChecklistItem({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.addChecklistItem(a,n,i,r,s);console.log(c),await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async toggleIsDone({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),f=a.groups.find(h=>h.id===i).tasks.find(h=>h.id===n).checklists.find(h=>h.id===r.checklistId).items.find(h=>h.id===r.itemId);f.isDone=!f.isDone,await t({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async removeChecklist({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),u=a.groups.find(f=>f.id===i).tasks.find(f=>f.id===n),v=u.checklists.findIndex(f=>f.id===r);u.checklists.splice(v,1),await t({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async editChecklist({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),u=a.groups.find(f=>f.id===i).tasks.find(f=>f.id===n),v=u.checklists.findIndex(f=>f.id===r.id);u.checklists.splice(v,1,r),await t({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async editChecklistItem({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),v=a.groups.find(h=>h.id===i).tasks.find(h=>h.id===n).checklists.find(h=>h.id===r.checklistId),f=v.items.findIndex(h=>h.id===r.itemToSave.id);v.items.splice(f,1,r.itemToSave),await t({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async addMember({state:e,dispatch:t},{user:n}){try{const i=JSON.parse(JSON.stringify(e.board)),r=await T.addMember(i,n);await t({type:"saveBoard",boardToSave:r}),P.emit("boards-updated")}catch(i){console.log(i)}},async removeChecklistItem({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),v=a.groups.find(h=>h.id===i).tasks.find(h=>h.id===n).checklists.find(h=>h.id===r.checklistId),f=v.items.findIndex(h=>h.id===r.itemId);v.items.splice(f,1),await t({type:"saveBoard",boardToSave:a})}catch(a){console.log(a)}},async addMemberToTask({state:e,dispatch:t},{taskId:n,groupId:i,payload:r,activity:s}){try{const a=JSON.parse(JSON.stringify(e.board)),c=await T.addMemberToTask(a,n,i,r);await t({type:"saveBoard",boardToSave:c})}catch(a){console.log(a)}},async starredBoardToggle({dispatch:e,rootState:t},{board:n}){try{const i=t.userModule.loggedInUser._id,r=await T.starredBoardToggle(n,i);await e({type:"saveBoard",boardToSave:r})}catch(i){console.log(i)}},boardIdByName({state:e},{query:t}){var i;return(i=e.boards.find(r=>t.toLowerCase().includes(r.title.toLowerCase())||r.title.toLowerCase().includes(t.toLowerCase())))==null?void 0:i._id}}},xc={state:{loggedInUser:""},getters:{loggedInUser({loggedInUser:e}){return e}},mutations:{setLoggedInUser(e,{user:t}){e.loggedInUser=t}},actions:{async loadUser({commit:e,dispatch:t}){e({type:"setIsReady",isReady:!1}),setTimeout(async()=>{const n=J.getLoggedInUser();e({type:"setLoggedInUser",user:n}),await t("loadBoards"),e({type:"setIsReady",isReady:!0})},1e3)}}};const Oc=de({strict:!0,state:{isReady:!1},getters:{isReady({isReady:e}){return e}},mutations:{setIsReady(e,{isReady:t}){e.isReady=t}},actions:{},modules:{boardModule:Ac,userModule:xc}}),Mc={mounted:e=>{e.focus()}},Nc={mounted(e,{value:t},n){e.clickOutside=({clientX:i,clientY:r})=>{const{left:s,top:a,width:c,height:u}=e.getBoundingClientRect();i>s&&i<s+c&&r>a&&r<a+u?console.log("inside"):(t(),console.log("outside"))},setTimeout(()=>{document.addEventListener("click",e.clickOutside)},0)},unmounted(e){document.removeEventListener("click",e.clickOutside)}};const Pc="1085095174420-s26dkcaicaiubfjpebgqjpb3dopricv9.apps.googleusercontent.com";ue(Fs).use(Oc).use(Sc).use(he,{clientId:Pc,scope:"email",prompt:"consent"}).directive("focus",Mc).directive("close",Nc).component("Datepicker",ge).mount("#app");
